/*! For license information please see 484.d403f57c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[484],{797:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},4505:(e,a,t)=>{t.d(a,{O0:()=>c,ic:()=>m});var s=t(7051),i=t(9722),n=t(3550);const r="https://test.mediacoreapi.masakalirestrobar.ca",d="mc_3f177f8a673446ba8ee152728d877b00";console.log("[API] Base URL:",r);const o=i.A.create({baseURL:r,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{var a;return console.log("[API] ".concat(null===(a=e.method)||void 0===a?void 0:a.toUpperCase()," ").concat(e.baseURL).concat(e.url)),e},e=>(console.error("[API Request Error]",e),Promise.reject(e))),o.interceptors.response.use(e=>(console.log("[API] Response:",e.status),e),e=>{var a,t,s;return console.error("[API Error]",{status:null===(a=e.response)||void 0===a?void 0:a.status,data:null===(t=e.response)||void 0===t?void 0:t.data,message:e.message,url:null===(s=e.config)||void 0===s?void 0:s.url}),Promise.reject(e)});const l=async()=>{const e=await(0,n.p9)();return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},c={healthCheck:async()=>(await o.get("/health")).data,getMedia:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:a,limit:t=50,orderBy:s="createdAt",order:i="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:i});a&&n.append("type",a);return(await o.get("/api/feed?".concat(n),{headers:{"x-api-key":d}})).data},getMediaById:async e=>(await o.get("/api/media/".concat(e),{headers:{"x-api-key":d}})).data,getSettings:async()=>(await o.get("/api/settings",{headers:{"x-api-key":d}})).data,getArtists:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{limit:a=50,orderBy:t="createdAt",order:s="desc"}=e,i=new URLSearchParams({limit:String(a),orderBy:t,order:s});return(await o.get("/api/artists?".concat(i),{headers:{"x-api-key":d}})).data},getArtistById:async e=>(await o.get("/api/artists/".concat(e),{headers:{"x-api-key":d}})).data,getArtistAlbums:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{orderBy:t="releaseDate",order:s="desc"}=a,i=new URLSearchParams({orderBy:t,order:s});return(await o.get("/api/artists/".concat(e,"/albums?").concat(i),{headers:{"x-api-key":d}})).data},getArtistMedia:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{type:t,orderBy:s="createdAt",order:i="desc"}=a,n=new URLSearchParams({orderBy:s,order:i});t&&n.append("type",t);return(await o.get("/api/artists/".concat(e,"/media?").concat(n),{headers:{"x-api-key":d}})).data},getAlbums:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{artistId:a,limit:t=50,orderBy:s="releaseDate",order:i="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:i});a&&n.append("artistId",a);return(await o.get("/api/albums?".concat(n),{headers:{"x-api-key":d}})).data},getAlbumById:async e=>(await o.get("/api/albums/".concat(e),{headers:{"x-api-key":d}})).data,getAlbumMedia:async e=>(await o.get("/api/albums/".concat(e,"/media"),{headers:{"x-api-key":d}})).data},m={uploadMedia:async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"video",i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0;const l=await(0,n.p9)(),c=new FormData;c.append("file",e),c.append("title",a),c.append("subtitle",t),c.append("type",s),r&&c.append("artistId",r),d&&c.append("albumId",d),console.log("[API] Upload:",{fileName:e.name,fileType:e.type,title:a,type:s,artistId:r,albumId:d});return(await o.post("/admin/media",c,{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(i&&e.total){const a=Math.round(100*e.loaded/e.total);i(a)}}})).data},updateMedia:async(e,a)=>{const t=await l();return(await o.put("/admin/media/".concat(e),a,{headers:t})).data},deleteMedia:async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=await l();return(await o.delete("/admin/media/".concat(e,"?deleteFile=").concat(a),{headers:t})).data},createArtist:async e=>{const a=await l();return(await o.post("/admin/artists",e,{headers:a})).data},updateArtist:async(e,a)=>{const t=await l();return(await o.put("/admin/artists/".concat(e),a,{headers:t})).data},deleteArtist:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await l();return(await o.delete("/admin/artists/".concat(e,"?cascade=").concat(a),{headers:t})).data},createAlbum:async e=>{const a=await l();return(await o.post("/admin/albums",e,{headers:a})).data},updateAlbum:async(e,a)=>{const t=await l();return(await o.put("/admin/albums/".concat(e),a,{headers:t})).data},deleteAlbum:async e=>{const a=await l();return(await o.delete("/admin/albums/".concat(e),{headers:a})).data},addMediaToAlbum:async(e,a,t)=>{const s=await l();return(await o.post("/admin/albums/".concat(e,"/media"),{mediaId:a,trackNumber:t},{headers:s})).data},removeMediaFromAlbum:async(e,a)=>{const t=await l();return(await o.delete("/admin/albums/".concat(e,"/media/").concat(a),{headers:t})).data},reorderAlbumTracks:async(e,a)=>{const t=await l();return(await o.put("/admin/albums/".concat(e,"/media/reorder"),{tracks:a},{headers:t})).data},generateApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read_only",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await l();return(await o.post("/admin/generate-key",(0,s.A)({name:e,accessType:a},t),{headers:i})).data},getApiKeys:async()=>{const e=await l();return(await o.get("/admin/api-keys",{headers:e})).data},deleteApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await l();return(await o.delete("/admin/api-keys/".concat(e,"?hardDelete=").concat(a),{headers:t})).data},getSettings:async()=>{const e=await l();return(await o.get("/api/settings",{headers:e})).data},updateSettings:async e=>{const a=await l();return(await o.put("/admin/settings",e,{headers:a})).data},getDashboard:async()=>{const e=await l();return(await o.get("/admin/analytics/dashboard",{headers:e})).data},getAnalyticsSummary:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;const a=await l();return(await o.get("/admin/analytics/summary?days=".concat(e),{headers:a})).data},getRealTimeStats:async()=>{const e=await l();return(await o.get("/admin/analytics/realtime",{headers:e})).data},getApiKeyStats:async e=>{const a=await l(),t=e?"/admin/analytics/api-keys?keyId=".concat(e):"/admin/analytics/api-keys";return(await o.get(t,{headers:a})).data},getUsers:async()=>{const e=await l();return(await o.get("/admin/users",{headers:e})).data},getUserById:async e=>{const a=await l();return(await o.get("/admin/users/".concat(e),{headers:a})).data},updateUserRole:async(e,a)=>{const t=await l();return(await o.put("/admin/users/".concat(e,"/role"),{role:a},{headers:t})).data},updateUserStatus:async(e,a)=>{const t=await l();return(await o.put("/admin/users/".concat(e,"/status"),{disabled:a},{headers:t})).data},deleteUser:async e=>{const a=await l();return(await o.delete("/admin/users/".concat(e),{headers:a})).data}}},4919:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5103:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var s=t(5043),i=t(6931),n=t(1228),r=t(4830);const d=(0,t(1639).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var o=t(9333),l=t(9829),c=t(5088),m=t(4919),u=t(797),p=t(5475),h=t(4505),y=t(2539),g=t(588),x=t(3390),w=t(9766),b=t(579);function v(){const{user:e,isAuthenticated:a,isAdminUser:t}=(0,y.nc)(),{playTrack:v,history:f,getResumeItems:j,playbackProgress:N}=(0,y.ut)(),A=(0,s.useMemo)(()=>j(),[j,N,f]),{data:k,isLoading:I}=(0,i.I)({queryKey:["media","all"],queryFn:()=>h.O0.getMedia({limit:50})}),{data:U,isLoading:M}=(0,i.I)({queryKey:["media","videos"],queryFn:()=>h.O0.getMedia({type:"video",limit:12})}),{data:P,isLoading:B}=(0,i.I)({queryKey:["media","audio"],queryFn:()=>h.O0.getMedia({type:"audio",limit:12})}),C=(null===k||void 0===k?void 0:k.data)||[],S=(null===U||void 0===U?void 0:U.data)||[],L=(null===P||void 0===P?void 0:P.data)||[],R=f.slice(0,6),T=C[0];return(0,b.jsxs)("div",{className:"min-h-full",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-spotify opacity-50"}),(0,b.jsxs)("div",{className:"relative px-6 pt-4 pb-8",children:[(0,b.jsxs)(n.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl md:text-4xl font-bold mb-6",children:[(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})(),a&&null!==e&&void 0!==e&&e.displayName?", ".concat(e.displayName.split(" ")[0]):""]}),R.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 mb-8",children:R.map((e,a)=>(0,b.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*a},onClick:()=>v(e,R),className:"group flex items-center gap-4 bg-white/10 hover:bg-white/20 rounded-md overflow-hidden cursor-pointer transition-colors",children:[(0,b.jsx)("div",{className:(0,w.cn)("w-14 h-14 shrink-0",!e.thumbnail&&"bg-gradient-to-br ".concat((0,w.O3)(e.id))),children:e.thumbnail?(0,b.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(r.A,{className:"w-6 h-6 text-white/50"})})}),(0,b.jsx)("span",{className:"font-semibold text-sm truncate pr-4",children:e.title}),(0,b.jsx)(x.$,{variant:"spotify",size:"icon",className:"ml-auto mr-4 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg",children:(0,b.jsx)(r.A,{className:"h-5 w-5 ml-0.5"})})]},e.id))}),0===R.length&&T&&(0,b.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative rounded-xl overflow-hidden mb-8",children:[(0,b.jsxs)("div",{className:(0,w.cn)("aspect-[3/1] md:aspect-[4/1]",!T.thumbnail&&"bg-gradient-to-br ".concat((0,w.O3)(T.id))),children:[T.thumbnail&&(0,b.jsx)("img",{src:T.thumbnail,alt:T.title,className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"})]}),(0,b.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-primary mb-2 block",children:"Featured"}),(0,b.jsx)("h2",{className:"text-2xl md:text-4xl font-bold mb-2",children:T.title}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4 line-clamp-2",children:T.subtitle||"Start exploring amazing content"}),(0,b.jsxs)(x.$,{variant:"spotify",size:"lg",onClick:()=>{C.length>0&&v(C[0],C)},children:[(0,b.jsx)(r.A,{className:"h-5 w-5 mr-2"}),"Play All"]})]})]})]})]}),(0,b.jsxs)("div",{className:"px-6 space-y-10 pb-8",children:[A.length>0&&(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(d,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Continue Watching"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:A.map((e,a)=>{var t,s,i,d;return(0,b.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},onClick:()=>(e=>{v(e,null,!0)})(e),className:"group relative cursor-pointer",children:[(0,b.jsxs)("div",{className:(0,w.cn)("aspect-video rounded-lg overflow-hidden mb-2 relative",!e.thumbnail&&"bg-gradient-to-br ".concat((0,w.O3)(e.id))),children:[e.thumbnail?(0,b.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:"video"===e.type?(0,b.jsx)(o.A,{className:"w-12 h-12 text-white/50"}):(0,b.jsx)(l.A,{className:"w-12 h-12 text-white/50"})}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/50",children:(0,b.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:"".concat((null===(t=e.progress)||void 0===t?void 0:t.percentage)||0,"%")}})}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(x.$,{variant:"spotify",size:"icon",className:"h-12 w-12",children:(0,b.jsx)(r.A,{className:"h-6 w-6 ml-0.5"})})}),(0,b.jsx)("span",{className:(0,w.cn)("absolute top-2 left-2 text-xs font-medium px-2 py-0.5 rounded","video"===e.type?"bg-blue-500/80":"bg-green-500/80"),children:"video"===e.type?"VIDEO":"AUDIO"})]}),(0,b.jsx)("h3",{className:"font-semibold text-sm truncate",children:e.title}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[null===(s=e.progress)||void 0===s?void 0:s.percentage,"% \u2022 ",(0,w.a3)((null===(i=e.progress)||void 0===i?void 0:i.duration)-(null===(d=e.progress)||void 0===d?void 0:d.currentTime))," left"]})]},e.id)})})]}),R.length>0&&(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(c.A,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Recently Played"})]}),(0,b.jsx)(g.hT,{media:R})]}),(0,b.jsx)("section",{children:(0,b.jsx)(g.hT,{media:S,isLoading:M,title:"Videos",emptyMessage:(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(o.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-1",children:"No videos available"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70",children:t?(0,b.jsxs)(b.Fragment,{children:["Videos will appear here once uploaded. ",(0,b.jsx)(p.N_,{to:"/admin/upload",className:"text-primary hover:underline",children:"Upload now"})]}):"Check back later for new video content"})]})})}),(0,b.jsx)("section",{children:(0,b.jsx)(g.hT,{media:L,isLoading:B,title:"Audio",emptyMessage:(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(l.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-1",children:"No audio available"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground/70",children:t?(0,b.jsxs)(b.Fragment,{children:["Audio tracks will appear here once uploaded. ",(0,b.jsx)(p.N_,{to:"/admin/upload",className:"text-primary hover:underline",children:"Upload now"})]}):"Check back later for new audio content"})]})})}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(m.A,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Browse All"})]}),(0,b.jsx)(g.hT,{media:C,isLoading:I,emptyMessage:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(u.A,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No media available yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:t?"Start by uploading your first video or audio file":"Content is being prepared. Check back soon!"}),t&&(0,b.jsx)(x.$,{asChild:!0,children:(0,b.jsxs)(p.N_,{to:"/admin/upload",children:[(0,b.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Upload Media"]})})]})})]})]})]})}}}]);
//# sourceMappingURL=484.d403f57c.chunk.js.map