/*! For license information please see 784.510be391.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[784],{1140:(e,a,t)=>{t.d(a,{BT:()=>f,Wu:()=>g,ZB:()=>x,Zp:()=>p,aR:()=>y});var s=t(7051),r=t(3986),n=t(5043),i=t(9766),d=t(579);const l=["className"],c=["className"],o=["className","children"],m=["className"],u=["className"],h=["className"],p=n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,l);return(0,d.jsx)("div",(0,s.A)({ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",t)},n))});p.displayName="Card";const y=n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,c);return(0,d.jsx)("div",(0,s.A)({ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t)},n))});y.displayName="CardHeader";const x=n.forwardRef((e,a)=>{let{className:t,children:n}=e,l=(0,r.A)(e,o);return(0,d.jsx)("h3",(0,s.A)((0,s.A)({ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t)},l),{},{children:n}))});x.displayName="CardTitle";const f=n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,m);return(0,d.jsx)("p",(0,s.A)({ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t)},n))});f.displayName="CardDescription";const g=n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,u);return(0,d.jsx)("div",(0,s.A)({ref:a,className:(0,i.cn)("p-6 pt-0",t)},n))});g.displayName="CardContent";n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,h);return(0,d.jsx)("div",(0,s.A)({ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",t)},n))}).displayName="CardFooter"},1360:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1555:(e,a,t)=>{t.d(a,{E:()=>l});var s=t(7051),r=t(3986),n=(t(5043),t(9766)),i=t(579);const d=["className"];function l(e){let{className:a}=e,t=(0,r.A)(e,d);return(0,i.jsx)("div",(0,s.A)({className:(0,n.cn)("animate-pulse rounded-md bg-muted",a)},t))}},2264:(e,a,t)=>{t.d(a,{p:()=>c});var s=t(7051),r=t(3986),n=t(5043),i=t(9766),d=t(579);const l=["className","type"],c=n.forwardRef((e,a)=>{let{className:t,type:n}=e,c=(0,r.A)(e,l);return(0,d.jsx)("input",(0,s.A)({type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",t),ref:a},c))});c.displayName="Input"},4319:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4370:(e,a,t)=>{t.d(a,{bq:()=>j,eb:()=>k,gC:()=>N,l6:()=>v,yv:()=>A});var s=t(7051),r=t(3986),n=t(5043),i=t(2095),d=t(6210),l=t(2382),c=t(5711),o=t(9766),m=t(579);const u=["className","children"],h=["className"],p=["className"],y=["className","children","position"],x=["className"],f=["className","children"],g=["className"],v=i.bL,A=(i.YJ,i.WT),j=n.forwardRef((e,a)=>{let{className:t,children:n}=e,d=(0,r.A)(e,u);return(0,m.jsxs)(i.l9,(0,s.A)((0,s.A)({ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t)},d),{},{children:[n,(0,m.jsx)(i.In,{asChild:!0,children:(0,m.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]}))});j.displayName=i.l9.displayName;const w=n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,h);return(0,m.jsx)(i.PP,(0,s.A)((0,s.A)({ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t)},n),{},{children:(0,m.jsx)(c.A,{className:"h-4 w-4"})}))});w.displayName=i.PP.displayName;const b=n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,p);return(0,m.jsx)(i.wn,(0,s.A)((0,s.A)({ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t)},n),{},{children:(0,m.jsx)(l.A,{className:"h-4 w-4"})}))});b.displayName=i.wn.displayName;const N=n.forwardRef((e,a)=>{let{className:t,children:n,position:d="popper"}=e,l=(0,r.A)(e,y);return(0,m.jsx)(i.ZL,{children:(0,m.jsxs)(i.UC,(0,s.A)((0,s.A)({ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:d},l),{},{children:[(0,m.jsx)(w,{}),(0,m.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,m.jsx)(b,{})]}))})});N.displayName=i.UC.displayName;n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,x);return(0,m.jsx)(i.JU,(0,s.A)({ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t)},n))}).displayName=i.JU.displayName;const k=n.forwardRef((e,a)=>{let{className:t,children:n}=e,l=(0,r.A)(e,f);return(0,m.jsxs)(i.q7,(0,s.A)((0,s.A)({ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},l),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(i.VF,{children:(0,m.jsx)(d.A,{className:"h-4 w-4"})})}),(0,m.jsx)(i.p4,{children:n})]}))});k.displayName=i.q7.displayName;n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,g);return(0,m.jsx)(i.wv,(0,s.A)({ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t)},n))}).displayName=i.wv.displayName},4505:(e,a,t)=>{t.d(a,{O0:()=>o,ic:()=>m});var s=t(7051),r=t(9722),n=t(3550);const i="https://test.mediacoreapi.masakalirestrobar.ca",d="mc_3f177f8a673446ba8ee152728d877b00";console.log("[API] Base URL:",i);const l=r.A.create({baseURL:i,timeout:3e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{var a;return console.log("[API] ".concat(null===(a=e.method)||void 0===a?void 0:a.toUpperCase()," ").concat(e.baseURL).concat(e.url)),e},e=>(console.error("[API Request Error]",e),Promise.reject(e))),l.interceptors.response.use(e=>(console.log("[API] Response:",e.status),e),e=>{var a,t,s;return console.error("[API Error]",{status:null===(a=e.response)||void 0===a?void 0:a.status,data:null===(t=e.response)||void 0===t?void 0:t.data,message:e.message,url:null===(s=e.config)||void 0===s?void 0:s.url}),Promise.reject(e)});const c=async()=>{const e=await(0,n.p9)();return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},o={healthCheck:async()=>(await l.get("/health")).data,getMedia:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:a,limit:t=50,orderBy:s="createdAt",order:r="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:r});a&&n.append("type",a);return(await l.get("/api/feed?".concat(n),{headers:{"x-api-key":d}})).data},getMediaById:async e=>(await l.get("/api/media/".concat(e),{headers:{"x-api-key":d}})).data,getSettings:async()=>(await l.get("/api/settings",{headers:{"x-api-key":d}})).data,getArtists:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{limit:a=50,orderBy:t="createdAt",order:s="desc"}=e,r=new URLSearchParams({limit:String(a),orderBy:t,order:s});return(await l.get("/api/artists?".concat(r),{headers:{"x-api-key":d}})).data},getArtistById:async e=>(await l.get("/api/artists/".concat(e),{headers:{"x-api-key":d}})).data,getArtistAlbums:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{orderBy:t="releaseDate",order:s="desc"}=a,r=new URLSearchParams({orderBy:t,order:s});return(await l.get("/api/artists/".concat(e,"/albums?").concat(r),{headers:{"x-api-key":d}})).data},getArtistMedia:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{type:t,orderBy:s="createdAt",order:r="desc"}=a,n=new URLSearchParams({orderBy:s,order:r});t&&n.append("type",t);return(await l.get("/api/artists/".concat(e,"/media?").concat(n),{headers:{"x-api-key":d}})).data},getAlbums:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{artistId:a,limit:t=50,orderBy:s="releaseDate",order:r="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:r});a&&n.append("artistId",a);return(await l.get("/api/albums?".concat(n),{headers:{"x-api-key":d}})).data},getAlbumById:async e=>(await l.get("/api/albums/".concat(e),{headers:{"x-api-key":d}})).data,getAlbumMedia:async e=>(await l.get("/api/albums/".concat(e,"/media"),{headers:{"x-api-key":d}})).data},m={uploadMedia:async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"video",r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0;const c=await(0,n.p9)(),o=new FormData;o.append("file",e),o.append("title",a),o.append("subtitle",t),o.append("type",s),i&&o.append("artistId",i),d&&o.append("albumId",d),console.log("[API] Upload:",{fileName:e.name,fileType:e.type,title:a,type:s,artistId:i,albumId:d});return(await l.post("/admin/media",o,{headers:{Authorization:"Bearer ".concat(c),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(r&&e.total){const a=Math.round(100*e.loaded/e.total);r(a)}}})).data},updateMedia:async(e,a)=>{const t=await c();return(await l.put("/admin/media/".concat(e),a,{headers:t})).data},deleteMedia:async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=await c();return(await l.delete("/admin/media/".concat(e,"?deleteFile=").concat(a),{headers:t})).data},createArtist:async e=>{const a=await c();return(await l.post("/admin/artists",e,{headers:a})).data},updateArtist:async(e,a)=>{const t=await c();return(await l.put("/admin/artists/".concat(e),a,{headers:t})).data},deleteArtist:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await c();return(await l.delete("/admin/artists/".concat(e,"?cascade=").concat(a),{headers:t})).data},createAlbum:async e=>{const a=await c();return(await l.post("/admin/albums",e,{headers:a})).data},updateAlbum:async(e,a)=>{const t=await c();return(await l.put("/admin/albums/".concat(e),a,{headers:t})).data},deleteAlbum:async e=>{const a=await c();return(await l.delete("/admin/albums/".concat(e),{headers:a})).data},addMediaToAlbum:async(e,a,t)=>{const s=await c();return(await l.post("/admin/albums/".concat(e,"/media"),{mediaId:a,trackNumber:t},{headers:s})).data},removeMediaFromAlbum:async(e,a)=>{const t=await c();return(await l.delete("/admin/albums/".concat(e,"/media/").concat(a),{headers:t})).data},reorderAlbumTracks:async(e,a)=>{const t=await c();return(await l.put("/admin/albums/".concat(e,"/media/reorder"),{tracks:a},{headers:t})).data},generateApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read_only",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await c();return(await l.post("/admin/generate-key",(0,s.A)({name:e,accessType:a},t),{headers:r})).data},getApiKeys:async()=>{const e=await c();return(await l.get("/admin/api-keys",{headers:e})).data},deleteApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await c();return(await l.delete("/admin/api-keys/".concat(e,"?hardDelete=").concat(a),{headers:t})).data},getSettings:async()=>{const e=await c();return(await l.get("/api/settings",{headers:e})).data},updateSettings:async e=>{const a=await c();return(await l.put("/admin/settings",e,{headers:a})).data},getDashboard:async()=>{const e=await c();return(await l.get("/admin/analytics/dashboard",{headers:e})).data},getAnalyticsSummary:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;const a=await c();return(await l.get("/admin/analytics/summary?days=".concat(e),{headers:a})).data},getRealTimeStats:async()=>{const e=await c();return(await l.get("/admin/analytics/realtime",{headers:e})).data},getApiKeyStats:async e=>{const a=await c(),t=e?"/admin/analytics/api-keys?keyId=".concat(e):"/admin/analytics/api-keys";return(await l.get(t,{headers:a})).data},getUsers:async()=>{const e=await c();return(await l.get("/admin/users",{headers:e})).data},getUserById:async e=>{const a=await c();return(await l.get("/admin/users/".concat(e),{headers:a})).data},updateUserRole:async(e,a)=>{const t=await c();return(await l.put("/admin/users/".concat(e,"/role"),{role:a},{headers:t})).data},updateUserStatus:async(e,a)=>{const t=await c();return(await l.put("/admin/users/".concat(e,"/status"),{disabled:a},{headers:t})).data},deleteUser:async e=>{const a=await c();return(await l.delete("/admin/users/".concat(e),{headers:a})).data}}},4537:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},5131:(e,a,t)=>{t.d(a,{b:()=>m});var s=t(7051),r=t(5043),n=t(3986),i=(t(7950),t(6851)),d=t(579);const l=["asChild"];var c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{const t=(0,i.TL)("Primitive.".concat(a)),c=r.forwardRef((e,r)=>{const{asChild:i}=e,c=(0,n.A)(e,l),o=i?t:a;return"undefined"!==typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,d.jsx)(o,(0,s.A)((0,s.A)({},c),{},{ref:r}))});return c.displayName="Primitive.".concat(a),(0,s.A)((0,s.A)({},e),{},{[a]:c})},{});var o=r.forwardRef((e,a)=>(0,d.jsx)(c.label,(0,s.A)((0,s.A)({},e),{},{ref:a,onMouseDown:a=>{var t;a.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}})));o.displayName="Label";var m=o},5949:(e,a,t)=>{t.d(a,{E:()=>o});var s=t(7051),r=t(3986),n=(t(5043),t(917)),i=t(9766),d=t(579);const l=["className","variant"],c=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/20 text-green-500",warning:"border-transparent bg-yellow-500/20 text-yellow-500"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:t}=e,n=(0,r.A)(e,l);return(0,d.jsx)("div",(0,s.A)({className:(0,i.cn)(c({variant:t}),a)},n))}},7097:(e,a,t)=>{t.d(a,{n:()=>b});var s,r,n,i,d,l=t(7051),c=t(5043),o=t(9790),m=t(5149),u=t(8458),h=t(6562),p=t(4558),y=t(5239),x=t(1454),f=t(329),g=t(9723),v=(s=new WeakMap,r=new WeakMap,n=new WeakMap,i=new WeakMap,d=new WeakSet,class extends f.Q{constructor(e,a){super(),(0,o.A)(this,d),(0,m.A)(this,s,void 0),(0,m.A)(this,r,void 0),(0,m.A)(this,n,void 0),(0,m.A)(this,i,void 0),(0,p.A)(s,this,e),this.setOptions(a),this.bindMethods(),(0,h.A)(d,this,A).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var a;const t=this.options;this.options=(0,u.A)(s,this).defaultMutationOptions(e),(0,g.f8)(this.options,t)||(0,u.A)(s,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:(0,u.A)(n,this),observer:this}),null!==t&&void 0!==t&&t.mutationKey&&this.options.mutationKey&&(0,g.EN)(t.mutationKey)!==(0,g.EN)(this.options.mutationKey)?this.reset():"pending"===(null===(a=(0,u.A)(n,this))||void 0===a?void 0:a.state.status)&&(0,u.A)(n,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=(0,u.A)(n,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){(0,h.A)(d,this,A).call(this),(0,h.A)(d,this,j).call(this,e)}getCurrentResult(){return(0,u.A)(r,this)}reset(){var e;null===(e=(0,u.A)(n,this))||void 0===e||e.removeObserver(this),(0,p.A)(n,this,void 0),(0,h.A)(d,this,A).call(this),(0,h.A)(d,this,j).call(this)}mutate(e,a){var t;return(0,p.A)(i,this,a),null===(t=(0,u.A)(n,this))||void 0===t||t.removeObserver(this),(0,p.A)(n,this,(0,u.A)(s,this).getMutationCache().build((0,u.A)(s,this),this.options)),(0,u.A)(n,this).addObserver(this),(0,u.A)(n,this).execute(e)}});function A(){var e,a;const t=null!==(e=null===(a=(0,u.A)(n,this))||void 0===a?void 0:a.state)&&void 0!==e?e:(0,y.$)();(0,p.A)(r,this,(0,l.A)((0,l.A)({},t),{},{isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}))}function j(e){x.jG.batch(()=>{if((0,u.A)(i,this)&&this.hasListeners()){const h=(0,u.A)(r,this).variables,p=(0,u.A)(r,this).context,y={client:(0,u.A)(s,this),meta:this.options.meta,mutationKey:this.options.mutationKey};var a,t,n,d;if("success"===(null===e||void 0===e?void 0:e.type))null===(a=(t=(0,u.A)(i,this)).onSuccess)||void 0===a||a.call(t,e.data,h,p,y),null===(n=(d=(0,u.A)(i,this)).onSettled)||void 0===n||n.call(d,e.data,null,h,p,y);else if("error"===(null===e||void 0===e?void 0:e.type)){var l,c,o,m;null===(l=(c=(0,u.A)(i,this)).onError)||void 0===l||l.call(c,e.error,h,p,y),null===(o=(m=(0,u.A)(i,this)).onSettled)||void 0===o||o.call(m,void 0,e.error,h,p,y)}}this.listeners.forEach(e=>{e((0,u.A)(r,this))})})}var w=t(3248);function b(e,a){const t=(0,w.jE)(a),[s]=c.useState(()=>new v(t,e));c.useEffect(()=>{s.setOptions(e)},[s,e]);const r=c.useSyncExternalStore(c.useCallback(e=>s.subscribe(x.jG.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),n=c.useCallback((e,a)=>{s.mutate(e,a).catch(g.lQ)},[s]);if(r.error&&(0,g.GU)(s.options.throwOnError,[r.error]))throw r.error;return(0,l.A)((0,l.A)({},r),{},{mutate:n,mutateAsync:r.mutate})}},7737:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},7784:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var s=t(7051),r=t(5043),n=t(3248),i=t(6931),d=t(7097),l=t(1228),c=t(1360),o=t(7737),m=t(4319),u=t(4537),h=t(2489),p=t(5088),y=t(8186),x=t(1639);const f=(0,x.A)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);var g=t(9855);const v=(0,x.A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var A=t(4505),j=t(2539),w=t(1140),b=t(2264),N=t(9938),k=t(3390),C=t(5949),I=t(1555),P=t(5598),M=t(7484),R=t(4370),S=t(9766),T=t(579);function U(){var e,a;const t=(0,n.jE)(),{addToast:x}=(0,j.j_)(),[U,K]=(0,r.useState)(!1),[E,L]=(0,r.useState)(!1),[B,D]=(0,r.useState)(null),[F,O]=(0,r.useState)({name:"",accessType:"read_only",expiresInDays:365}),[q,_]=(0,r.useState)(null),{data:W,isLoading:G,error:Z}=(0,i.I)({queryKey:["admin","api-keys"],queryFn:async()=>{console.log("[AdminApiKeys] Fetching API keys...");const e=await A.ic.getApiKeys();return console.log("[AdminApiKeys] Result:",e),e},retry:1}),z=(0,d.n)({mutationFn:e=>{let{name:a,accessType:t,expiresInDays:s}=e;return A.ic.generateApiKey(a,t,{expiresInDays:s})},onSuccess:e=>{t.invalidateQueries(["admin","api-keys"]),D(e.data),K(!1),L(!0),O({name:"",accessType:"read_only",expiresInDays:365})},onError:e=>{var a,t;x({message:(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to generate API key",type:"error"})}}),V=(0,d.n)({mutationFn:e=>{let{id:a,hardDelete:t}=e;return A.ic.deleteApiKey(a,t)},onSuccess:()=>{t.invalidateQueries(["admin","api-keys"]),x({message:"API key deleted",type:"success"})},onError:e=>{var a,t;x({message:(null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to delete API key",type:"error"})}}),$=(null===W||void 0===W?void 0:W.data)||[],J=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.confirm("".concat(a?"Permanently delete":"Deactivate",' API key "').concat(e.name,'"?'))&&V.mutate({id:e.id,hardDelete:a})};return(0,T.jsxs)("div",{className:"space-y-6",children:[(0,T.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("h2",{className:"text-2xl font-bold",children:"API Keys"}),(0,T.jsx)("p",{className:"text-muted-foreground",children:"Manage API keys for public access"})]}),(0,T.jsxs)(k.$,{onClick:()=>K(!0),children:[(0,T.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Generate New Key"]})]}),(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,T.jsx)(w.Zp,{children:(0,T.jsxs)(w.Wu,{className:"p-4",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,T.jsx)(o.A,{className:"h-4 w-4"}),(0,T.jsx)("span",{className:"text-sm",children:"Total Keys"})]}),(0,T.jsx)("p",{className:"text-2xl font-bold",children:$.length})]})}),(0,T.jsx)(w.Zp,{children:(0,T.jsxs)(w.Wu,{className:"p-4",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,T.jsx)(m.A,{className:"h-4 w-4"}),(0,T.jsx)("span",{className:"text-sm",children:"Active"})]}),(0,T.jsx)("p",{className:"text-2xl font-bold text-green-500",children:$.filter(e=>e.isActive).length})]})}),(0,T.jsx)(w.Zp,{children:(0,T.jsxs)(w.Wu,{className:"p-4",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,T.jsx)(u.A,{className:"h-4 w-4"}),(0,T.jsx)("span",{className:"text-sm",children:"Total Usage"})]}),(0,T.jsx)("p",{className:"text-2xl font-bold",children:(0,S.ZV)($.reduce((e,a)=>e+(a.usageCount||0),0))})]})}),(0,T.jsx)(w.Zp,{children:(0,T.jsxs)(w.Wu,{className:"p-4",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,T.jsx)(h.A,{className:"h-4 w-4"}),(0,T.jsx)("span",{className:"text-sm",children:"Full Access"})]}),(0,T.jsx)("p",{className:"text-2xl font-bold",children:$.filter(e=>"full_access"===e.accessType).length})]})})]}),G?(0,T.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>(0,T.jsx)(I.E,{className:"h-24 w-full"},a))}):Z?(0,T.jsxs)("div",{className:"text-center py-12",children:[(0,T.jsx)("p",{className:"text-destructive mb-2",children:"Failed to load API keys."}),(0,T.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:(null===(e=Z.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||Z.message||"Unknown error"}),(0,T.jsx)(k.$,{variant:"outline",onClick:()=>window.location.reload(),children:"Try Again"})]}):0===$.length?(0,T.jsx)(w.Zp,{children:(0,T.jsxs)(w.Wu,{className:"flex flex-col items-center justify-center py-12",children:[(0,T.jsx)(o.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,T.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No API keys yet"}),(0,T.jsx)("p",{className:"text-muted-foreground mb-4",children:"Generate your first API key to enable public access"}),(0,T.jsxs)(k.$,{onClick:()=>K(!0),children:[(0,T.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Generate Key"]})]})}):(0,T.jsx)("div",{className:"space-y-4",children:$.map(e=>{var a;return(0,T.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:(0,T.jsx)(w.Zp,{children:(0,T.jsx)(w.Wu,{className:"p-4",children:(0,T.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,T.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)("h3",{className:"font-semibold",children:e.name}),(0,T.jsx)(C.E,{variant:e.isActive?"success":"secondary",children:e.isActive?"Active":"Inactive"}),(0,T.jsx)(C.E,{variant:"full_access"===e.accessType?"default":"outline",children:"full_access"===e.accessType?"Full Access":"Read Only"})]}),(0,T.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,T.jsx)("span",{className:"font-mono bg-muted px-2 py-1 rounded",children:e.keyPreview}),(0,T.jsxs)("span",{children:[(0,T.jsx)(u.A,{className:"inline h-3 w-3 mr-1"}),(0,S.ZV)(e.usageCount||0)," requests"]}),e.lastUsedAt&&(0,T.jsxs)("span",{children:[(0,T.jsx)(p.A,{className:"inline h-3 w-3 mr-1"}),"Last used ",(0,S.Yq)(e.lastUsedAt)]})]}),(0,T.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Permissions: ",(null===(a=e.permissions)||void 0===a?void 0:a.join(", "))||"None"]})]}),(0,T.jsxs)(M.rI,{children:[(0,T.jsx)(M.ty,{asChild:!0,children:(0,T.jsx)(k.$,{variant:"ghost",size:"icon",children:(0,T.jsx)(y.A,{className:"h-4 w-4"})})}),(0,T.jsxs)(M.SQ,{align:"end",children:[(0,T.jsxs)(M._2,{onClick:()=>J(e,!1),children:[(0,T.jsx)(f,{className:"mr-2 h-4 w-4"}),"Deactivate"]}),(0,T.jsx)(M.mB,{}),(0,T.jsxs)(M._2,{onClick:()=>J(e,!0),className:"text-destructive",children:[(0,T.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Delete Permanently"]})]})]})]})})})},e.id)})}),(0,T.jsx)(P.lG,{open:U,onOpenChange:K,children:(0,T.jsxs)(P.Cf,{children:[(0,T.jsxs)(P.c7,{children:[(0,T.jsx)(P.L3,{children:"Generate API Key"}),(0,T.jsx)(P.rr,{children:"Create a new API key for public access"})]}),(0,T.jsxs)("div",{className:"space-y-4 py-4",children:[(0,T.jsxs)("div",{className:"space-y-2",children:[(0,T.jsx)(N.J,{children:"Name"}),(0,T.jsx)(b.p,{placeholder:"e.g., Mobile App Production",value:F.name,onChange:e=>O(a=>(0,s.A)((0,s.A)({},a),{},{name:e.target.value}))})]}),(0,T.jsxs)("div",{className:"space-y-2",children:[(0,T.jsx)(N.J,{children:"Access Type"}),(0,T.jsxs)(R.l6,{value:F.accessType,onValueChange:e=>O(a=>(0,s.A)((0,s.A)({},a),{},{accessType:e})),children:[(0,T.jsx)(R.bq,{children:(0,T.jsx)(R.yv,{})}),(0,T.jsxs)(R.gC,{children:[(0,T.jsx)(R.eb,{value:"read_only",children:"Read Only (read:media, read:settings)"}),(0,T.jsx)(R.eb,{value:"full_access",children:"Full Access (all permissions)"})]})]})]}),(0,T.jsxs)("div",{className:"space-y-2",children:[(0,T.jsx)(N.J,{children:"Expires In"}),(0,T.jsxs)(R.l6,{value:String(F.expiresInDays),onValueChange:e=>O(a=>(0,s.A)((0,s.A)({},a),{},{expiresInDays:parseInt(e)})),children:[(0,T.jsx)(R.bq,{children:(0,T.jsx)(R.yv,{})}),(0,T.jsxs)(R.gC,{children:[(0,T.jsx)(R.eb,{value:"30",children:"30 days"}),(0,T.jsx)(R.eb,{value:"90",children:"90 days"}),(0,T.jsx)(R.eb,{value:"365",children:"1 year"}),(0,T.jsx)(R.eb,{value:"730",children:"2 years"})]})]})]})]}),(0,T.jsxs)(P.Es,{children:[(0,T.jsx)(k.$,{variant:"ghost",onClick:()=>K(!1),children:"Cancel"}),(0,T.jsx)(k.$,{onClick:()=>{F.name.trim()?z.mutate(F):x({message:"Please enter a name for the API key",type:"error"})},disabled:z.isPending,children:z.isPending?"Generating...":"Generate Key"})]})]})}),(0,T.jsx)(P.lG,{open:E,onOpenChange:L,children:(0,T.jsxs)(P.Cf,{children:[(0,T.jsxs)(P.c7,{children:[(0,T.jsxs)(P.L3,{className:"flex items-center gap-2",children:[(0,T.jsx)(m.A,{className:"h-5 w-5 text-green-500"}),"API Key Created"]}),(0,T.jsx)(P.rr,{children:"Copy this key now. You won't be able to see it again!"})]}),(0,T.jsx)("div",{className:"py-4",children:(0,T.jsx)("div",{className:"bg-muted p-4 rounded-lg font-mono text-sm break-all",children:null===B||void 0===B?void 0:B.key})}),(0,T.jsx)(P.Es,{children:(0,T.jsx)(k.$,{onClick:()=>(async e=>{try{await navigator.clipboard.writeText(e),_(e),setTimeout(()=>_(null),2e3),x({message:"Copied to clipboard",type:"success"})}catch(Z){x({message:"Failed to copy",type:"error"})}})(null===B||void 0===B?void 0:B.key),className:"w-full",children:q===(null===B||void 0===B?void 0:B.key)?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Copied!"]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(v,{className:"h-4 w-4 mr-2"}),"Copy to Clipboard"]})})})]})})]})}},8186:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},9855:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9938:(e,a,t)=>{t.d(a,{J:()=>u});var s=t(7051),r=t(3986),n=t(5043),i=t(5131),d=t(917),l=t(9766),c=t(579);const o=["className"],m=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=n.forwardRef((e,a)=>{let{className:t}=e,n=(0,r.A)(e,o);return(0,c.jsx)(i.b,(0,s.A)({ref:a,className:(0,l.cn)(m(),t)},n))});u.displayName=i.b.displayName}}]);
//# sourceMappingURL=784.510be391.chunk.js.map