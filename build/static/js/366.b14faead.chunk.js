"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[366],{31555:(e,s,a)=>{a.d(s,{E:()=>d});var l=a(27051),i=a(53986),r=(a(65043),a(99766)),t=a(70579);const n=["className"];function d(e){let{className:s}=e,a=(0,i.A)(e,n);return(0,t.jsx)("div",(0,l.A)({className:(0,r.cn)("animate-pulse rounded-md bg-muted",s)},a))}},82353:(e,s,a)=>{a.d(s,{$v:()=>E,EO:()=>b,Lt:()=>f,Rx:()=>C,Zr:()=>U,ck:()=>w,r7:()=>A,wd:()=>y});var l=a(27051),i=a(53986),r=a(65043),t=a(74796),n=a(99766),d=a(13390),c=a(70579);const o=["className"],m=["className"],u=["className"],x=["className"],h=["className"],p=["className"],j=["className"],N=["className"],f=t.bL,v=(t.l9,t.ZL),g=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,o);return(0,c.jsx)(t.hJ,(0,l.A)((0,l.A)({className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},r),{},{ref:s}))});g.displayName=t.hJ.displayName;const b=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,m);return(0,c.jsxs)(v,{children:[(0,c.jsx)(g,{}),(0,c.jsx)(t.UC,(0,l.A)({ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},r))]})});b.displayName=t.UC.displayName;const y=e=>{let{className:s}=e,a=(0,i.A)(e,u);return(0,c.jsx)("div",(0,l.A)({className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s)},a))};y.displayName="AlertDialogHeader";const w=e=>{let{className:s}=e,a=(0,i.A)(e,x);return(0,c.jsx)("div",(0,l.A)({className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},a))};w.displayName="AlertDialogFooter";const A=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,h);return(0,c.jsx)(t.hE,(0,l.A)({ref:s,className:(0,n.cn)("text-lg font-semibold",a)},r))});A.displayName=t.hE.displayName;const E=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,p);return(0,c.jsx)(t.VY,(0,l.A)({ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a)},r))});E.displayName=t.VY.displayName;const C=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,j);return(0,c.jsx)(t.rc,(0,l.A)({ref:s,className:(0,n.cn)((0,d.r)(),a)},r))});C.displayName=t.rc.displayName;const U=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,N);return(0,c.jsx)(t.ZD,(0,l.A)({ref:s,className:(0,n.cn)((0,d.r)({variant:"outline"}),"mt-2 sm:mt-0",a)},r))});U.displayName=t.ZD.displayName},84370:(e,s,a)=>{a.d(s,{bq:()=>b,eb:()=>E,gC:()=>A,l6:()=>v,yv:()=>g});var l=a(27051),i=a(53986),r=a(65043),t=a(22095),n=a(36210),d=a(92382),c=a(15711),o=a(99766),m=a(70579);const u=["className","children"],x=["className"],h=["className"],p=["className","children","position"],j=["className"],N=["className","children"],f=["className"],v=t.bL,g=(t.YJ,t.WT),b=r.forwardRef((e,s)=>{let{className:a,children:r}=e,n=(0,i.A)(e,u);return(0,m.jsxs)(t.l9,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},n),{},{children:[r,(0,m.jsx)(t.In,{asChild:!0,children:(0,m.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]}))});b.displayName=t.l9.displayName;const y=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,x);return(0,m.jsx)(t.PP,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(c.A,{className:"h-4 w-4"})}))});y.displayName=t.PP.displayName;const w=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,h);return(0,m.jsx)(t.wn,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(d.A,{className:"h-4 w-4"})}))});w.displayName=t.wn.displayName;const A=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper"}=e,d=(0,i.A)(e,p);return(0,m.jsx)(t.ZL,{children:(0,m.jsxs)(t.UC,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n},d),{},{children:[(0,m.jsx)(y,{}),(0,m.jsx)(t.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,m.jsx)(w,{})]}))})});A.displayName=t.UC.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,j);return(0,m.jsx)(t.JU,(0,l.A)({ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},r))}).displayName=t.JU.displayName;const E=r.forwardRef((e,s)=>{let{className:a,children:r}=e,d=(0,i.A)(e,N);return(0,m.jsxs)(t.q7,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},d),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(t.VF,{children:(0,m.jsx)(n.A,{className:"h-4 w-4"})})}),(0,m.jsx)(t.p4,{children:r})]}))});E.displayName=t.q7.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,f);return(0,m.jsx)(t.wv,(0,l.A)({ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a)},r))}).displayName=t.wv.displayName},91140:(e,s,a)=>{a.d(s,{BT:()=>N,Wu:()=>f,ZB:()=>j,Zp:()=>h,aR:()=>p});var l=a(27051),i=a(53986),r=a(65043),t=a(99766),n=a(70579);const d=["className"],c=["className"],o=["className","children"],m=["className"],u=["className"],x=["className"],h=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,d);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",a)},r))});h.displayName="Card";const p=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,c);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",a)},r))});p.displayName="CardHeader";const j=r.forwardRef((e,s)=>{let{className:a,children:r}=e,d=(0,i.A)(e,o);return(0,n.jsx)("h3",(0,l.A)((0,l.A)({ref:s,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",a)},d),{},{children:r}))});j.displayName="CardTitle";const N=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,m);return(0,n.jsx)("p",(0,l.A)({ref:s,className:(0,t.cn)("text-sm text-muted-foreground",a)},r))});N.displayName="CardDescription";const f=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,u);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("p-6 pt-0",a)},r))});f.displayName="CardContent";r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,x);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",a)},r))}).displayName="CardFooter"},91366:(e,s,a)=>{a.r(s),a.d(s,{default:()=>B});var l=a(65043),i=a(12265),r=a(63248),t=a(47097),n=a(81228),d=a(51861),c=a(53639),o=a(75088),m=a(86376),u=a(72629),x=a(35327),h=a(18992),p=a(50516),j=a(39292),N=a(78384),f=a(84025),v=a(42489),g=a(63944),b=a(9855),y=a(20254),w=a(746),A=a(14459),E=a(7118),C=a(56099),U=a(66305),R=a(18717),k=a(91140),S=a(92264),P=a(13390),T=a(63972),F=a(5949),I=a(31555),M=a(17484),D=a(65598),L=a(82353),_=a(84370),V=a(99766),Z=a(36604),q=a(22662),$=a(70579);function B(){var e,s,a;const B=(0,r.jE)(),{addToast:z}=(0,R.j_)(),[J,O]=(0,l.useState)(""),[Q,W]=(0,l.useState)(null),[Y,G]=(0,l.useState)(!1),[K,H]=(0,l.useState)(!1),[X,ee]=(0,l.useState)(!1),[se,ae]=(0,l.useState)(!1),[le,ie]=(0,l.useState)(null),[re,te]=(0,l.useState)(null),[ne,de]=(0,l.useState)(null),[ce,oe]=(0,l.useState)(null),{data:me,isLoading:ue,refetch:xe,isRefetching:he,error:pe}=(0,i.I)({queryKey:["admin","users"],queryFn:()=>U.ic.getUsers(),retry:1}),je=(null===me||void 0===me||null===(e=me.data)||void 0===e?void 0:e.users)||(null===me||void 0===me?void 0:me.data)||[],Ne=(0,t.n)({mutationFn:e=>{let{uid:s,role:a}=e;return U.ic.updateUserRole(s,a)},onSuccess:(e,s)=>{B.invalidateQueries(["admin","users"]),ee(!1),te(null),z({message:"User role updated to ".concat(s.role),type:"success"})},onError:e=>{var s,a;z({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update user role",type:"error"})}}),fe=(0,t.n)({mutationFn:e=>{let{uid:s,disabled:a}=e;return U.ic.updateUserStatus(s,a)},onSuccess:(e,s)=>{B.invalidateQueries(["admin","users"]),z({message:"User ".concat(s.disabled?"disabled":"enabled"," successfully"),type:"success"})},onError:e=>{var s,a;z({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update user status",type:"error"})}}),ve=(0,t.n)({mutationFn:e=>U.ic.deleteUser(e),onSuccess:()=>{B.invalidateQueries(["admin","users"]),H(!1),ie(null),z({message:"User deleted successfully",type:"success"})},onError:e=>{var s,a;z({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete user",type:"error"})}}),ge=(0,t.n)({mutationFn:e=>{let{uid:s,subscriptionTier:a}=e;return console.log("[Admin] Updating subscription:",{uid:s,subscriptionTier:a}),U.ic.updateUserSubscription(s,a)},onSuccess:(e,s)=>{console.log("[Admin] Subscription updated successfully:",e),B.invalidateQueries(["admin","users"]),ae(!1),de(null),oe(null),z({message:"Subscription updated to ".concat(q.rI[s.subscriptionTier]),type:"success"})},onError:e=>{var s,a;console.error("[Admin] Subscription update failed:",e),z({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||e.message||"Failed to update subscription. Make sure the backend API endpoint exists.",type:"error"})}}),be=je.filter(e=>{var s,a,l;const i=J.toLowerCase();return(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(i))||(null===(a=e.displayName)||void 0===a?void 0:a.toLowerCase().includes(i))||(null===(l=e.uid)||void 0===l?void 0:l.toLowerCase().includes(i))}),ye=je.filter(e=>{var s;return"admin"===e.role||(null===(s=e.customClaims)||void 0===s?void 0:s.admin)}).length,we=e=>{te(e),ee(!0)},Ae=e=>{de(e),oe(e.subscriptionTier||q.i9.FREE),ae(!0)},Ee=e=>{fe.mutate({uid:e.uid,disabled:!e.disabled})},Ce=e=>{var s;return"admin"===e.role||(null===(s=e.customClaims)||void 0===s?void 0:s.admin)},Ue=e=>{var s;return e.subscriptionTier||(null===(s=e.customClaims)||void 0===s?void 0:s.subscriptionTier)||q.i9.FREE},Re=e=>{switch(e){case q.i9.ENTERPRISE:return(0,$.jsx)(c.A,{className:"h-4 w-4"});case q.i9.PREMIUM_PLUS:return(0,$.jsx)(u.A,{className:"h-4 w-4"});case q.i9.PREMIUM:return(0,$.jsx)(g.A,{className:"h-4 w-4"});default:return(0,$.jsx)(C.A,{className:"h-4 w-4"})}},ke=e=>{const s=q.eJ[e]||q.eJ[q.i9.FREE];return(0,$.jsxs)(F.E,{className:(0,V.cn)("gap-1",s),children:[Re(e),q.rI[e]||"Free"]})},Se=(e,s)=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):(null===s||void 0===s?void 0:s.charAt(0).toUpperCase())||"?",Pe=e=>{if(!e)return"Never";const s=new Date-new Date(e),a=Math.floor(s/6e4),l=Math.floor(s/36e5),i=Math.floor(s/864e5);return a<60?"".concat(a,"m ago"):l<24?"".concat(l,"h ago"):i<7?"".concat(i,"d ago"):(0,V.Yq)(e)};var Te,Fe;return pe?(0,$.jsxs)("div",{className:"space-y-6",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("h2",{className:"text-2xl font-bold",children:"Users"}),(0,$.jsx)("p",{className:"text-muted-foreground",children:"View and manage Firebase authenticated users"})]}),(0,$.jsx)(k.Zp,{children:(0,$.jsxs)(k.Wu,{className:"py-12 text-center",children:[(0,$.jsx)(d.A,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),(0,$.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Failed to load users"}),(0,$.jsx)("p",{className:"text-muted-foreground mb-4",children:(null===(Te=pe.response)||void 0===Te||null===(Fe=Te.data)||void 0===Fe?void 0:Fe.message)||pe.message||"An error occurred"}),(0,$.jsxs)(P.$,{onClick:()=>xe(),children:[(0,$.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]}):(0,$.jsxs)("div",{className:"space-y-6",children:[(0,$.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("h2",{className:"text-2xl font-bold",children:"Users"}),(0,$.jsx)("p",{className:"text-muted-foreground",children:"View and manage Firebase authenticated users"})]}),(0,$.jsxs)(P.$,{variant:"outline",onClick:()=>xe(),disabled:he,children:[(0,$.jsx)(p.A,{className:(0,V.cn)("h-4 w-4 mr-2",he&&"animate-spin")}),"Refresh"]})]}),(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[{title:"Total Users",value:je.length,icon:E.A,color:"text-blue-500"},{title:"Admins",value:ye,icon:u.A,color:"text-yellow-500"},{title:"Verified",value:je.filter(e=>e.emailVerified).length,icon:y.A,color:"text-green-500"},{title:"Unverified",value:je.filter(e=>!e.emailVerified).length,icon:w.A,color:"text-orange-500"},{title:"Disabled",value:je.filter(e=>e.disabled).length,icon:v.A,color:"text-red-500"}].map((e,s)=>(0,$.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},children:(0,$.jsx)(k.Zp,{children:(0,$.jsx)(k.Wu,{className:"p-4",children:ue?(0,$.jsx)(I.E,{className:"h-16"}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,$.jsx)(e.icon,{className:"h-4 w-4 ".concat(e.color)}),(0,$.jsx)("span",{className:"text-sm text-muted-foreground",children:e.title})]}),(0,$.jsx)("p",{className:"text-2xl font-bold",children:e.value})]})})})},e.title))}),(0,$.jsx)(k.Zp,{children:(0,$.jsx)(k.Wu,{className:"p-4",children:(0,$.jsxs)("div",{className:"relative",children:[(0,$.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,$.jsx)(S.p,{placeholder:"Search by name, email, or UID...",value:J,onChange:e=>O(e.target.value),className:"pl-10"})]})})}),(0,$.jsxs)(k.Zp,{children:[(0,$.jsx)(k.aR,{children:(0,$.jsxs)(k.ZB,{children:["Users (",be.length,")"]})}),(0,$.jsx)(k.Wu,{className:"p-0",children:(0,$.jsx)(Z.F,{className:"h-[500px]",children:ue?(0,$.jsx)("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((e,s)=>(0,$.jsxs)("div",{className:"flex items-center gap-4",children:[(0,$.jsx)(I.E,{className:"h-10 w-10 rounded-full"}),(0,$.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,$.jsx)(I.E,{className:"h-4 w-1/3"}),(0,$.jsx)(I.E,{className:"h-3 w-1/4"})]})]},s))}):0===be.length?(0,$.jsxs)("div",{className:"text-center py-12",children:[(0,$.jsx)(E.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,$.jsx)("p",{className:"text-muted-foreground",children:J?"No users found matching your search":"No users registered yet"})]}):(0,$.jsx)("div",{className:"divide-y divide-border",children:be.map((e,s)=>{var a;return(0,$.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.02*s},className:"flex items-center gap-4 p-4 hover:bg-muted/50 transition-colors",children:[(0,$.jsxs)(T.eu,{className:"h-10 w-10",children:[(0,$.jsx)(T.BK,{src:e.photoURL,alt:e.displayName}),(0,$.jsx)(T.q5,{children:Se(e.displayName,e.email)})]}),(0,$.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)("p",{className:"font-medium truncate",children:e.displayName||"Unknown"}),Ce(e)&&(0,$.jsx)(u.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,$.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.email})]}),(0,$.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[ke(Ue(e)),Ce(e)?(0,$.jsx)(F.E,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",children:"Admin"}):(0,$.jsx)(F.E,{variant:"secondary",children:"User"}),e.emailVerified?(0,$.jsx)(F.E,{variant:"success",className:"text-xs",children:"Verified"}):(0,$.jsx)(F.E,{variant:"outline",className:"text-xs",children:"Unverified"}),e.disabled&&(0,$.jsx)(F.E,{variant:"destructive",className:"text-xs",children:"Disabled"})]}),(0,$.jsx)("div",{className:"hidden lg:flex flex-col items-end text-xs text-muted-foreground",children:(0,$.jsxs)("span",{className:"flex items-center gap-1",children:[(0,$.jsx)(o.A,{className:"h-3 w-3"}),Pe(null===(a=e.metadata)||void 0===a?void 0:a.lastSignInTime)]})}),(0,$.jsxs)(M.rI,{children:[(0,$.jsx)(M.ty,{asChild:!0,children:(0,$.jsx)(P.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,$.jsx)(h.A,{className:"h-4 w-4"})})}),(0,$.jsxs)(M.SQ,{align:"end",className:"w-56",children:[(0,$.jsxs)(M._2,{onClick:()=>(e=>{W(e),G(!0)})(e),children:[(0,$.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,$.jsx)(M.mB,{}),(0,$.jsx)(M.lp,{children:"Subscription"}),(0,$.jsxs)(M._2,{onClick:()=>Ae(e),children:[(0,$.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Change Subscription"]}),(0,$.jsxs)(M.lv,{children:[(0,$.jsxs)(M.nV,{children:[(0,$.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Quick Set Tier"]}),(0,$.jsxs)(M.M5,{children:[(0,$.jsxs)(M._2,{onClick:()=>ge.mutate({uid:e.uid,subscriptionTier:q.i9.FREE}),children:[(0,$.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Free"]}),(0,$.jsxs)(M._2,{onClick:()=>ge.mutate({uid:e.uid,subscriptionTier:q.i9.PREMIUM}),children:[(0,$.jsx)(g.A,{className:"h-4 w-4 mr-2 text-purple-500"}),"Premium"]}),(0,$.jsxs)(M._2,{onClick:()=>ge.mutate({uid:e.uid,subscriptionTier:q.i9.PREMIUM_PLUS}),children:[(0,$.jsx)(u.A,{className:"h-4 w-4 mr-2 text-amber-500"}),"Premium Plus"]}),(0,$.jsxs)(M._2,{onClick:()=>ge.mutate({uid:e.uid,subscriptionTier:q.i9.ENTERPRISE}),children:[(0,$.jsx)(c.A,{className:"h-4 w-4 mr-2 text-emerald-500"}),"Enterprise"]})]})]}),(0,$.jsx)(M.mB,{}),(0,$.jsx)(M.lp,{children:"Role & Status"}),(0,$.jsx)(M._2,{onClick:()=>we(e),children:Ce(e)?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Remove Admin"]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Make Admin"]})}),(0,$.jsx)(M._2,{onClick:()=>Ee(e),children:e.disabled?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Enable User"]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Disable User"]})}),(0,$.jsx)(M.mB,{}),(0,$.jsx)(M._2,{onClick:()=>navigator.clipboard.writeText(e.uid),children:"Copy UID"}),(0,$.jsx)(M._2,{onClick:()=>navigator.clipboard.writeText(e.email),children:"Copy Email"}),(0,$.jsx)(M.mB,{}),(0,$.jsxs)(M._2,{className:"text-destructive focus:text-destructive",onClick:()=>(e=>{ie(e),H(!0)})(e),children:[(0,$.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})]},e.uid)})})})})]}),(0,$.jsx)(D.lG,{open:Y,onOpenChange:G,children:(0,$.jsxs)(D.Cf,{className:"max-w-md",children:[(0,$.jsxs)(D.c7,{children:[(0,$.jsx)(D.L3,{children:"User Details"}),(0,$.jsx)(D.rr,{children:"Detailed information about this user"})]}),Q&&(0,$.jsxs)("div",{className:"space-y-6",children:[(0,$.jsxs)("div",{className:"flex items-center gap-4",children:[(0,$.jsxs)(T.eu,{className:"h-16 w-16",children:[(0,$.jsx)(T.BK,{src:Q.photoURL,alt:Q.displayName}),(0,$.jsx)(T.q5,{className:"text-xl",children:Se(Q.displayName,Q.email)})]}),(0,$.jsxs)("div",{children:[(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)("p",{className:"text-lg font-semibold",children:Q.displayName||"Unknown"}),Ce(Q)&&(0,$.jsx)(u.A,{className:"h-5 w-5 text-yellow-500"})]}),(0,$.jsxs)("div",{className:"flex gap-2 mt-1",children:[Ce(Q)?(0,$.jsx)(F.E,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",children:"Admin"}):(0,$.jsx)(F.E,{variant:"secondary",children:"User"}),Q.emailVerified?(0,$.jsx)(F.E,{variant:"success",className:"text-xs",children:"Verified"}):(0,$.jsx)(F.E,{variant:"outline",className:"text-xs",children:"Unverified"}),Q.disabled&&(0,$.jsx)(F.E,{variant:"destructive",className:"text-xs",children:"Disabled"})]})]})]}),(0,$.jsxs)("div",{className:"space-y-4",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Email"}),(0,$.jsxs)("p",{className:"flex items-center gap-2 mt-1",children:[(0,$.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"}),Q.email]})]}),(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"UID"}),(0,$.jsx)("p",{className:"mt-1 font-mono text-sm break-all",children:Q.uid})]}),(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Role"}),(0,$.jsx)("p",{className:"mt-1",children:Ce(Q)?"Administrator":"Regular User"})]}),(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Subscription"}),(0,$.jsx)("div",{className:"mt-1",children:ke(Ue(Q))})]}),(0,$.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Created"}),(0,$.jsx)("p",{className:"mt-1 text-sm",children:(0,V.Yq)(null===(s=Q.metadata)||void 0===s?void 0:s.creationTime)})]}),(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Last Sign In"}),(0,$.jsx)("p",{className:"mt-1 text-sm",children:(0,V.Yq)(null===(a=Q.metadata)||void 0===a?void 0:a.lastSignInTime)||"Never"})]})]}),Q.providerData&&(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Sign-in Providers"}),(0,$.jsx)("div",{className:"flex gap-2 mt-2",children:Q.providerData.map(e=>(0,$.jsx)(F.E,{variant:"secondary",children:e.providerId.replace(".com","")},e.providerId))})]})]}),(0,$.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:[(0,$.jsxs)(P.$,{variant:"outline",className:"flex-1",onClick:()=>Ae(Q),children:[(0,$.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Subscription"]}),(0,$.jsx)(P.$,{variant:"outline",className:"flex-1",onClick:()=>we(Q),children:Ce(Q)?"Remove Admin":"Make Admin"})]}),(0,$.jsx)("div",{className:"flex gap-2",children:(0,$.jsx)(P.$,{variant:"outline",className:"flex-1",onClick:()=>{Ee(Q),G(!1)},children:Q.disabled?"Enable":"Disable"})})]})]})}),(0,$.jsx)(L.Lt,{open:X,onOpenChange:ee,children:(0,$.jsxs)(L.EO,{children:[(0,$.jsxs)(L.wd,{children:[(0,$.jsx)(L.r7,{children:re&&Ce(re)?"Remove Admin Privileges":"Grant Admin Privileges"}),(0,$.jsx)(L.$v,{children:re&&Ce(re)?"Are you sure you want to remove admin privileges from ".concat((null===re||void 0===re?void 0:re.displayName)||(null===re||void 0===re?void 0:re.email),"? They will no longer be able to access the admin dashboard."):"Are you sure you want to make ".concat((null===re||void 0===re?void 0:re.displayName)||(null===re||void 0===re?void 0:re.email)," an admin? They will have full access to the admin dashboard and all management features.")})]}),(0,$.jsxs)(L.ck,{children:[(0,$.jsx)(L.Zr,{children:"Cancel"}),(0,$.jsx)(L.Rx,{onClick:()=>{return e=re&&Ce(re)?"user":"admin",void(re&&Ne.mutate({uid:re.uid,role:e}));var e},disabled:Ne.isPending,children:Ne.isPending?"Updating...":"Confirm"})]})]})}),(0,$.jsx)(L.Lt,{open:K,onOpenChange:H,children:(0,$.jsxs)(L.EO,{children:[(0,$.jsxs)(L.wd,{children:[(0,$.jsx)(L.r7,{children:"Delete User"}),(0,$.jsxs)(L.$v,{children:["Are you sure you want to delete"," ",(0,$.jsx)("span",{className:"font-semibold",children:(null===le||void 0===le?void 0:le.displayName)||(null===le||void 0===le?void 0:le.email)}),"? This action cannot be undone and will permanently remove the user from Firebase Authentication."]})]}),(0,$.jsxs)(L.ck,{children:[(0,$.jsx)(L.Zr,{children:"Cancel"}),(0,$.jsx)(L.Rx,{onClick:()=>{le&&ve.mutate(le.uid)},disabled:ve.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:ve.isPending?"Deleting...":"Delete User"})]})]})}),(0,$.jsx)(D.lG,{open:se,onOpenChange:ae,children:(0,$.jsxs)(D.Cf,{className:"max-w-md",children:[(0,$.jsxs)(D.c7,{children:[(0,$.jsxs)(D.L3,{className:"flex items-center gap-2",children:[(0,$.jsx)(m.A,{className:"h-5 w-5"}),"Change Subscription"]}),(0,$.jsxs)(D.rr,{children:["Update the subscription tier for"," ",(0,$.jsx)("span",{className:"font-semibold",children:(null===ne||void 0===ne?void 0:ne.displayName)||(null===ne||void 0===ne?void 0:ne.email)})]})]}),(0,$.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Current Subscription"}),ne&&ke(Ue(ne))]}),(0,$.jsxs)("div",{children:[(0,$.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"New Subscription Tier"}),(0,$.jsxs)(_.l6,{value:ce,onValueChange:oe,children:[(0,$.jsx)(_.bq,{children:(0,$.jsx)(_.yv,{placeholder:"Select a tier"})}),(0,$.jsxs)(_.gC,{children:[(0,$.jsx)(_.eb,{value:q.i9.FREE,children:(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)(C.A,{className:"h-4 w-4"}),"Free"]})}),(0,$.jsx)(_.eb,{value:q.i9.PREMIUM,children:(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)(g.A,{className:"h-4 w-4 text-purple-500"}),"Premium (\u20b949/month)"]})}),(0,$.jsx)(_.eb,{value:q.i9.PREMIUM_PLUS,children:(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)(u.A,{className:"h-4 w-4 text-amber-500"}),"Premium Plus (\u20b999/month)"]})}),(0,$.jsx)(_.eb,{value:q.i9.ENTERPRISE,children:(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)(c.A,{className:"h-4 w-4 text-emerald-500"}),"Enterprise"]})})]})]})]}),ce&&(0,$.jsxs)("div",{className:"p-3 rounded-lg bg-muted text-sm",children:[ce===q.i9.FREE&&(0,$.jsx)("p",{children:"10 minutes per session, English only, resets every 2 hours"}),ce===q.i9.PREMIUM&&(0,$.jsx)("p",{children:"5 hours daily, all languages, offline downloads"}),ce===q.i9.PREMIUM_PLUS&&(0,$.jsx)("p",{children:"Unlimited playback, all languages, priority support"}),ce===q.i9.ENTERPRISE&&(0,$.jsx)("p",{children:"Unlimited access, API access, custom billing"})]})]}),(0,$.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,$.jsx)(P.$,{variant:"outline",className:"flex-1",onClick:()=>ae(!1),children:"Cancel"}),(0,$.jsx)(P.$,{className:"flex-1",onClick:()=>{console.log("[Admin] confirmSubscriptionChange called:",{user:ne,tier:ce}),ne&&ce?ge.mutate({uid:ne.uid,subscriptionTier:ce}):console.warn("[Admin] Missing user or tier:",{hasUser:!!ne,hasTier:!!ce})},disabled:!ce||ge.isPending,children:ge.isPending?"Updating...":"Update Subscription"})]})]})})]})}},92264:(e,s,a)=>{a.d(s,{p:()=>c});var l=a(27051),i=a(53986),r=a(65043),t=a(99766),n=a(70579);const d=["className","type"],c=r.forwardRef((e,s)=>{let{className:a,type:r}=e,c=(0,i.A)(e,d);return(0,n.jsx)("input",(0,l.A)({type:r,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",a),ref:s},c))});c.displayName="Input"}}]);
//# sourceMappingURL=366.b14faead.chunk.js.map