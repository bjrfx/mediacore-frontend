/*! For license information please see 359.2bfbe1dc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[359],{516:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2353:(e,a,t)=>{t.d(a,{$v:()=>b,EO:()=>j,Lt:()=>A,Rx:()=>k,Zr:()=>_,ck:()=>v,r7:()=>D,wd:()=>w});var s=t(7051),l=t(3986),r=t(5043),o=t(4796),n=t(9766),i=t(3390),c=t(579);const d=["className"],m=["className"],x=["className"],u=["className"],h=["className"],f=["className"],p=["className"],y=["className"],A=o.bL,g=(o.l9,o.ZL),N=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,d);return(0,c.jsx)(o.hJ,(0,s.A)((0,s.A)({className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},r),{},{ref:a}))});N.displayName=o.hJ.displayName;const j=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,m);return(0,c.jsxs)(g,{children:[(0,c.jsx)(N,{}),(0,c.jsx)(o.UC,(0,s.A)({ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},r))]})});j.displayName=o.UC.displayName;const w=e=>{let{className:a}=e,t=(0,l.A)(e,x);return(0,c.jsx)("div",(0,s.A)({className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a)},t))};w.displayName="AlertDialogHeader";const v=e=>{let{className:a}=e,t=(0,l.A)(e,u);return(0,c.jsx)("div",(0,s.A)({className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},t))};v.displayName="AlertDialogFooter";const D=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,h);return(0,c.jsx)(o.hE,(0,s.A)({ref:a,className:(0,n.cn)("text-lg font-semibold",t)},r))});D.displayName=o.hE.displayName;const b=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,f);return(0,c.jsx)(o.VY,(0,s.A)({ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t)},r))});b.displayName=o.VY.displayName;const k=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,p);return(0,c.jsx)(o.rc,(0,s.A)({ref:a,className:(0,n.cn)((0,i.r)(),t)},r))});k.displayName=o.rc.displayName;const _=r.forwardRef((e,a)=>{let{className:t}=e,r=(0,l.A)(e,y);return(0,c.jsx)(o.ZD,(0,s.A)({ref:a,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t)},r))});_.displayName=o.ZD.displayName},4796:(e,a,t)=>{t.d(a,{rc:()=>W,ZD:()=>J,UC:()=>G,VY:()=>K,hJ:()=>$,ZL:()=>Y,bL:()=>Z,hE:()=>q,l9:()=>B});var s=t(7051),l=t(3986),r=t(5043),o=t(1862),n=t(2814),i=t(7427),c=t(858),d=t(579);var m=Symbol("radix.slottable");function x(e){const a=e=>{let{children:a}=e;return(0,d.jsx)(d.Fragment,{children:a})};return a.displayName="".concat(e,".Slottable"),a.__radixId=m,a}const u=["__scopeAlertDialog"],h=["__scopeAlertDialog"],f=["__scopeAlertDialog"],p=["__scopeAlertDialog"],y=["__scopeAlertDialog","children"],A=["__scopeAlertDialog"],g=["__scopeAlertDialog"],N=["__scopeAlertDialog"],j=["__scopeAlertDialog"];var w="AlertDialog",[v,D]=(0,o.A)(w,[i.Hs]),b=(0,i.Hs)(),k=e=>{const{__scopeAlertDialog:a}=e,t=(0,l.A)(e,u),r=b(a);return(0,d.jsx)(i.bL,(0,s.A)((0,s.A)((0,s.A)({},r),t),{},{modal:!0}))};k.displayName=w;var _=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,h),o=b(t);return(0,d.jsx)(i.l9,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});_.displayName="AlertDialogTrigger";var C=e=>{const{__scopeAlertDialog:a}=e,t=(0,l.A)(e,f),r=b(a);return(0,d.jsx)(i.ZL,(0,s.A)((0,s.A)({},r),t))};C.displayName="AlertDialogPortal";var L=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,p),o=b(t);return(0,d.jsx)(i.hJ,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});L.displayName="AlertDialogOverlay";var E="AlertDialogContent",[R,S]=v(E),O=x("AlertDialogContent"),M=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t,children:o}=e,m=(0,l.A)(e,y),x=b(t),u=r.useRef(null),h=(0,n.s)(a,u),f=r.useRef(null);return(0,d.jsx)(i.G$,{contentName:E,titleName:P,docsSlug:"alert-dialog",children:(0,d.jsx)(R,{scope:t,cancelRef:f,children:(0,d.jsxs)(i.UC,(0,s.A)((0,s.A)((0,s.A)({role:"alertdialog"},x),m),{},{ref:h,onOpenAutoFocus:(0,c.mK)(m.onOpenAutoFocus,e=>{var a;e.preventDefault(),null===(a=f.current)||void 0===a||a.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,d.jsx)(O,{children:o}),(0,d.jsx)(V,{contentRef:u})]}))})})});M.displayName=E;var P="AlertDialogTitle",T=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,A),o=b(t);return(0,d.jsx)(i.hE,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});T.displayName=P;var F="AlertDialogDescription",I=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,g),o=b(t);return(0,d.jsx)(i.VY,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});I.displayName=F;var z=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,N),o=b(t);return(0,d.jsx)(i.bm,(0,s.A)((0,s.A)((0,s.A)({},o),r),{},{ref:a}))});z.displayName="AlertDialogAction";var H="AlertDialogCancel",U=r.forwardRef((e,a)=>{const{__scopeAlertDialog:t}=e,r=(0,l.A)(e,j),{cancelRef:o}=S(H,t),c=b(t),m=(0,n.s)(a,o);return(0,d.jsx)(i.bm,(0,s.A)((0,s.A)((0,s.A)({},c),r),{},{ref:m}))});U.displayName=H;var V=e=>{let{contentRef:a}=e;const t="`".concat(E,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(E,"` by passing a `").concat(F,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(E,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return r.useEffect(()=>{var e;document.getElementById(null===(e=a.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},Z=k,B=_,Y=C,$=L,G=M,W=z,J=U,q=T,K=I},8359:(e,a,t)=>{t.r(a),t.d(a,{default:()=>R});var s=t(7051),l=t(5043),r=t(1228),o=t(6938),n=t(1639);const i=(0,n.A)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var c=t(6360),d=t(5613),m=t(7170),x=t(9829),u=t(4830),h=t(516),f=t(8992),p=t(9855),y=t(7104);const A=(0,n.A)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),g=(0,n.A)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var N=t(9766),j=t(6347),w=t(8717),v=t(3390),D=t(7484),b=t(2353),k=t(3216),_=t(579);const C=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]},L=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};function E(e){let{download:a,onPlay:t,onRemove:s,onRetry:l}=e;const{media:o,status:n,progress:y,size:A,downloadedAt:g,error:w}=a,b="video"===(null===o||void 0===o?void 0:o.type);return(0,_.jsxs)(r.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:(0,N.cn)("flex items-center gap-4 p-4 rounded-lg bg-card hover:bg-card/80 transition-colors group",n===j.DownloadStatus.FAILED&&"border border-red-500/20"),children:[(0,_.jsxs)("div",{className:(0,N.cn)("relative w-16 h-16 rounded-md overflow-hidden shrink-0 cursor-pointer",n===j.DownloadStatus.COMPLETED&&"group-hover:ring-2 ring-primary"),onClick:()=>n===j.DownloadStatus.COMPLETED&&t(o),children:[null!==o&&void 0!==o&&o.thumbnail?(0,_.jsx)("img",{src:o.thumbnail,alt:o.title,className:"w-full h-full object-cover"}):(0,_.jsx)("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:b?(0,_.jsx)(m.A,{className:"w-6 h-6 text-muted-foreground"}):(0,_.jsx)(x.A,{className:"w-6 h-6 text-muted-foreground"})}),n===j.DownloadStatus.COMPLETED&&(0,_.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,_.jsx)(u.A,{className:"w-6 h-6 text-white",fill:"white"})}),n===j.DownloadStatus.DOWNLOADING&&(0,_.jsx)("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:(0,_.jsxs)("div",{className:"relative w-10 h-10",children:[(0,_.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[(0,_.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",className:"text-white/20"}),(0,_.jsx)("circle",{cx:"18",cy:"18",r:"14",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"".concat(.88*y," 88"),strokeLinecap:"round",className:"text-primary transition-all duration-300"})]}),(0,_.jsxs)("span",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-white",children:[y,"%"]})]})})]}),(0,_.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,_.jsx)("h3",{className:"font-medium truncate",children:(null===o||void 0===o?void 0:o.title)||"Unknown"}),(0,_.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[(()=>{switch(n){case j.DownloadStatus.COMPLETED:return(0,_.jsx)(i,{className:"w-4 h-4 text-green-500"});case j.DownloadStatus.DOWNLOADING:return(0,_.jsx)(c.A,{className:"w-4 h-4 text-primary animate-spin"});case j.DownloadStatus.FAILED:return(0,_.jsx)(d.A,{className:"w-4 h-4 text-red-500"});default:return null}})(),(0,_.jsx)("span",{children:(()=>{switch(n){case j.DownloadStatus.COMPLETED:return"Downloaded ".concat(L(g));case j.DownloadStatus.DOWNLOADING:return"Downloading ".concat(y,"%");case j.DownloadStatus.FAILED:return w||"Download failed";default:return"Pending"}})()}),A>0&&n===j.DownloadStatus.COMPLETED&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{children:"\u2022"}),(0,_.jsx)("span",{children:C(A)})]})]}),(null===o||void 0===o?void 0:o.artist)&&(0,_.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-0.5",children:o.artist})]}),(0,_.jsxs)("div",{className:"flex items-center gap-2 shrink-0",children:[n===j.DownloadStatus.COMPLETED&&(0,_.jsx)(v.$,{variant:"ghost",size:"icon",onClick:()=>t(o),className:"text-primary hover:text-primary",children:(0,_.jsx)(u.A,{className:"w-5 h-5",fill:"currentColor"})}),n===j.DownloadStatus.FAILED&&(0,_.jsx)(v.$,{variant:"ghost",size:"icon",onClick:()=>l(o.id),className:"text-yellow-500 hover:text-yellow-400",children:(0,_.jsx)(h.A,{className:"w-5 h-5"})}),(0,_.jsxs)(D.rI,{children:[(0,_.jsx)(D.ty,{asChild:!0,children:(0,_.jsx)(v.$,{variant:"ghost",size:"icon",children:(0,_.jsx)(f.A,{className:"w-5 h-5"})})}),(0,_.jsxs)(D.SQ,{align:"end",children:[n===j.DownloadStatus.COMPLETED&&(0,_.jsxs)(D._2,{onClick:()=>t(o),children:[(0,_.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Play"]}),n===j.DownloadStatus.FAILED&&(0,_.jsxs)(D._2,{onClick:()=>l(o.id),children:[(0,_.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"Retry Download"]}),(0,_.jsxs)(D._2,{onClick:()=>s(o.id),className:"text-red-500 focus:text-red-500",children:[(0,_.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})]})]})}function R(){const{user:e}=(0,w.nc)(),{downloads:a,removeDownload:t,retryDownload:n,clearAllDownloads:i,getTotalDownloadSize:m}=(0,j.default)(),{playTrack:x,getDownloadedUrl:u,isDownloaded:h}=j.default.getState(),{playTrack:f}=(0,w.ut)(),[N,D]=(0,l.useState)(!1);if(!e)return(0,_.jsx)(k.C5,{to:"/login",replace:!0});const L=Object.values(a),R=L.filter(e=>e.status===j.DownloadStatus.COMPLETED),S=L.filter(e=>e.status===j.DownloadStatus.DOWNLOADING),O=L.filter(e=>e.status===j.DownloadStatus.FAILED),M=m(),P=async e=>{const a=await j.default.getState().getDownloadedUrl(e.id);f(a?(0,s.A)((0,s.A)({},e),{},{fileUrl:a,isOffline:!0}):e,null,!1)},T=e=>{t(e)},F=e=>{n(e)};return(0,_.jsxs)("div",{className:"min-h-full pb-32",children:[(0,_.jsx)("div",{className:"px-6 pt-6 pb-4",children:(0,_.jsxs)("div",{className:"flex items-center justify-between",children:[(0,_.jsxs)("div",{children:[(0,_.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,_.jsx)(y.A,{className:"w-8 h-8 text-primary"}),"Downloads"]}),(0,_.jsxs)("p",{className:"text-muted-foreground mt-1",children:[R.length," items \u2022 ",C(M)]})]}),L.length>0&&(0,_.jsxs)(v.$,{variant:"outline",onClick:()=>D(!0),className:"text-red-500 hover:text-red-400 hover:border-red-500/50",children:[(0,_.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),(S.length>0||O.length>0)&&(0,_.jsx)("div",{className:"px-6 pb-4",children:(0,_.jsxs)("div",{className:"flex gap-4",children:[S.length>0&&(0,_.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10 text-primary text-sm",children:[(0,_.jsx)(c.A,{className:"w-4 h-4 animate-spin"}),S.length," downloading"]}),O.length>0&&(0,_.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-red-500/10 text-red-500 text-sm",children:[(0,_.jsx)(d.A,{className:"w-4 h-4"}),O.length," failed"]})]})}),(0,_.jsx)("div",{className:"px-6",children:0===L.length?(0,_.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,_.jsx)("div",{className:"w-20 h-20 rounded-full bg-muted flex items-center justify-center mb-4",children:(0,_.jsx)(A,{className:"w-10 h-10 text-muted-foreground"})}),(0,_.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No Downloads Yet"}),(0,_.jsx)("p",{className:"text-muted-foreground max-w-md",children:"Download videos and audio to watch or listen offline. Look for the download button on any media item."})]}):(0,_.jsx)("div",{className:"space-y-2",children:(0,_.jsxs)(o.N,{mode:"popLayout",children:[S.map(e=>(0,_.jsx)(E,{download:e,onPlay:P,onRemove:T,onRetry:F},e.media.id)),O.map(e=>(0,_.jsx)(E,{download:e,onPlay:P,onRemove:T,onRetry:F},e.media.id)),R.map(e=>(0,_.jsx)(E,{download:e,onPlay:P,onRemove:T,onRetry:F},e.media.id))]})})}),R.length>0&&(0,_.jsx)("div",{className:"px-6 mt-8",children:(0,_.jsxs)("div",{className:"p-4 rounded-lg bg-muted/50 flex items-center gap-4",children:[(0,_.jsx)(g,{className:"w-8 h-8 text-muted-foreground"}),(0,_.jsxs)("div",{children:[(0,_.jsx)("p",{className:"font-medium",children:"Storage Used"}),(0,_.jsxs)("p",{className:"text-sm text-muted-foreground",children:[C(M)," used for offline content"]})]})]})}),(0,_.jsx)(b.Lt,{open:N,onOpenChange:D,children:(0,_.jsxs)(b.EO,{children:[(0,_.jsxs)(b.wd,{children:[(0,_.jsx)(b.r7,{children:"Clear All Downloads?"}),(0,_.jsxs)(b.$v,{children:["This will remove all downloaded content (",C(M),"). You can always download them again later."]})]}),(0,_.jsxs)(b.ck,{children:[(0,_.jsx)(b.Zr,{children:"Cancel"}),(0,_.jsx)(b.Rx,{onClick:()=>{i(),D(!1)},className:"bg-red-500 hover:bg-red-600",children:"Clear All"})]})]})})]})}},8992:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},9855:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=359.2bfbe1dc.chunk.js.map