"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[366],{31555:(e,s,a)=>{a.d(s,{E:()=>d});var l=a(27051),i=a(53986),r=(a(65043),a(99766)),t=a(70579);const n=["className"];function d(e){let{className:s}=e,a=(0,i.A)(e,n);return(0,t.jsx)("div",(0,l.A)({className:(0,r.cn)("animate-pulse rounded-md bg-muted",s)},a))}},82353:(e,s,a)=>{a.d(s,{$v:()=>E,EO:()=>b,Lt:()=>f,Rx:()=>C,Zr:()=>U,ck:()=>w,r7:()=>A,wd:()=>y});var l=a(27051),i=a(53986),r=a(65043),t=a(74796),n=a(99766),d=a(13390),c=a(70579);const o=["className"],m=["className"],u=["className"],x=["className"],h=["className"],p=["className"],j=["className"],N=["className"],f=t.bL,v=(t.l9,t.ZL),g=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,o);return(0,c.jsx)(t.hJ,(0,l.A)((0,l.A)({className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a)},r),{},{ref:s}))});g.displayName=t.hJ.displayName;const b=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,m);return(0,c.jsxs)(v,{children:[(0,c.jsx)(g,{}),(0,c.jsx)(t.UC,(0,l.A)({ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a)},r))]})});b.displayName=t.UC.displayName;const y=e=>{let{className:s}=e,a=(0,i.A)(e,u);return(0,c.jsx)("div",(0,l.A)({className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s)},a))};y.displayName="AlertDialogHeader";const w=e=>{let{className:s}=e,a=(0,i.A)(e,x);return(0,c.jsx)("div",(0,l.A)({className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},a))};w.displayName="AlertDialogFooter";const A=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,h);return(0,c.jsx)(t.hE,(0,l.A)({ref:s,className:(0,n.cn)("text-lg font-semibold",a)},r))});A.displayName=t.hE.displayName;const E=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,p);return(0,c.jsx)(t.VY,(0,l.A)({ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a)},r))});E.displayName=t.VY.displayName;const C=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,j);return(0,c.jsx)(t.rc,(0,l.A)({ref:s,className:(0,n.cn)((0,d.r)(),a)},r))});C.displayName=t.rc.displayName;const U=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,N);return(0,c.jsx)(t.ZD,(0,l.A)({ref:s,className:(0,n.cn)((0,d.r)({variant:"outline"}),"mt-2 sm:mt-0",a)},r))});U.displayName=t.ZD.displayName},84370:(e,s,a)=>{a.d(s,{bq:()=>b,eb:()=>E,gC:()=>A,l6:()=>v,yv:()=>g});var l=a(27051),i=a(53986),r=a(65043),t=a(22095),n=a(36210),d=a(92382),c=a(15711),o=a(99766),m=a(70579);const u=["className","children"],x=["className"],h=["className"],p=["className","children","position"],j=["className"],N=["className","children"],f=["className"],v=t.bL,g=(t.YJ,t.WT),b=r.forwardRef((e,s)=>{let{className:a,children:r}=e,n=(0,i.A)(e,u);return(0,m.jsxs)(t.l9,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a)},n),{},{children:[r,(0,m.jsx)(t.In,{asChild:!0,children:(0,m.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]}))});b.displayName=t.l9.displayName;const y=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,x);return(0,m.jsx)(t.PP,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(c.A,{className:"h-4 w-4"})}))});y.displayName=t.PP.displayName;const w=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,h);return(0,m.jsx)(t.wn,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a)},r),{},{children:(0,m.jsx)(d.A,{className:"h-4 w-4"})}))});w.displayName=t.wn.displayName;const A=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper"}=e,d=(0,i.A)(e,p);return(0,m.jsx)(t.ZL,{children:(0,m.jsxs)(t.UC,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n},d),{},{children:[(0,m.jsx)(y,{}),(0,m.jsx)(t.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,m.jsx)(w,{})]}))})});A.displayName=t.UC.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,j);return(0,m.jsx)(t.JU,(0,l.A)({ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a)},r))}).displayName=t.JU.displayName;const E=r.forwardRef((e,s)=>{let{className:a,children:r}=e,d=(0,i.A)(e,N);return(0,m.jsxs)(t.q7,(0,l.A)((0,l.A)({ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a)},d),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(t.VF,{children:(0,m.jsx)(n.A,{className:"h-4 w-4"})})}),(0,m.jsx)(t.p4,{children:r})]}))});E.displayName=t.q7.displayName;r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,f);return(0,m.jsx)(t.wv,(0,l.A)({ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a)},r))}).displayName=t.wv.displayName},91140:(e,s,a)=>{a.d(s,{BT:()=>N,Wu:()=>f,ZB:()=>j,Zp:()=>h,aR:()=>p});var l=a(27051),i=a(53986),r=a(65043),t=a(99766),n=a(70579);const d=["className"],c=["className"],o=["className","children"],m=["className"],u=["className"],x=["className"],h=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,d);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",a)},r))});h.displayName="Card";const p=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,c);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",a)},r))});p.displayName="CardHeader";const j=r.forwardRef((e,s)=>{let{className:a,children:r}=e,d=(0,i.A)(e,o);return(0,n.jsx)("h3",(0,l.A)((0,l.A)({ref:s,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",a)},d),{},{children:r}))});j.displayName="CardTitle";const N=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,m);return(0,n.jsx)("p",(0,l.A)({ref:s,className:(0,t.cn)("text-sm text-muted-foreground",a)},r))});N.displayName="CardDescription";const f=r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,u);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("p-6 pt-0",a)},r))});f.displayName="CardContent";r.forwardRef((e,s)=>{let{className:a}=e,r=(0,i.A)(e,x);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,t.cn)("flex items-center p-6 pt-0",a)},r))}).displayName="CardFooter"},91366:(e,s,a)=>{a.r(s),a.d(s,{default:()=>O});var l=a(65043),i=a(12265),r=a(63248),t=a(47097),n=a(81228),d=a(51861),c=a(53639),o=a(75088),m=a(86376),u=a(72629),x=a(35327),h=a(18992),p=a(50516),j=a(39292),N=a(78384),f=a(84025),v=a(42489),g=a(63944),b=a(9855),y=a(20254),w=a(746),A=a(14459),E=a(7118),C=a(81885),U=a(56099),R=a(66305),k=a(18717),S=a(91140),P=a(92264),F=a(13390),T=a(63972),I=a(5949),M=a(31555),D=a(17484),L=a(65598),_=a(82353),Z=a(84370),V=a(99766),q=a(36604),$=a(22662),B=a(70579);function O(){var e,s,a,O,z;const J=(0,r.jE)(),{addToast:W}=(0,k.j_)(),[Q,Y]=(0,l.useState)(""),[K,G]=(0,l.useState)(null),[H,X]=(0,l.useState)(!1),[ee,se]=(0,l.useState)(!1),[ae,le]=(0,l.useState)(!1),[ie,re]=(0,l.useState)(!1),[te,ne]=(0,l.useState)(null),[de,ce]=(0,l.useState)(null),[oe,me]=(0,l.useState)(null),[ue,xe]=(0,l.useState)(null),{data:he,isLoading:pe,refetch:je,isRefetching:Ne,error:fe}=(0,i.I)({queryKey:["admin","users"],queryFn:()=>R.ic.getUsers(),retry:1}),{data:ve,isLoading:ge,refetch:be}=(0,i.I)({queryKey:["admin","users","online"],queryFn:async()=>{try{return await R.ic.getOnlineUsers()}catch(fe){return console.debug("[Online Users] Endpoint not available:",fe.message),{data:{count:0,users:[]}}}},refetchInterval:3e4,retry:!1}),ye=(null===he||void 0===he||null===(e=he.data)||void 0===e?void 0:e.users)||(null===he||void 0===he?void 0:he.data)||[],we=(null===ve||void 0===ve||null===(s=ve.data)||void 0===s?void 0:s.users)||(null===ve||void 0===ve?void 0:ve.users)||[],Ae=(null===ve||void 0===ve||null===(a=ve.data)||void 0===a?void 0:a.count)||(null===ve||void 0===ve?void 0:ve.count)||we.length,Ee=new Set(we.map(e=>e.uid)),Ce=(0,t.n)({mutationFn:e=>{let{uid:s,role:a}=e;return R.ic.updateUserRole(s,a)},onSuccess:(e,s)=>{J.invalidateQueries(["admin","users"]),le(!1),ce(null),W({message:"User role updated to ".concat(s.role),type:"success"})},onError:e=>{var s,a;W({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update user role",type:"error"})}}),Ue=(0,t.n)({mutationFn:e=>{let{uid:s,disabled:a}=e;return R.ic.updateUserStatus(s,a)},onSuccess:(e,s)=>{J.invalidateQueries(["admin","users"]),W({message:"User ".concat(s.disabled?"disabled":"enabled"," successfully"),type:"success"})},onError:e=>{var s,a;W({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to update user status",type:"error"})}}),Re=(0,t.n)({mutationFn:e=>R.ic.deleteUser(e),onSuccess:()=>{J.invalidateQueries(["admin","users"]),se(!1),ne(null),W({message:"User deleted successfully",type:"success"})},onError:e=>{var s,a;W({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||"Failed to delete user",type:"error"})}}),ke=(0,t.n)({mutationFn:e=>{let{uid:s,subscriptionTier:a}=e;return console.log("[Admin] Updating subscription:",{uid:s,subscriptionTier:a}),R.ic.updateUserSubscription(s,a)},onSuccess:(e,s)=>{console.log("[Admin] Subscription updated successfully:",e),J.invalidateQueries(["admin","users"]),re(!1),me(null),xe(null),W({message:"Subscription updated to ".concat($.rI[s.subscriptionTier]),type:"success"})},onError:e=>{var s,a;console.error("[Admin] Subscription update failed:",e),W({message:(null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||e.message||"Failed to update subscription. Make sure the backend API endpoint exists.",type:"error"})}}),Se=ye.filter(e=>{var s,a,l;const i=Q.toLowerCase();return(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(i))||(null===(a=e.displayName)||void 0===a?void 0:a.toLowerCase().includes(i))||(null===(l=e.uid)||void 0===l?void 0:l.toLowerCase().includes(i))}),Pe=ye.filter(e=>{var s;return"admin"===e.role||(null===(s=e.customClaims)||void 0===s?void 0:s.admin)}).length,Fe=e=>{ce(e),le(!0)},Te=e=>{me(e),xe(e.subscriptionTier||$.i9.FREE),re(!0)},Ie=e=>{Ue.mutate({uid:e.uid,disabled:!e.disabled})},Me=e=>{var s;return"admin"===e.role||(null===(s=e.customClaims)||void 0===s?void 0:s.admin)},De=e=>{var s;return e.subscriptionTier||(null===(s=e.customClaims)||void 0===s?void 0:s.subscriptionTier)||$.i9.FREE},Le=e=>{switch(e){case $.i9.ENTERPRISE:return(0,B.jsx)(c.A,{className:"h-4 w-4"});case $.i9.PREMIUM_PLUS:return(0,B.jsx)(u.A,{className:"h-4 w-4"});case $.i9.PREMIUM:return(0,B.jsx)(g.A,{className:"h-4 w-4"});default:return(0,B.jsx)(U.A,{className:"h-4 w-4"})}},_e=e=>{const s=$.eJ[e]||$.eJ[$.i9.FREE];return(0,B.jsxs)(I.E,{className:(0,V.cn)("gap-1",s),children:[Le(e),$.rI[e]||"Free"]})},Ze=(e,s)=>e?e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):(null===s||void 0===s?void 0:s.charAt(0).toUpperCase())||"?",Ve=e=>{if(!e)return"Never";const s=new Date-new Date(e),a=Math.floor(s/6e4),l=Math.floor(s/36e5),i=Math.floor(s/864e5);return a<60?"".concat(a,"m ago"):l<24?"".concat(l,"h ago"):i<7?"".concat(i,"d ago"):(0,V.Yq)(e)};var qe,$e;return fe?(0,B.jsxs)("div",{className:"space-y-6",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("h2",{className:"text-2xl font-bold",children:"Users"}),(0,B.jsx)("p",{className:"text-muted-foreground",children:"View and manage Firebase authenticated users"})]}),(0,B.jsx)(S.Zp,{children:(0,B.jsxs)(S.Wu,{className:"py-12 text-center",children:[(0,B.jsx)(d.A,{className:"h-12 w-12 mx-auto text-destructive mb-4"}),(0,B.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Failed to load users"}),(0,B.jsx)("p",{className:"text-muted-foreground mb-4",children:(null===(qe=fe.response)||void 0===qe||null===($e=qe.data)||void 0===$e?void 0:$e.message)||fe.message||"An error occurred"}),(0,B.jsxs)(F.$,{onClick:()=>je(),children:[(0,B.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]}):(0,B.jsxs)("div",{className:"space-y-6",children:[(0,B.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("h2",{className:"text-2xl font-bold",children:"Users"}),(0,B.jsx)("p",{className:"text-muted-foreground",children:"View and manage Firebase authenticated users"})]}),(0,B.jsxs)(F.$,{variant:"outline",onClick:()=>je(),disabled:Ne,children:[(0,B.jsx)(p.A,{className:(0,V.cn)("h-4 w-4 mr-2",Ne&&"animate-spin")}),"Refresh"]})]}),(0,B.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[{title:"Online Now",value:Ae,icon:C.A,color:"text-green-500",pulse:!0},{title:"Total Users",value:ye.length,icon:E.A,color:"text-blue-500"},{title:"Admins",value:Pe,icon:u.A,color:"text-yellow-500"},{title:"Verified",value:ye.filter(e=>e.emailVerified).length,icon:y.A,color:"text-green-500"},{title:"Unverified",value:ye.filter(e=>!e.emailVerified).length,icon:w.A,color:"text-orange-500"},{title:"Disabled",value:ye.filter(e=>e.disabled).length,icon:v.A,color:"text-red-500"}].map((e,s)=>(0,B.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*s},children:(0,B.jsx)(S.Zp,{children:(0,B.jsx)(S.Wu,{className:"p-4",children:pe?(0,B.jsx)(M.E,{className:"h-16"}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,B.jsx)(e.icon,{className:(0,V.cn)("h-4 w-4",e.color,e.pulse&&"animate-pulse")}),(0,B.jsx)("span",{className:"text-sm text-muted-foreground",children:e.title})]}),(0,B.jsx)("p",{className:"text-2xl font-bold",children:e.value})]})})})},e.title))}),we.length>0&&(0,B.jsxs)(S.Zp,{className:"border-green-500/30 bg-green-500/5",children:[(0,B.jsx)(S.aR,{className:"pb-3",children:(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(S.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsx)(C.A,{className:"h-5 w-5 text-green-500"}),(0,B.jsx)("span",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 bg-green-500 rounded-full animate-ping"}),(0,B.jsx)("span",{className:"absolute -top-1 -right-1 h-2.5 w-2.5 bg-green-500 rounded-full"})]}),(0,B.jsx)("span",{children:"Online Users"}),(0,B.jsx)(I.E,{variant:"secondary",className:"ml-2 bg-green-500/20 text-green-500",children:Ae})]}),(0,B.jsx)(F.$,{variant:"ghost",size:"sm",onClick:()=>be(),disabled:ge,children:(0,B.jsx)(p.A,{className:(0,V.cn)("h-4 w-4",ge&&"animate-spin")})})]})}),(0,B.jsx)(S.Wu,{children:(0,B.jsx)("div",{className:"flex flex-wrap gap-3",children:we.map(e=>{var s;return(0,B.jsxs)(n.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-2 bg-background rounded-full pl-1 pr-3 py-1 border shadow-sm",children:[(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsxs)(T.eu,{className:"h-7 w-7",children:[(0,B.jsx)(T.BK,{src:e.photoURL,alt:e.displayName}),(0,B.jsx)(T.q5,{className:"text-xs",children:Ze(e.displayName,e.email)})]}),(0,B.jsx)("span",{className:"absolute -bottom-0.5 -right-0.5 h-2.5 w-2.5 bg-green-500 rounded-full border-2 border-background"})]}),(0,B.jsxs)("div",{className:"flex flex-col",children:[(0,B.jsx)("span",{className:"text-sm font-medium leading-tight",children:e.displayName||(null===(s=e.email)||void 0===s?void 0:s.split("@")[0])||"User"}),e.lastSeen&&(0,B.jsxs)("span",{className:"text-[10px] text-muted-foreground leading-tight",children:["Active ",Ve(e.lastSeen)]})]})]},e.uid)})})})]}),(0,B.jsx)(S.Zp,{children:(0,B.jsx)(S.Wu,{className:"p-4",children:(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,B.jsx)(P.p,{placeholder:"Search by name, email, or UID...",value:Q,onChange:e=>Y(e.target.value),className:"pl-10"})]})})}),(0,B.jsxs)(S.Zp,{children:[(0,B.jsx)(S.aR,{children:(0,B.jsxs)(S.ZB,{children:["Users (",Se.length,")"]})}),(0,B.jsx)(S.Wu,{className:"p-0",children:(0,B.jsx)(q.F,{className:"h-[500px]",children:pe?(0,B.jsx)("div",{className:"space-y-4 p-4",children:Array.from({length:5}).map((e,s)=>(0,B.jsxs)("div",{className:"flex items-center gap-4",children:[(0,B.jsx)(M.E,{className:"h-10 w-10 rounded-full"}),(0,B.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,B.jsx)(M.E,{className:"h-4 w-1/3"}),(0,B.jsx)(M.E,{className:"h-3 w-1/4"})]})]},s))}):0===Se.length?(0,B.jsxs)("div",{className:"text-center py-12",children:[(0,B.jsx)(E.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,B.jsx)("p",{className:"text-muted-foreground",children:Q?"No users found matching your search":"No users registered yet"})]}):(0,B.jsx)("div",{className:"divide-y divide-border",children:Se.map((e,s)=>{var a;return(0,B.jsxs)(n.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.02*s},className:"flex items-center gap-4 p-4 hover:bg-muted/50 transition-colors",children:[(0,B.jsxs)("div",{className:"relative",children:[(0,B.jsxs)(T.eu,{className:"h-10 w-10",children:[(0,B.jsx)(T.BK,{src:e.photoURL,alt:e.displayName}),(0,B.jsx)(T.q5,{children:Ze(e.displayName,e.email)})]}),Ee.has(e.uid)&&(0,B.jsx)("span",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 bg-green-500 rounded-full border-2 border-background"})]}),(0,B.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)("p",{className:"font-medium truncate",children:e.displayName||"Unknown"}),Me(e)&&(0,B.jsx)(u.A,{className:"h-4 w-4 text-yellow-500"})]}),(0,B.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.email})]}),(0,B.jsxs)("div",{className:"hidden md:flex items-center gap-2",children:[_e(De(e)),Me(e)?(0,B.jsx)(I.E,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",children:"Admin"}):(0,B.jsx)(I.E,{variant:"secondary",children:"User"}),e.emailVerified?(0,B.jsx)(I.E,{variant:"success",className:"text-xs",children:"Verified"}):(0,B.jsx)(I.E,{variant:"outline",className:"text-xs",children:"Unverified"}),e.disabled&&(0,B.jsx)(I.E,{variant:"destructive",className:"text-xs",children:"Disabled"})]}),(0,B.jsx)("div",{className:"hidden lg:flex flex-col items-end text-xs text-muted-foreground",children:(0,B.jsxs)("span",{className:"flex items-center gap-1",children:[(0,B.jsx)(o.A,{className:"h-3 w-3"}),Ve(null===(a=e.metadata)||void 0===a?void 0:a.lastSignInTime)]})}),(0,B.jsxs)(D.rI,{children:[(0,B.jsx)(D.ty,{asChild:!0,children:(0,B.jsx)(F.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,B.jsx)(h.A,{className:"h-4 w-4"})})}),(0,B.jsxs)(D.SQ,{align:"end",className:"w-56",children:[(0,B.jsxs)(D._2,{onClick:()=>(e=>{G(e),X(!0)})(e),children:[(0,B.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,B.jsx)(D.mB,{}),(0,B.jsx)(D.lp,{children:"Subscription"}),(0,B.jsxs)(D._2,{onClick:()=>Te(e),children:[(0,B.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Change Subscription"]}),(0,B.jsxs)(D.lv,{children:[(0,B.jsxs)(D.nV,{children:[(0,B.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Quick Set Tier"]}),(0,B.jsxs)(D.M5,{children:[(0,B.jsxs)(D._2,{onClick:()=>ke.mutate({uid:e.uid,subscriptionTier:$.i9.FREE}),children:[(0,B.jsx)(U.A,{className:"h-4 w-4 mr-2"}),"Free"]}),(0,B.jsxs)(D._2,{onClick:()=>ke.mutate({uid:e.uid,subscriptionTier:$.i9.PREMIUM}),children:[(0,B.jsx)(g.A,{className:"h-4 w-4 mr-2 text-purple-500"}),"Premium"]}),(0,B.jsxs)(D._2,{onClick:()=>ke.mutate({uid:e.uid,subscriptionTier:$.i9.PREMIUM_PLUS}),children:[(0,B.jsx)(u.A,{className:"h-4 w-4 mr-2 text-amber-500"}),"Premium Plus"]}),(0,B.jsxs)(D._2,{onClick:()=>ke.mutate({uid:e.uid,subscriptionTier:$.i9.ENTERPRISE}),children:[(0,B.jsx)(c.A,{className:"h-4 w-4 mr-2 text-emerald-500"}),"Enterprise"]})]})]}),(0,B.jsx)(D.mB,{}),(0,B.jsx)(D.lp,{children:"Role & Status"}),(0,B.jsx)(D._2,{onClick:()=>Fe(e),children:Me(e)?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Remove Admin"]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Make Admin"]})}),(0,B.jsx)(D._2,{onClick:()=>Ie(e),children:e.disabled?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Enable User"]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Disable User"]})}),(0,B.jsx)(D.mB,{}),(0,B.jsx)(D._2,{onClick:()=>navigator.clipboard.writeText(e.uid),children:"Copy UID"}),(0,B.jsx)(D._2,{onClick:()=>navigator.clipboard.writeText(e.email),children:"Copy Email"}),(0,B.jsx)(D.mB,{}),(0,B.jsxs)(D._2,{className:"text-destructive focus:text-destructive",onClick:()=>(e=>{ne(e),se(!0)})(e),children:[(0,B.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})]},e.uid)})})})})]}),(0,B.jsx)(L.lG,{open:H,onOpenChange:X,children:(0,B.jsxs)(L.Cf,{className:"max-w-md",children:[(0,B.jsxs)(L.c7,{children:[(0,B.jsx)(L.L3,{children:"User Details"}),(0,B.jsx)(L.rr,{children:"Detailed information about this user"})]}),K&&(0,B.jsxs)("div",{className:"space-y-6",children:[(0,B.jsxs)("div",{className:"flex items-center gap-4",children:[(0,B.jsxs)(T.eu,{className:"h-16 w-16",children:[(0,B.jsx)(T.BK,{src:K.photoURL,alt:K.displayName}),(0,B.jsx)(T.q5,{className:"text-xl",children:Ze(K.displayName,K.email)})]}),(0,B.jsxs)("div",{children:[(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)("p",{className:"text-lg font-semibold",children:K.displayName||"Unknown"}),Me(K)&&(0,B.jsx)(u.A,{className:"h-5 w-5 text-yellow-500"})]}),(0,B.jsxs)("div",{className:"flex gap-2 mt-1",children:[Me(K)?(0,B.jsx)(I.E,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",children:"Admin"}):(0,B.jsx)(I.E,{variant:"secondary",children:"User"}),K.emailVerified?(0,B.jsx)(I.E,{variant:"success",className:"text-xs",children:"Verified"}):(0,B.jsx)(I.E,{variant:"outline",className:"text-xs",children:"Unverified"}),K.disabled&&(0,B.jsx)(I.E,{variant:"destructive",className:"text-xs",children:"Disabled"})]})]})]}),(0,B.jsxs)("div",{className:"space-y-4",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Email"}),(0,B.jsxs)("p",{className:"flex items-center gap-2 mt-1",children:[(0,B.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"}),K.email]})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"UID"}),(0,B.jsx)("p",{className:"mt-1 font-mono text-sm break-all",children:K.uid})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Role"}),(0,B.jsx)("p",{className:"mt-1",children:Me(K)?"Administrator":"Regular User"})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Subscription"}),(0,B.jsx)("div",{className:"mt-1",children:_e(De(K))})]}),(0,B.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Created"}),(0,B.jsx)("p",{className:"mt-1 text-sm",children:(0,V.Yq)(null===(O=K.metadata)||void 0===O?void 0:O.creationTime)})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Last Sign In"}),(0,B.jsx)("p",{className:"mt-1 text-sm",children:(0,V.Yq)(null===(z=K.metadata)||void 0===z?void 0:z.lastSignInTime)||"Never"})]})]}),K.providerData&&(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Sign-in Providers"}),(0,B.jsx)("div",{className:"flex gap-2 mt-2",children:K.providerData.map(e=>(0,B.jsx)(I.E,{variant:"secondary",children:e.providerId.replace(".com","")},e.providerId))})]})]}),(0,B.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:[(0,B.jsxs)(F.$,{variant:"outline",className:"flex-1",onClick:()=>Te(K),children:[(0,B.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Subscription"]}),(0,B.jsx)(F.$,{variant:"outline",className:"flex-1",onClick:()=>Fe(K),children:Me(K)?"Remove Admin":"Make Admin"})]}),(0,B.jsx)("div",{className:"flex gap-2",children:(0,B.jsx)(F.$,{variant:"outline",className:"flex-1",onClick:()=>{Ie(K),X(!1)},children:K.disabled?"Enable":"Disable"})})]})]})}),(0,B.jsx)(_.Lt,{open:ae,onOpenChange:le,children:(0,B.jsxs)(_.EO,{children:[(0,B.jsxs)(_.wd,{children:[(0,B.jsx)(_.r7,{children:de&&Me(de)?"Remove Admin Privileges":"Grant Admin Privileges"}),(0,B.jsx)(_.$v,{children:de&&Me(de)?"Are you sure you want to remove admin privileges from ".concat((null===de||void 0===de?void 0:de.displayName)||(null===de||void 0===de?void 0:de.email),"? They will no longer be able to access the admin dashboard."):"Are you sure you want to make ".concat((null===de||void 0===de?void 0:de.displayName)||(null===de||void 0===de?void 0:de.email)," an admin? They will have full access to the admin dashboard and all management features.")})]}),(0,B.jsxs)(_.ck,{children:[(0,B.jsx)(_.Zr,{children:"Cancel"}),(0,B.jsx)(_.Rx,{onClick:()=>{return e=de&&Me(de)?"user":"admin",void(de&&Ce.mutate({uid:de.uid,role:e}));var e},disabled:Ce.isPending,children:Ce.isPending?"Updating...":"Confirm"})]})]})}),(0,B.jsx)(_.Lt,{open:ee,onOpenChange:se,children:(0,B.jsxs)(_.EO,{children:[(0,B.jsxs)(_.wd,{children:[(0,B.jsx)(_.r7,{children:"Delete User"}),(0,B.jsxs)(_.$v,{children:["Are you sure you want to delete"," ",(0,B.jsx)("span",{className:"font-semibold",children:(null===te||void 0===te?void 0:te.displayName)||(null===te||void 0===te?void 0:te.email)}),"? This action cannot be undone and will permanently remove the user from Firebase Authentication."]})]}),(0,B.jsxs)(_.ck,{children:[(0,B.jsx)(_.Zr,{children:"Cancel"}),(0,B.jsx)(_.Rx,{onClick:()=>{te&&Re.mutate(te.uid)},disabled:Re.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:Re.isPending?"Deleting...":"Delete User"})]})]})}),(0,B.jsx)(L.lG,{open:ie,onOpenChange:re,children:(0,B.jsxs)(L.Cf,{className:"max-w-md",children:[(0,B.jsxs)(L.c7,{children:[(0,B.jsxs)(L.L3,{className:"flex items-center gap-2",children:[(0,B.jsx)(m.A,{className:"h-5 w-5"}),"Change Subscription"]}),(0,B.jsxs)(L.rr,{children:["Update the subscription tier for"," ",(0,B.jsx)("span",{className:"font-semibold",children:(null===oe||void 0===oe?void 0:oe.displayName)||(null===oe||void 0===oe?void 0:oe.email)})]})]}),(0,B.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Current Subscription"}),oe&&_e(De(oe))]}),(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"New Subscription Tier"}),(0,B.jsxs)(Z.l6,{value:ue,onValueChange:xe,children:[(0,B.jsx)(Z.bq,{children:(0,B.jsx)(Z.yv,{placeholder:"Select a tier"})}),(0,B.jsxs)(Z.gC,{children:[(0,B.jsx)(Z.eb,{value:$.i9.FREE,children:(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)(U.A,{className:"h-4 w-4"}),"Free"]})}),(0,B.jsx)(Z.eb,{value:$.i9.PREMIUM,children:(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)(g.A,{className:"h-4 w-4 text-purple-500"}),"Premium (\u20b949/month)"]})}),(0,B.jsx)(Z.eb,{value:$.i9.PREMIUM_PLUS,children:(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)(u.A,{className:"h-4 w-4 text-amber-500"}),"Premium Plus (\u20b999/month)"]})}),(0,B.jsx)(Z.eb,{value:$.i9.ENTERPRISE,children:(0,B.jsxs)("div",{className:"flex items-center gap-2",children:[(0,B.jsx)(c.A,{className:"h-4 w-4 text-emerald-500"}),"Enterprise"]})})]})]})]}),ue&&(0,B.jsxs)("div",{className:"p-3 rounded-lg bg-muted text-sm",children:[ue===$.i9.FREE&&(0,B.jsx)("p",{children:"10 minutes per session, English only, resets every 2 hours"}),ue===$.i9.PREMIUM&&(0,B.jsx)("p",{children:"5 hours daily, all languages, offline downloads"}),ue===$.i9.PREMIUM_PLUS&&(0,B.jsx)("p",{children:"Unlimited playback, all languages, priority support"}),ue===$.i9.ENTERPRISE&&(0,B.jsx)("p",{children:"Unlimited access, API access, custom billing"})]})]}),(0,B.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,B.jsx)(F.$,{variant:"outline",className:"flex-1",onClick:()=>re(!1),children:"Cancel"}),(0,B.jsx)(F.$,{className:"flex-1",onClick:()=>{console.log("[Admin] confirmSubscriptionChange called:",{user:oe,tier:ue}),oe&&ue?ke.mutate({uid:oe.uid,subscriptionTier:ue}):console.warn("[Admin] Missing user or tier:",{hasUser:!!oe,hasTier:!!ue})},disabled:!ue||ke.isPending,children:ke.isPending?"Updating...":"Update Subscription"})]})]})})]})}},92264:(e,s,a)=>{a.d(s,{p:()=>c});var l=a(27051),i=a(53986),r=a(65043),t=a(99766),n=a(70579);const d=["className","type"],c=r.forwardRef((e,s)=>{let{className:a,type:r}=e,c=(0,i.A)(e,d);return(0,n.jsx)("input",(0,l.A)({type:r,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",a),ref:s},c))});c.displayName="Input"}}]);
//# sourceMappingURL=366.30b9f0b8.chunk.js.map