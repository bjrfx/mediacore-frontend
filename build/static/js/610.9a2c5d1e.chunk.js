/*! For license information please see 610.9a2c5d1e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[610],{610:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var s=t(5043),i=t(3216),n=t(6931),r=t(1228),c=t(2382),d=t(5088),l=t(7104),o=t(4918),m=t(1837),h=t(8186),u=t(9829),x=t(9340),y=t(4830),p=t(6661),w=t(3735),g=t(8306),v=t(2119),j=t(8707),f=t(1199),A=t(3677),k=t(5699),N=t(4505),b=t(2539),C=t(3390),P=t(9026),I=t(1555),U=t(7484),B=t(9766),M=t(579);function S(){const{id:e}=(0,i.g)(),a=(0,i.Zp)(),{user:t}=(0,b.nc)(),{currentTrack:S,isPlaying:z,progress:L,duration:R,volume:T,isMuted:$,repeatMode:E,shuffleEnabled:_,playTrack:q,togglePlayPause:D,seek:F,setVolume:H,toggleMute:K,toggleRepeat:V,toggleShuffle:O,skipNext:G,skipPrevious:Q}=(0,b.ut)(),{isLiked:Y,toggleLike:Z,addToHistory:J}=(0,b.CA)(),{data:W,isLoading:X,error:ee}=(0,n.I)({queryKey:["media",e],queryFn:()=>N.O0.getMediaById(e),enabled:!!e}),ae=null===W||void 0===W?void 0:W.data;(0,s.useEffect)(()=>{!ae||S&&S.id===ae.id||(q(ae),J(ae))},[ae,S,q,J]);const te=async()=>{if(navigator.share)try{await navigator.share({title:null===ae||void 0===ae?void 0:ae.title,text:"Check out ".concat(null===ae||void 0===ae?void 0:ae.title),url:window.location.href})}catch(e){}else navigator.clipboard.writeText(window.location.href)},se=R>0?L/R*100:0;return ee?(0,M.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,M.jsxs)("div",{className:"text-center",children:[(0,M.jsx)("p",{className:"text-lg text-muted-foreground mb-4",children:"Failed to load media"}),(0,M.jsx)(C.$,{onClick:()=>a(-1),children:"Go Back"})]})}):(0,M.jsxs)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,B.cn)("min-h-screen flex flex-col","video"===(null===ae||void 0===ae?void 0:ae.mediaType)?"bg-black":"bg-gradient-to-b from-card to-background"),children:[(0,M.jsxs)("header",{className:"flex items-center justify-between p-4 z-10",children:[(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:"text-white",onClick:()=>a(-1),children:(0,M.jsx)(c.A,{className:"h-6 w-6"})}),(0,M.jsx)("p",{className:"text-sm text-white/70 truncate max-w-[200px]",children:"Now Playing"}),(0,M.jsxs)(U.rI,{children:[(0,M.jsx)(U.ty,{asChild:!0,children:(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:"text-white",children:(0,M.jsx)(h.A,{className:"h-5 w-5"})})}),(0,M.jsxs)(U.SQ,{align:"end",children:[(0,M.jsxs)(U._2,{onClick:te,children:[(0,M.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Share"]}),t&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(U._2,{onClick:()=>ae&&Z(ae),children:[(0,M.jsx)(o.A,{className:"h-4 w-4 mr-2"}),Y(null===ae||void 0===ae?void 0:ae.id)?"Remove from Liked":"Add to Liked"]}),(0,M.jsxs)(U._2,{children:[(0,M.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add to Playlist"]})]}),(0,M.jsx)(U.mB,{}),(0,M.jsxs)(U._2,{children:[(0,M.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]}),(0,M.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center px-8 py-4",children:[X?(0,M.jsx)(I.E,{className:"w-72 h-72 rounded-lg"}):"video"===(null===ae||void 0===ae?void 0:ae.mediaType)?(0,M.jsx)("div",{className:"relative w-full max-w-4xl aspect-video bg-black rounded-lg overflow-hidden",children:(0,M.jsx)("video",{src:ae.streamUrl||ae.fileUrl,poster:ae.thumbnailUrl,className:"w-full h-full",controls:!1})}):(0,M.jsx)(r.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},className:"relative",children:null!==ae&&void 0!==ae&&ae.thumbnailUrl?(0,M.jsx)("img",{src:ae.thumbnailUrl,alt:ae.title,className:(0,B.cn)("w-72 h-72 rounded-lg shadow-2xl object-cover",z&&"animate-pulse")}):(0,M.jsx)("div",{className:"w-72 h-72 rounded-lg bg-gradient-to-br from-primary/30 to-primary/10 flex items-center justify-center shadow-2xl",children:(0,M.jsx)(u.A,{className:"h-24 w-24 text-primary/50"})})}),(0,M.jsxs)("div",{className:"mt-8 text-center w-full max-w-md",children:[(0,M.jsx)("h1",{className:"text-2xl font-bold text-white truncate",children:X?(0,M.jsx)(I.E,{className:"h-8 w-48 mx-auto"}):null===ae||void 0===ae?void 0:ae.title}),(0,M.jsx)("p",{className:"text-white/70 mt-2 truncate",children:X?(0,M.jsx)(I.E,{className:"h-5 w-32 mx-auto"}):(null===ae||void 0===ae?void 0:ae.artist)||(null===ae||void 0===ae?void 0:ae.description)})]}),(0,M.jsxs)("div",{className:"w-full max-w-md mt-8",children:[(0,M.jsx)(P.A,{value:[se],max:100,step:.1,onValueChange:e=>{const a=e[0]/100*R;F(a)},className:"cursor-pointer"}),(0,M.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-white/50",children:[(0,M.jsx)("span",{children:(0,B.a3)(L)}),(0,M.jsx)("span",{children:(0,B.a3)(R)})]})]}),(0,M.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-6",children:[(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:(0,B.cn)("text-white/70 hover:text-white",_&&"text-primary"),onClick:O,children:(0,M.jsx)(v.A,{className:"h-5 w-5"})}),(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:"text-white hover:scale-110 transition-transform",onClick:Q,children:(0,M.jsx)(j.A,{className:"h-6 w-6"})}),(0,M.jsx)(C.$,{size:"icon",className:"h-16 w-16 rounded-full bg-white text-black hover:scale-105 transition-transform",onClick:D,children:z?(0,M.jsx)(x.A,{className:"h-8 w-8"}):(0,M.jsx)(y.A,{className:"h-8 w-8 ml-1"})}),(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:"text-white hover:scale-110 transition-transform",onClick:G,children:(0,M.jsx)(f.A,{className:"h-6 w-6"})}),(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:(0,B.cn)("text-white/70 hover:text-white","off"!==E&&"text-primary"),onClick:V,children:"one"===E?(0,M.jsx)(p.A,{className:"h-5 w-5"}):(0,M.jsx)(w.A,{className:"h-5 w-5"})})]}),(0,M.jsxs)("div",{className:"flex items-center justify-between w-full max-w-md mt-8",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:"text-white/70",onClick:K,children:$||0===T?(0,M.jsx)(k.A,{className:"h-5 w-5"}):(0,M.jsx)(A.A,{className:"h-5 w-5"})}),(0,M.jsx)("div",{className:"w-24",children:(0,M.jsx)(P.A,{value:[$?0:100*T],max:100,onValueChange:e=>H(e[0]/100)})})]}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:"text-white/70",onClick:()=>ae&&Z(ae),children:(0,M.jsx)(o.A,{className:(0,B.cn)("h-5 w-5",Y(null===ae||void 0===ae?void 0:ae.id)&&"fill-primary text-primary")})}),(0,M.jsx)(C.$,{variant:"ghost",size:"icon",className:"text-white/70",onClick:te,children:(0,M.jsx)(g.A,{className:"h-5 w-5"})})]})]}),ae&&(0,M.jsx)("div",{className:"mt-8 text-center text-white/50 text-sm",children:(0,M.jsxs)("p",{className:"flex items-center justify-center gap-4",children:[(0,M.jsxs)("span",{className:"flex items-center gap-1",children:[(0,M.jsx)(d.A,{className:"h-4 w-4"}),(0,B.a3)(ae.duration)]}),ae.createdAt&&(0,M.jsxs)("span",{children:["Added ",(0,B.Yq)(ae.createdAt)]})]})})]})]})}},1555:(e,a,t)=>{t.d(a,{E:()=>d});var s=t(7051),i=t(3986),n=(t(5043),t(9766)),r=t(579);const c=["className"];function d(e){let{className:a}=e,t=(0,i.A)(e,c);return(0,r.jsx)("div",(0,s.A)({className:(0,n.cn)("animate-pulse rounded-md bg-muted",a)},t))}},1837:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]])},4505:(e,a,t)=>{t.d(a,{O0:()=>o,ic:()=>m});var s=t(7051),i=t(9722),n=t(3550);const r="https://test.mediacoreapi.masakalirestrobar.ca",c="mc_3f177f8a673446ba8ee152728d877b00";console.log("[API] Base URL:",r);const d=i.A.create({baseURL:r,timeout:3e4,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{var a;return console.log("[API] ".concat(null===(a=e.method)||void 0===a?void 0:a.toUpperCase()," ").concat(e.baseURL).concat(e.url)),e},e=>(console.error("[API Request Error]",e),Promise.reject(e))),d.interceptors.response.use(e=>(console.log("[API] Response:",e.status),e),e=>{var a,t,s;return console.error("[API Error]",{status:null===(a=e.response)||void 0===a?void 0:a.status,data:null===(t=e.response)||void 0===t?void 0:t.data,message:e.message,url:null===(s=e.config)||void 0===s?void 0:s.url}),Promise.reject(e)});const l=async()=>{const e=await(0,n.p9)();return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},o={healthCheck:async()=>(await d.get("/health")).data,getMedia:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:a,limit:t=50,orderBy:s="createdAt",order:i="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:i});a&&n.append("type",a);return(await d.get("/api/feed?".concat(n),{headers:{"x-api-key":c}})).data},getMediaById:async e=>(await d.get("/api/media/".concat(e),{headers:{"x-api-key":c}})).data,getSettings:async()=>(await d.get("/api/settings",{headers:{"x-api-key":c}})).data,getArtists:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{limit:a=50,orderBy:t="createdAt",order:s="desc"}=e,i=new URLSearchParams({limit:String(a),orderBy:t,order:s});return(await d.get("/api/artists?".concat(i),{headers:{"x-api-key":c}})).data},getArtistById:async e=>(await d.get("/api/artists/".concat(e),{headers:{"x-api-key":c}})).data,getArtistAlbums:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{orderBy:t="releaseDate",order:s="desc"}=a,i=new URLSearchParams({orderBy:t,order:s});return(await d.get("/api/artists/".concat(e,"/albums?").concat(i),{headers:{"x-api-key":c}})).data},getArtistMedia:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{type:t,orderBy:s="createdAt",order:i="desc"}=a,n=new URLSearchParams({orderBy:s,order:i});t&&n.append("type",t);return(await d.get("/api/artists/".concat(e,"/media?").concat(n),{headers:{"x-api-key":c}})).data},getAlbums:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{artistId:a,limit:t=50,orderBy:s="releaseDate",order:i="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:i});a&&n.append("artistId",a);return(await d.get("/api/albums?".concat(n),{headers:{"x-api-key":c}})).data},getAlbumById:async e=>(await d.get("/api/albums/".concat(e),{headers:{"x-api-key":c}})).data,getAlbumMedia:async e=>(await d.get("/api/albums/".concat(e,"/media"),{headers:{"x-api-key":c}})).data},m={uploadMedia:async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"video",i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;const l=await(0,n.p9)(),o=new FormData;o.append("file",e),o.append("title",a),o.append("subtitle",t),o.append("type",s),r&&o.append("artistId",r),c&&o.append("albumId",c),console.log("[API] Upload:",{fileName:e.name,fileType:e.type,title:a,type:s,artistId:r,albumId:c});return(await d.post("/admin/media",o,{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(i&&e.total){const a=Math.round(100*e.loaded/e.total);i(a)}}})).data},updateMedia:async(e,a)=>{const t=await l();return(await d.put("/admin/media/".concat(e),a,{headers:t})).data},deleteMedia:async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=await l();return(await d.delete("/admin/media/".concat(e,"?deleteFile=").concat(a),{headers:t})).data},createArtist:async e=>{const a=await l();return(await d.post("/admin/artists",e,{headers:a})).data},updateArtist:async(e,a)=>{const t=await l();return(await d.put("/admin/artists/".concat(e),a,{headers:t})).data},deleteArtist:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await l();return(await d.delete("/admin/artists/".concat(e,"?cascade=").concat(a),{headers:t})).data},createAlbum:async e=>{const a=await l();return(await d.post("/admin/albums",e,{headers:a})).data},updateAlbum:async(e,a)=>{const t=await l();return(await d.put("/admin/albums/".concat(e),a,{headers:t})).data},deleteAlbum:async e=>{const a=await l();return(await d.delete("/admin/albums/".concat(e),{headers:a})).data},addMediaToAlbum:async(e,a,t)=>{const s=await l();return(await d.post("/admin/albums/".concat(e,"/media"),{mediaId:a,trackNumber:t},{headers:s})).data},removeMediaFromAlbum:async(e,a)=>{const t=await l();return(await d.delete("/admin/albums/".concat(e,"/media/").concat(a),{headers:t})).data},reorderAlbumTracks:async(e,a)=>{const t=await l();return(await d.put("/admin/albums/".concat(e,"/media/reorder"),{tracks:a},{headers:t})).data},generateApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read_only",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await l();return(await d.post("/admin/generate-key",(0,s.A)({name:e,accessType:a},t),{headers:i})).data},getApiKeys:async()=>{const e=await l();return(await d.get("/admin/api-keys",{headers:e})).data},deleteApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await l();return(await d.delete("/admin/api-keys/".concat(e,"?hardDelete=").concat(a),{headers:t})).data},getSettings:async()=>{const e=await l();return(await d.get("/api/settings",{headers:e})).data},updateSettings:async e=>{const a=await l();return(await d.put("/admin/settings",e,{headers:a})).data},getDashboard:async()=>{const e=await l();return(await d.get("/admin/analytics/dashboard",{headers:e})).data},getAnalyticsSummary:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;const a=await l();return(await d.get("/admin/analytics/summary?days=".concat(e),{headers:a})).data},getRealTimeStats:async()=>{const e=await l();return(await d.get("/admin/analytics/realtime",{headers:e})).data},getApiKeyStats:async e=>{const a=await l(),t=e?"/admin/analytics/api-keys?keyId=".concat(e):"/admin/analytics/api-keys";return(await d.get(t,{headers:a})).data},getUsers:async()=>{const e=await l();return(await d.get("/admin/users",{headers:e})).data},getUserById:async e=>{const a=await l();return(await d.get("/admin/users/".concat(e),{headers:a})).data},updateUserRole:async(e,a)=>{const t=await l();return(await d.put("/admin/users/".concat(e,"/role"),{role:a},{headers:t})).data},updateUserStatus:async(e,a)=>{const t=await l();return(await d.put("/admin/users/".concat(e,"/status"),{disabled:a},{headers:t})).data},deleteUser:async e=>{const a=await l();return(await d.delete("/admin/users/".concat(e),{headers:a})).data}}},8186:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},8306:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])}}]);
//# sourceMappingURL=610.9a2c5d1e.chunk.js.map