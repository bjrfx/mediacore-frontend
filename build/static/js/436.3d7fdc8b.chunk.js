"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[436],{1140:(e,a,s)=>{s.d(a,{BT:()=>v,Wu:()=>f,ZB:()=>g,Zp:()=>x,aR:()=>p});var t=s(7051),r=s(3986),i=s(5043),n=s(9766),l=s(579);const d=["className"],c=["className"],o=["className","children"],m=["className"],u=["className"],h=["className"],x=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,d);return(0,l.jsx)("div",(0,t.A)({ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",s)},i))});x.displayName="Card";const p=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,c);return(0,l.jsx)("div",(0,t.A)({ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s)},i))});p.displayName="CardHeader";const g=i.forwardRef((e,a)=>{let{className:s,children:i}=e,d=(0,r.A)(e,o);return(0,l.jsx)("h3",(0,t.A)((0,t.A)({ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s)},d),{},{children:i}))});g.displayName="CardTitle";const v=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,m);return(0,l.jsx)("p",(0,t.A)({ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s)},i))});v.displayName="CardDescription";const f=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,u);return(0,l.jsx)("div",(0,t.A)({ref:a,className:(0,n.cn)("p-6 pt-0",s)},i))});f.displayName="CardContent";i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,h);return(0,l.jsx)("div",(0,t.A)({ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s)},i))}).displayName="CardFooter"},1555:(e,a,s)=>{s.d(a,{E:()=>d});var t=s(7051),r=s(3986),i=(s(5043),s(9766)),n=s(579);const l=["className"];function d(e){let{className:a}=e,s=(0,r.A)(e,l);return(0,n.jsx)("div",(0,t.A)({className:(0,i.cn)("animate-pulse rounded-md bg-muted",a)},s))}},2264:(e,a,s)=>{s.d(a,{p:()=>c});var t=s(7051),r=s(3986),i=s(5043),n=s(9766),l=s(579);const d=["className","type"],c=i.forwardRef((e,a)=>{let{className:s,type:i}=e,c=(0,r.A)(e,d);return(0,l.jsx)("input",(0,t.A)({type:i,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",s),ref:a},c))});c.displayName="Input"},3416:(e,a,s)=>{s.d(a,{T:()=>c});var t=s(7051),r=s(3986),i=s(5043),n=s(9766),l=s(579);const d=["className"],c=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,d);return(0,l.jsx)("textarea",(0,t.A)({className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a},i))});c.displayName="Textarea"},4370:(e,a,s)=>{s.d(a,{bq:()=>y,eb:()=>k,gC:()=>w,l6:()=>j,yv:()=>b});var t=s(7051),r=s(3986),i=s(5043),n=s(2095),l=s(6210),d=s(2382),c=s(5711),o=s(9766),m=s(579);const u=["className","children"],h=["className"],x=["className"],p=["className","children","position"],g=["className"],v=["className","children"],f=["className"],j=n.bL,b=(n.YJ,n.WT),y=i.forwardRef((e,a)=>{let{className:s,children:i}=e,l=(0,r.A)(e,u);return(0,m.jsxs)(n.l9,(0,t.A)((0,t.A)({ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s)},l),{},{children:[i,(0,m.jsx)(n.In,{asChild:!0,children:(0,m.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]}))});y.displayName=n.l9.displayName;const N=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,h);return(0,m.jsx)(n.PP,(0,t.A)((0,t.A)({ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s)},i),{},{children:(0,m.jsx)(c.A,{className:"h-4 w-4"})}))});N.displayName=n.PP.displayName;const A=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,x);return(0,m.jsx)(n.wn,(0,t.A)((0,t.A)({ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s)},i),{},{children:(0,m.jsx)(d.A,{className:"h-4 w-4"})}))});A.displayName=n.wn.displayName;const w=i.forwardRef((e,a)=>{let{className:s,children:i,position:l="popper"}=e,d=(0,r.A)(e,p);return(0,m.jsx)(n.ZL,{children:(0,m.jsxs)(n.UC,(0,t.A)((0,t.A)({ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l},d),{},{children:[(0,m.jsx)(N,{}),(0,m.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,m.jsx)(A,{})]}))})});w.displayName=n.UC.displayName;i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,g);return(0,m.jsx)(n.JU,(0,t.A)({ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s)},i))}).displayName=n.JU.displayName;const k=i.forwardRef((e,a)=>{let{className:s,children:i}=e,d=(0,r.A)(e,v);return(0,m.jsxs)(n.q7,(0,t.A)((0,t.A)({ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s)},d),{},{children:[(0,m.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,m.jsx)(n.VF,{children:(0,m.jsx)(l.A,{className:"h-4 w-4"})})}),(0,m.jsx)(n.p4,{children:i})]}))});k.displayName=n.q7.displayName;i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,f);return(0,m.jsx)(n.wv,(0,t.A)({ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s)},i))}).displayName=n.wv.displayName},4505:(e,a,s)=>{s.d(a,{O0:()=>o,ic:()=>m});var t=s(7051),r=s(9722),i=s(3550);const n="https://test.mediacoreapi.masakalirestrobar.ca",l="mc_3f177f8a673446ba8ee152728d877b00";console.log("[API] Base URL:",n);const d=r.A.create({baseURL:n,timeout:3e4,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{var a;return console.log("[API] ".concat(null===(a=e.method)||void 0===a?void 0:a.toUpperCase()," ").concat(e.baseURL).concat(e.url)),e},e=>(console.error("[API Request Error]",e),Promise.reject(e))),d.interceptors.response.use(e=>(console.log("[API] Response:",e.status),e),e=>{var a,s,t;return console.error("[API Error]",{status:null===(a=e.response)||void 0===a?void 0:a.status,data:null===(s=e.response)||void 0===s?void 0:s.data,message:e.message,url:null===(t=e.config)||void 0===t?void 0:t.url}),Promise.reject(e)});const c=async()=>{const e=await(0,i.p9)();return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},o={healthCheck:async()=>(await d.get("/health")).data,getMedia:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:a,limit:s=50,orderBy:t="createdAt",order:r="desc"}=e,i=new URLSearchParams({limit:String(s),orderBy:t,order:r});a&&i.append("type",a);return(await d.get("/api/feed?".concat(i),{headers:{"x-api-key":l}})).data},getMediaById:async e=>(await d.get("/api/media/".concat(e),{headers:{"x-api-key":l}})).data,getSettings:async()=>(await d.get("/api/settings",{headers:{"x-api-key":l}})).data,getArtists:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{limit:a=50,orderBy:s="createdAt",order:t="desc"}=e,r=new URLSearchParams({limit:String(a),orderBy:s,order:t});return(await d.get("/api/artists?".concat(r),{headers:{"x-api-key":l}})).data},getArtistById:async e=>(await d.get("/api/artists/".concat(e),{headers:{"x-api-key":l}})).data,getArtistAlbums:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{orderBy:s="releaseDate",order:t="desc"}=a,r=new URLSearchParams({orderBy:s,order:t});return(await d.get("/api/artists/".concat(e,"/albums?").concat(r),{headers:{"x-api-key":l}})).data},getArtistMedia:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{type:s,orderBy:t="createdAt",order:r="desc"}=a,i=new URLSearchParams({orderBy:t,order:r});s&&i.append("type",s);return(await d.get("/api/artists/".concat(e,"/media?").concat(i),{headers:{"x-api-key":l}})).data},getAlbums:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{artistId:a,limit:s=50,orderBy:t="releaseDate",order:r="desc"}=e,i=new URLSearchParams({limit:String(s),orderBy:t,order:r});a&&i.append("artistId",a);return(await d.get("/api/albums?".concat(i),{headers:{"x-api-key":l}})).data},getAlbumById:async e=>(await d.get("/api/albums/".concat(e),{headers:{"x-api-key":l}})).data,getAlbumMedia:async e=>(await d.get("/api/albums/".concat(e,"/media"),{headers:{"x-api-key":l}})).data},m={uploadMedia:async function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"video",r=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;const c=await(0,i.p9)(),o=new FormData;o.append("file",e),o.append("title",a),o.append("subtitle",s),o.append("type",t),n&&o.append("artistId",n),l&&o.append("albumId",l),console.log("[API] Upload:",{fileName:e.name,fileType:e.type,title:a,type:t,artistId:n,albumId:l});return(await d.post("/admin/media",o,{headers:{Authorization:"Bearer ".concat(c),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(r&&e.total){const a=Math.round(100*e.loaded/e.total);r(a)}}})).data},updateMedia:async(e,a)=>{const s=await c();return(await d.put("/admin/media/".concat(e),a,{headers:s})).data},deleteMedia:async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=await c();return(await d.delete("/admin/media/".concat(e,"?deleteFile=").concat(a),{headers:s})).data},createArtist:async e=>{const a=await c();return(await d.post("/admin/artists",e,{headers:a})).data},updateArtist:async(e,a)=>{const s=await c();return(await d.put("/admin/artists/".concat(e),a,{headers:s})).data},deleteArtist:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=await c();return(await d.delete("/admin/artists/".concat(e,"?cascade=").concat(a),{headers:s})).data},createAlbum:async e=>{const a=await c();return(await d.post("/admin/albums",e,{headers:a})).data},updateAlbum:async(e,a)=>{const s=await c();return(await d.put("/admin/albums/".concat(e),a,{headers:s})).data},deleteAlbum:async e=>{const a=await c();return(await d.delete("/admin/albums/".concat(e),{headers:a})).data},addMediaToAlbum:async(e,a,s)=>{const t=await c();return(await d.post("/admin/albums/".concat(e,"/media"),{mediaId:a,trackNumber:s},{headers:t})).data},removeMediaFromAlbum:async(e,a)=>{const s=await c();return(await d.delete("/admin/albums/".concat(e,"/media/").concat(a),{headers:s})).data},reorderAlbumTracks:async(e,a)=>{const s=await c();return(await d.put("/admin/albums/".concat(e,"/media/reorder"),{tracks:a},{headers:s})).data},generateApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read_only",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await c();return(await d.post("/admin/generate-key",(0,t.A)({name:e,accessType:a},s),{headers:r})).data},getApiKeys:async()=>{const e=await c();return(await d.get("/admin/api-keys",{headers:e})).data},deleteApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=await c();return(await d.delete("/admin/api-keys/".concat(e,"?hardDelete=").concat(a),{headers:s})).data},getSettings:async()=>{const e=await c();return(await d.get("/api/settings",{headers:e})).data},updateSettings:async e=>{const a=await c();return(await d.put("/admin/settings",e,{headers:a})).data},getDashboard:async()=>{const e=await c();return(await d.get("/admin/analytics/dashboard",{headers:e})).data},getAnalyticsSummary:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;const a=await c();return(await d.get("/admin/analytics/summary?days=".concat(e),{headers:a})).data},getRealTimeStats:async()=>{const e=await c();return(await d.get("/admin/analytics/realtime",{headers:e})).data},getApiKeyStats:async e=>{const a=await c(),s=e?"/admin/analytics/api-keys?keyId=".concat(e):"/admin/analytics/api-keys";return(await d.get(s,{headers:a})).data},getUsers:async()=>{const e=await c();return(await d.get("/admin/users",{headers:e})).data},getUserById:async e=>{const a=await c();return(await d.get("/admin/users/".concat(e),{headers:a})).data},updateUserRole:async(e,a)=>{const s=await c();return(await d.put("/admin/users/".concat(e,"/role"),{role:a},{headers:s})).data},updateUserStatus:async(e,a)=>{const s=await c();return(await d.put("/admin/users/".concat(e,"/status"),{disabled:a},{headers:s})).data},deleteUser:async e=>{const a=await c();return(await d.delete("/admin/users/".concat(e),{headers:a})).data}}},5436:(e,a,s)=>{s.r(a),s.d(a,{default:()=>G});var t=s(7051),r=s(5043),i=s(3216),n=s(5475),l=s(3248),d=s(6931),c=s(7097),o=s(4459),m=s(5469),u=s(8186),h=s(4265),x=s(764),p=s(9855),g=s(1360),v=s(9521),f=s(9829),j=s(4830),b=s(6360),y=s(6210),N=s(4259),A=s(7170),w=s(614),k=s(8276),C=s(4505),I=s(2539),S=s(1140),E=s(2264),R=s(3390),T=s(5949),L=s(9938),D=s(3416),F=s(1555),P=s(5598),U=s(7484),B=s(4370),J=s(9690),M=s(3986),$=s(6622),q=s(9766),O=s(579);const z=["className"],Q=r.forwardRef((e,a)=>{let{className:s}=e,r=(0,M.A)(e,z);return(0,O.jsx)($.bL,(0,t.A)((0,t.A)({ref:a,className:(0,q.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s)},r),{},{children:(0,O.jsx)($.C1,{className:(0,q.cn)("flex items-center justify-center text-current"),children:(0,O.jsx)(y.A,{className:"h-4 w-4"})})}))});Q.displayName=$.bL.displayName;const _=[{value:"album",label:"Album"},{value:"single",label:"Single"},{value:"ep",label:"EP"},{value:"compilation",label:"Compilation"},{value:"audiobook",label:"Audiobook"},{value:"lecture",label:"Lecture Series"}];function G(){const{artistId:e}=(0,i.g)(),a=(0,i.Zp)(),s=(0,l.jE)(),{addToast:N}=(0,I.j_)(),{playTrack:A,setQueue:w}=(0,I.ut)(),[k,M]=(0,r.useState)("albums"),[$,z]=(0,r.useState)(!1),[G,K]=(0,r.useState)(!1),[W,V]=(0,r.useState)(!1),[X,H]=(0,r.useState)(!1),[Y,ee]=(0,r.useState)(!1),[ae,se]=(0,r.useState)(!1),[te,re]=(0,r.useState)(null),[ie,ne]=(0,r.useState)([]),[le,de]=(0,r.useState)({title:"",description:"",coverImage:"",releaseDate:"",genre:"",type:"album"}),[ce,oe]=(0,r.useState)({name:"",bio:"",genre:"",image:"",website:""}),{data:me,isLoading:ue}=(0,d.I)({queryKey:["artist",e],queryFn:()=>C.O0.getArtistById(e),enabled:!!e}),{data:he,isLoading:xe}=(0,d.I)({queryKey:["artist-albums",e],queryFn:()=>C.O0.getArtistAlbums(e),enabled:!!e}),{data:pe,isLoading:ge}=(0,d.I)({queryKey:["artist-media",e],queryFn:()=>C.O0.getArtistMedia(e),enabled:!!e}),{data:ve}=(0,d.I)({queryKey:["admin-media"],queryFn:()=>C.O0.getMedia({limit:500})}),fe=null===me||void 0===me?void 0:me.data,je=(0,r.useMemo)(()=>(null===he||void 0===he?void 0:he.data)||[],[null===he||void 0===he?void 0:he.data]),be=(0,r.useMemo)(()=>(null===pe||void 0===pe?void 0:pe.data)||[],[null===pe||void 0===pe?void 0:pe.data]),ye=(0,r.useMemo)(()=>(null===ve||void 0===ve?void 0:ve.data)||[],[null===ve||void 0===ve?void 0:ve.data]),[Ne,Ae]=(0,r.useState)({}),we=(0,r.useMemo)(()=>{const e=new Set;return je.forEach(a=>{(Ne[a.id]||[]).forEach(a=>e.add(a.id))}),ye.filter(a=>!e.has(a.id))},[ye,je,Ne]),ke=async e=>{if(Ne[e])return Ne[e];try{const a=await C.O0.getAlbumMedia(e),s=(null===a||void 0===a?void 0:a.data)||[];return Ae(a=>(0,t.A)((0,t.A)({},a),{},{[e]:s})),s}catch(a){return console.error("Failed to fetch album tracks:",a),[]}},Ce=(0,c.n)({mutationFn:a=>C.ic.createAlbum((0,t.A)((0,t.A)({},a),{},{artistId:e})),onSuccess:()=>{s.invalidateQueries(["artist-albums",e]),z(!1),de({title:"",description:"",coverImage:"",releaseDate:"",genre:"",type:"album"}),N({message:"Album created successfully",type:"success"})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to create album",type:"error"})}}),Ie=(0,c.n)({mutationFn:e=>{let{id:a,data:s}=e;return C.ic.updateAlbum(a,s)},onSuccess:()=>{s.invalidateQueries(["artist-albums",e]),K(!1),re(null),N({message:"Album updated successfully",type:"success"})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to update album",type:"error"})}}),Se=(0,c.n)({mutationFn:e=>C.ic.deleteAlbum(e),onSuccess:()=>{s.invalidateQueries(["artist-albums",e]),s.invalidateQueries(["artist-media",e]),V(!1),re(null),N({message:"Album deleted successfully",type:"success"})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to delete album",type:"error"})}}),Ee=(0,c.n)({mutationFn:a=>C.ic.updateArtist(e,a),onSuccess:()=>{s.invalidateQueries(["artist",e]),s.invalidateQueries(["artists"]),ee(!1),N({message:"Artist updated successfully",type:"success"})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to update artist",type:"error"})}}),Re=(0,c.n)({mutationFn:()=>C.ic.deleteArtist(e,!0),onSuccess:()=>{s.invalidateQueries(["artists"]),a("/admin/artists"),N({message:"Artist deleted successfully",type:"success"})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to delete artist",type:"error"})}}),Te=(0,c.n)({mutationFn:e=>{let{albumId:a,mediaId:s,trackNumber:t}=e;return C.ic.addMediaToAlbum(a,s,t)},onSuccess:(a,r)=>{s.invalidateQueries(["album-media",r.albumId]),s.invalidateQueries(["artist-media",e]),Ae(e=>{const a=(0,t.A)({},e);return delete a[r.albumId],a})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to add track",type:"error"})}}),Le=(0,c.n)({mutationFn:e=>{let{albumId:a,mediaId:s}=e;return C.ic.removeMediaFromAlbum(a,s)},onSuccess:(a,r)=>{s.invalidateQueries(["album-media",r.albumId]),s.invalidateQueries(["artist-media",e]),Ae(e=>{const a=(0,t.A)({},e);return delete a[r.albumId],a}),N({message:"Track removed from album",type:"success"})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to remove track",type:"error"})}}),De=(0,c.n)({mutationFn:e=>{let{albumId:a,tracks:s}=e;return C.ic.reorderAlbumTracks(a,s)},onSuccess:(e,a)=>{Ae(e=>{const s=(0,t.A)({},e);return delete s[a.albumId],s})},onError:e=>{var a,s;N({message:(null===(a=e.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Failed to reorder tracks",type:"error"})}});if(ue)return(0,O.jsx)("div",{className:"space-y-6",children:(0,O.jsxs)("div",{className:"flex items-start gap-4",children:[(0,O.jsx)(F.E,{className:"h-10 w-10"}),(0,O.jsxs)("div",{className:"flex-1 flex gap-6",children:[(0,O.jsx)(F.E,{className:"w-48 h-48 rounded-xl"}),(0,O.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,O.jsx)(F.E,{className:"h-10 w-64"}),(0,O.jsx)(F.E,{className:"h-6 w-32"}),(0,O.jsx)(F.E,{className:"h-20 w-full max-w-xl"})]})]})]})});if(!fe)return(0,O.jsxs)("div",{className:"text-center py-12",children:[(0,O.jsx)(o.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,O.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Artist not found"}),(0,O.jsx)(R.$,{asChild:!0,children:(0,O.jsx)(n.N_,{to:"/admin/artists",children:"Back to Artists"})})]});const Fe=()=>{de({title:"",description:"",coverImage:"",releaseDate:"",genre:fe.genre||"",type:"album"}),z(!0)},Pe=e=>{var a;re(e),de({title:e.title,description:e.description||"",coverImage:e.coverImage||"",releaseDate:(null===(a=e.releaseDate)||void 0===a?void 0:a.split("T")[0])||"",genre:e.genre||"",type:e.type||"album"}),K(!0)},Ue=e=>{re(e),V(!0)},Be=e=>{re(e),ne([]),H(!0)},Je=e=>{ne(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},Me=async(e,a,s)=>{if(!e.destination)return;const r=Array.from(s),[i]=r.splice(e.source.index,1);r.splice(e.destination.index,0,i),Ae(e=>(0,t.A)((0,t.A)({},e),{},{[a]:r}));const n=r.map((e,a)=>({mediaId:e.id,trackNumber:a+1}));await De.mutateAsync({albumId:a,tracks:n})},$e=async e=>{let a=Ne[e.id];a||(a=await ke(e.id)),a.length>0&&(w(a,0),A(a[0],a))},qe=(e,a)=>{A(e,a)};return(0,O.jsxs)("div",{className:"space-y-6",children:[(0,O.jsxs)("div",{className:"flex items-start gap-4",children:[(0,O.jsx)(R.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,O.jsx)(n.N_,{to:"/admin/artists",children:(0,O.jsx)(m.A,{className:"h-5 w-5"})})}),(0,O.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row gap-6",children:[(0,O.jsx)("div",{className:(0,q.cn)("w-32 h-32 md:w-48 md:h-48 rounded-xl shrink-0 overflow-hidden",!fe.image&&"bg-gradient-to-br ".concat((0,q.O3)(fe.id))),children:fe.image?(0,O.jsx)("img",{src:fe.image,alt:fe.name,className:"w-full h-full object-cover"}):(0,O.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,O.jsx)(o.A,{className:"h-16 w-16 text-white/50"})})}),(0,O.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,O.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,O.jsxs)("div",{children:[(0,O.jsx)("h1",{className:"text-3xl font-bold",children:fe.name}),(0,O.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[fe.genre&&(0,O.jsx)(T.E,{variant:"secondary",children:fe.genre}),(0,O.jsxs)("span",{className:"text-muted-foreground",children:[je.length," albums \u2022 ",be.length," tracks"]})]})]}),(0,O.jsxs)(U.rI,{children:[(0,O.jsx)(U.ty,{asChild:!0,children:(0,O.jsx)(R.$,{variant:"outline",size:"icon",children:(0,O.jsx)(u.A,{className:"h-5 w-5"})})}),(0,O.jsxs)(U.SQ,{align:"end",children:[(0,O.jsxs)(U._2,{onClick:()=>{oe({name:fe.name,bio:fe.bio||"",genre:fe.genre||"",image:fe.image||"",website:fe.website||""}),ee(!0)},children:[(0,O.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Edit Artist"]}),fe.website&&(0,O.jsx)(U._2,{asChild:!0,children:(0,O.jsxs)("a",{href:fe.website,target:"_blank",rel:"noopener noreferrer",children:[(0,O.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Visit Website"]})}),(0,O.jsx)(U.mB,{}),(0,O.jsxs)(U._2,{onClick:()=>se(!0),className:"text-destructive",children:[(0,O.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Delete Artist"]})]})]})]}),fe.bio&&(0,O.jsx)("p",{className:"text-muted-foreground mt-4 line-clamp-3",children:fe.bio})]})]})]}),(0,O.jsxs)(J.tU,{value:k,onValueChange:M,children:[(0,O.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O.jsxs)(J.j7,{children:[(0,O.jsx)(J.Xi,{value:"albums",children:"Albums"}),(0,O.jsx)(J.Xi,{value:"tracks",children:"All Tracks"})]}),"albums"===k&&(0,O.jsxs)(R.$,{onClick:Fe,children:[(0,O.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Album"]})]}),(0,O.jsx)(J.av,{value:"albums",className:"space-y-6",children:xe?(0,O.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,a)=>(0,O.jsx)(S.Zp,{children:(0,O.jsx)(S.Wu,{className:"p-6",children:(0,O.jsxs)("div",{className:"flex gap-4",children:[(0,O.jsx)(F.E,{className:"w-24 h-24 rounded-lg"}),(0,O.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,O.jsx)(F.E,{className:"h-6 w-48"}),(0,O.jsx)(F.E,{className:"h-4 w-32"})]})]})})},a))}):0===je.length?(0,O.jsx)(S.Zp,{children:(0,O.jsxs)(S.Wu,{className:"text-center py-12",children:[(0,O.jsx)(v.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,O.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No albums yet"}),(0,O.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create albums to organize this artist's content"}),(0,O.jsxs)(R.$,{onClick:Fe,children:[(0,O.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Create First Album"]})]})}):je.map(e=>(0,O.jsx)(Z,{album:e,albumTracksCache:Ne,fetchAlbumTracks:ke,onEditAlbum:Pe,onDeleteAlbum:Ue,onAssignMedia:Be,onPlayAlbum:$e,onPlayTrack:qe,onRemoveTrack:a=>Le.mutate({albumId:e.id,mediaId:a.id}),onDragEnd:Me,addToast:N},e.id))}),(0,O.jsx)(J.av,{value:"tracks",children:(0,O.jsx)(S.Zp,{children:(0,O.jsx)(S.Wu,{className:"p-0",children:ge?(0,O.jsx)("div",{className:"p-4 space-y-2",children:Array.from({length:5}).map((e,a)=>(0,O.jsx)(F.E,{className:"h-12 w-full"},a))}):0===be.length?(0,O.jsxs)("div",{className:"text-center py-12",children:[(0,O.jsx)(f.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,O.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No tracks assigned"}),(0,O.jsx)("p",{className:"text-muted-foreground",children:"Upload media and assign it to this artist"})]}):(0,O.jsx)("div",{className:"divide-y",children:be.map((e,a)=>(0,O.jsxs)("div",{className:"flex items-center gap-3 p-3 hover:bg-muted/50 group",children:[(0,O.jsx)("span",{className:"w-8 text-sm text-muted-foreground text-center",children:a+1}),(0,O.jsx)("div",{className:(0,q.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,q.O3)(e.id))),children:e.thumbnail&&(0,O.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,O.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,O.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,O.jsx)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:e.albumId?(0,O.jsx)(T.E,{variant:"secondary",className:"text-xs",children:"In Album"}):(0,O.jsx)(T.E,{variant:"outline",className:"text-xs",children:"Single"})})]}),(0,O.jsx)(T.E,{variant:"video"===e.type?"default":"secondary",children:e.type}),(0,O.jsx)(R.$,{variant:"ghost",size:"iconSm",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>qe(e,be),children:(0,O.jsx)(j.A,{className:"h-4 w-4"})})]},e.id))})})})})]}),(0,O.jsx)(P.lG,{open:$,onOpenChange:z,children:(0,O.jsxs)(P.Cf,{className:"max-w-md",children:[(0,O.jsxs)(P.c7,{children:[(0,O.jsx)(P.L3,{children:"Add New Album"}),(0,O.jsxs)(P.rr,{children:["Create a new album for ",fe.name]})]}),(0,O.jsxs)("div",{className:"space-y-4 py-4",children:[(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Title *"}),(0,O.jsx)(E.p,{value:le.title,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{title:e.target.value})),placeholder:"Album title"})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Type"}),(0,O.jsxs)(B.l6,{value:le.type,onValueChange:e=>de((0,t.A)((0,t.A)({},le),{},{type:e})),children:[(0,O.jsx)(B.bq,{children:(0,O.jsx)(B.yv,{placeholder:"Select type"})}),(0,O.jsx)(B.gC,{children:_.map(e=>(0,O.jsx)(B.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Genre"}),(0,O.jsx)(E.p,{value:le.genre,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{genre:e.target.value})),placeholder:"e.g., Spirituality, Jazz"})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Description"}),(0,O.jsx)(D.T,{value:le.description,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{description:e.target.value})),placeholder:"Album description",rows:2})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Cover Image URL"}),(0,O.jsx)(E.p,{value:le.coverImage,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{coverImage:e.target.value})),placeholder:"https://example.com/cover.jpg"})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Release Date"}),(0,O.jsx)(E.p,{type:"date",value:le.releaseDate,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{releaseDate:e.target.value}))})]})]}),(0,O.jsxs)(P.Es,{children:[(0,O.jsx)(R.$,{variant:"ghost",onClick:()=>z(!1),children:"Cancel"}),(0,O.jsxs)(R.$,{onClick:()=>{le.title.trim()?Ce.mutate(le):N({message:"Album title is required",type:"error"})},disabled:Ce.isLoading,children:[Ce.isLoading&&(0,O.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Album"]})]})]})}),(0,O.jsx)(P.lG,{open:G,onOpenChange:K,children:(0,O.jsxs)(P.Cf,{className:"max-w-md",children:[(0,O.jsx)(P.c7,{children:(0,O.jsx)(P.L3,{children:"Edit Album"})}),(0,O.jsxs)("div",{className:"space-y-4 py-4",children:[(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Title *"}),(0,O.jsx)(E.p,{value:le.title,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{title:e.target.value}))})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Type"}),(0,O.jsxs)(B.l6,{value:le.type,onValueChange:e=>de((0,t.A)((0,t.A)({},le),{},{type:e})),children:[(0,O.jsx)(B.bq,{children:(0,O.jsx)(B.yv,{})}),(0,O.jsx)(B.gC,{children:_.map(e=>(0,O.jsx)(B.eb,{value:e.value,children:e.label},e.value))})]})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Genre"}),(0,O.jsx)(E.p,{value:le.genre,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{genre:e.target.value}))})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Description"}),(0,O.jsx)(D.T,{value:le.description,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{description:e.target.value})),rows:2})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Cover Image URL"}),(0,O.jsx)(E.p,{value:le.coverImage,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{coverImage:e.target.value}))})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Release Date"}),(0,O.jsx)(E.p,{type:"date",value:le.releaseDate,onChange:e=>de((0,t.A)((0,t.A)({},le),{},{releaseDate:e.target.value}))})]})]}),(0,O.jsxs)(P.Es,{children:[(0,O.jsx)(R.$,{variant:"ghost",onClick:()=>K(!1),children:"Cancel"}),(0,O.jsxs)(R.$,{onClick:()=>{le.title.trim()?Ie.mutate({id:te.id,data:le}):N({message:"Album title is required",type:"error"})},disabled:Ie.isLoading,children:[Ie.isLoading&&(0,O.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})}),(0,O.jsx)(P.lG,{open:W,onOpenChange:V,children:(0,O.jsxs)(P.Cf,{children:[(0,O.jsxs)(P.c7,{children:[(0,O.jsx)(P.L3,{children:"Delete Album"}),(0,O.jsxs)(P.rr,{children:['Are you sure you want to delete "',null===te||void 0===te?void 0:te.title,'"?']})]}),(0,O.jsx)("p",{className:"text-sm text-muted-foreground py-4",children:"The tracks in this album will not be deleted, but they will become unassigned."}),(0,O.jsxs)(P.Es,{children:[(0,O.jsx)(R.$,{variant:"ghost",onClick:()=>V(!1),children:"Cancel"}),(0,O.jsxs)(R.$,{variant:"destructive",onClick:()=>{Se.mutate(te.id)},disabled:Se.isLoading,children:[Se.isLoading&&(0,O.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete Album"]})]})]})}),(0,O.jsx)(P.lG,{open:X,onOpenChange:H,children:(0,O.jsxs)(P.Cf,{className:"max-w-lg max-h-[80vh] flex flex-col",children:[(0,O.jsxs)(P.c7,{children:[(0,O.jsxs)(P.L3,{children:["Add Tracks to ",null===te||void 0===te?void 0:te.title]}),(0,O.jsx)(P.rr,{children:"Select tracks to add to this album"})]}),(0,O.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:0===we.length?(0,O.jsxs)("div",{className:"text-center py-8",children:[(0,O.jsx)(f.A,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),(0,O.jsx)("p",{className:"text-muted-foreground",children:"No unassigned media available"})]}):(0,O.jsx)("div",{className:"space-y-1",children:we.map(e=>(0,O.jsxs)("div",{onClick:()=>Je(e.id),className:(0,q.cn)("flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-colors",ie.includes(e.id)?"bg-primary/20 border border-primary":"hover:bg-muted/50"),children:[(0,O.jsx)(Q,{checked:ie.includes(e.id),onCheckedChange:()=>Je(e.id)}),(0,O.jsx)("div",{className:(0,q.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,q.O3)(e.id))),children:e.thumbnail&&(0,O.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,O.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,O.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,O.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.subtitle||"No description"})]}),(0,O.jsx)(T.E,{variant:"video"===e.type?"default":"secondary",children:e.type})]},e.id))})}),(0,O.jsxs)(P.Es,{className:"border-t pt-4",children:[(0,O.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[ie.length," tracks selected"]}),(0,O.jsx)(R.$,{variant:"ghost",onClick:()=>H(!1),children:"Cancel"}),(0,O.jsxs)(R.$,{onClick:async()=>{if(0===ie.length)return void N({message:"Select at least one track",type:"error"});let a=(Ne[te.id]||[]).length+1;console.log("Adding tracks to album:",te.id,"tracks:",ie);try{for(const e of ie)console.log("Adding media:",e,"track number:",a),await Te.mutateAsync({albumId:te.id,mediaId:e,trackNumber:a++});s.invalidateQueries(["album-media",te.id]),s.invalidateQueries(["artist-albums",e]),Ae(e=>{const a=(0,t.A)({},e);return delete a[te.id],a}),H(!1),re(null),ne([]),N({message:"".concat(ie.length," tracks added to album"),type:"success"})}catch(n){var r,i;console.error("Failed to add tracks:",n),N({message:(null===(r=n.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||"Failed to add tracks",type:"error"})}},disabled:0===ie.length||Te.isPending,children:[Te.isPending&&(0,O.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),(0,O.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Add to Album"]})]})]})}),(0,O.jsx)(P.lG,{open:Y,onOpenChange:ee,children:(0,O.jsxs)(P.Cf,{className:"max-w-md",children:[(0,O.jsx)(P.c7,{children:(0,O.jsx)(P.L3,{children:"Edit Artist"})}),(0,O.jsxs)("div",{className:"space-y-4 py-4",children:[(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Name *"}),(0,O.jsx)(E.p,{value:ce.name,onChange:e=>oe((0,t.A)((0,t.A)({},ce),{},{name:e.target.value}))})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Genre"}),(0,O.jsx)(E.p,{value:ce.genre,onChange:e=>oe((0,t.A)((0,t.A)({},ce),{},{genre:e.target.value}))})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Biography"}),(0,O.jsx)(D.T,{value:ce.bio,onChange:e=>oe((0,t.A)((0,t.A)({},ce),{},{bio:e.target.value})),rows:3})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Image URL"}),(0,O.jsx)(E.p,{value:ce.image,onChange:e=>oe((0,t.A)((0,t.A)({},ce),{},{image:e.target.value}))})]}),(0,O.jsxs)("div",{className:"space-y-2",children:[(0,O.jsx)(L.J,{children:"Website"}),(0,O.jsx)(E.p,{value:ce.website,onChange:e=>oe((0,t.A)((0,t.A)({},ce),{},{website:e.target.value}))})]})]}),(0,O.jsxs)(P.Es,{children:[(0,O.jsx)(R.$,{variant:"ghost",onClick:()=>ee(!1),children:"Cancel"}),(0,O.jsxs)(R.$,{onClick:()=>{ce.name.trim()?Ee.mutate(ce):N({message:"Artist name is required",type:"error"})},disabled:Ee.isLoading,children:[Ee.isLoading&&(0,O.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})}),(0,O.jsx)(P.lG,{open:ae,onOpenChange:se,children:(0,O.jsxs)(P.Cf,{children:[(0,O.jsxs)(P.c7,{children:[(0,O.jsx)(P.L3,{children:"Delete Artist"}),(0,O.jsxs)(P.rr,{children:['Are you sure you want to delete "',fe.name,'"?']})]}),(0,O.jsx)("p",{className:"text-sm text-muted-foreground py-4",children:"This will delete all albums associated with this artist. Media files will not be deleted but will become unassigned."}),(0,O.jsxs)(P.Es,{children:[(0,O.jsx)(R.$,{variant:"ghost",onClick:()=>se(!1),children:"Cancel"}),(0,O.jsxs)(R.$,{variant:"destructive",onClick:()=>{Re.mutate()},disabled:Re.isLoading,children:[Re.isLoading&&(0,O.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete Artist"]})]})]})})]})}function Z(e){var a;let{album:s,albumTracksCache:i,fetchAlbumTracks:n,onEditAlbum:l,onDeleteAlbum:d,onAssignMedia:c,onPlayAlbum:o,onPlayTrack:m,onRemoveTrack:x,onDragEnd:b,addToast:y}=e;const[C,I]=(0,r.useState)([]),[E,L]=(0,r.useState)(!0);return r.useEffect(()=>{(async()=>{L(!0);const e=await n(s.id);I(e),L(!1)})()},[s.id,n,i[s.id]]),(0,O.jsxs)(S.Zp,{children:[(0,O.jsx)(S.aR,{children:(0,O.jsxs)("div",{className:"flex items-start gap-4",children:[(0,O.jsx)("div",{className:(0,q.cn)("w-24 h-24 rounded-lg shrink-0 overflow-hidden",!s.coverImage&&"bg-gradient-to-br ".concat((0,q.O3)(s.id))),children:s.coverImage?(0,O.jsx)("img",{src:s.coverImage,alt:s.title,className:"w-full h-full object-cover"}):(0,O.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,O.jsx)(v.A,{className:"h-10 w-10 text-white/50"})})}),(0,O.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,O.jsxs)("div",{className:"flex items-start justify-between",children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(S.ZB,{className:"text-xl",children:s.title}),(0,O.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground",children:[(0,O.jsx)(T.E,{variant:"outline",children:(null===(a=_.find(e=>e.value===s.type))||void 0===a?void 0:a.label)||"Album"}),(0,O.jsxs)("span",{children:[s.trackCount||C.length," tracks"]}),s.releaseDate&&(0,O.jsxs)("span",{children:["\u2022 ",s.releaseDate.split("T")[0]]})]})]}),(0,O.jsxs)("div",{className:"flex items-center gap-2",children:[C.length>0&&(0,O.jsx)(R.$,{variant:"spotify",size:"icon",onClick:()=>o(s),children:(0,O.jsx)(j.A,{className:"h-5 w-5 ml-0.5"})}),(0,O.jsxs)(U.rI,{children:[(0,O.jsx)(U.ty,{asChild:!0,children:(0,O.jsx)(R.$,{variant:"ghost",size:"icon",children:(0,O.jsx)(u.A,{className:"h-5 w-5"})})}),(0,O.jsxs)(U.SQ,{align:"end",children:[(0,O.jsxs)(U._2,{onClick:()=>c(s),children:[(0,O.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Tracks"]}),(0,O.jsxs)(U._2,{onClick:()=>l(s),children:[(0,O.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Edit Album"]}),(0,O.jsx)(U.mB,{}),(0,O.jsxs)(U._2,{onClick:()=>d(s),className:"text-destructive",children:[(0,O.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Delete Album"]})]})]})]})]}),s.description&&(0,O.jsx)("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:s.description})]})]})}),(0,O.jsx)(S.Wu,{children:E?(0,O.jsx)("div",{className:"space-y-2",children:Array.from({length:3}).map((e,a)=>(0,O.jsx)(F.E,{className:"h-12 w-full"},a))}):0===C.length?(0,O.jsxs)("div",{className:"text-center py-6 border border-dashed rounded-lg",children:[(0,O.jsx)(f.A,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),(0,O.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"No tracks in this album"}),(0,O.jsxs)(R.$,{variant:"outline",size:"sm",onClick:()=>c(s),children:[(0,O.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Add Tracks"]})]}):(0,O.jsx)(k.JY,{onDragEnd:e=>b(e,s.id,C),children:(0,O.jsx)(k.gL,{droppableId:s.id,children:e=>(0,O.jsxs)("div",(0,t.A)((0,t.A)({ref:e.innerRef},e.droppableProps),{},{className:"space-y-1",children:[C.map((e,a)=>(0,O.jsx)(k.sx,{draggableId:e.id,index:a,children:(s,r)=>(0,O.jsxs)("div",(0,t.A)((0,t.A)({ref:s.innerRef},s.draggableProps),{},{className:(0,q.cn)("flex items-center gap-3 p-2 rounded-lg group hover:bg-muted/50",r.isDragging&&"bg-muted shadow-lg"),children:[(0,O.jsx)("div",(0,t.A)((0,t.A)({},s.dragHandleProps),{},{className:"text-muted-foreground hover:text-foreground cursor-grab",children:(0,O.jsx)(N.A,{className:"h-4 w-4"})})),(0,O.jsx)("span",{className:"w-6 text-sm text-muted-foreground text-center",children:e.trackNumber||a+1}),(0,O.jsx)("div",{className:(0,q.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,q.O3)(e.id))),children:e.thumbnail&&(0,O.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,O.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,O.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,O.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:["video"===e.type?(0,O.jsx)(A.A,{className:"h-3 w-3"}):(0,O.jsx)(f.A,{className:"h-3 w-3"}),(0,O.jsx)("span",{children:e.type})]})]}),(0,O.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,O.jsx)(R.$,{variant:"ghost",size:"iconSm",onClick:()=>m(e,C),children:(0,O.jsx)(j.A,{className:"h-4 w-4"})}),(0,O.jsx)(R.$,{variant:"ghost",size:"iconSm",onClick:()=>x(e),children:(0,O.jsx)(w.A,{className:"h-4 w-4"})})]})]}))},e.id)),e.placeholder]}))})})})]})}},5949:(e,a,s)=>{s.d(a,{E:()=>o});var t=s(7051),r=s(3986),i=(s(5043),s(917)),n=s(9766),l=s(579);const d=["className","variant"],c=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/20 text-green-500",warning:"border-transparent bg-yellow-500/20 text-yellow-500"}},defaultVariants:{variant:"default"}});function o(e){let{className:a,variant:s}=e,i=(0,r.A)(e,d);return(0,l.jsx)("div",(0,t.A)({className:(0,n.cn)(c({variant:s}),a)},i))}},9690:(e,a,s)=>{s.d(a,{Xi:()=>x,av:()=>p,j7:()=>h,tU:()=>u});var t=s(7051),r=s(3986),i=s(5043),n=s(7127),l=s(9766),d=s(579);const c=["className"],o=["className"],m=["className"],u=n.bL,h=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,c);return(0,d.jsx)(n.B8,(0,t.A)({ref:a,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s)},i))});h.displayName=n.B8.displayName;const x=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,o);return(0,d.jsx)(n.l9,(0,t.A)({ref:a,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s)},i))});x.displayName=n.l9.displayName;const p=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,m);return(0,d.jsx)(n.UC,(0,t.A)({ref:a,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s)},i))});p.displayName=n.UC.displayName},9938:(e,a,s)=>{s.d(a,{J:()=>u});var t=s(7051),r=s(3986),i=s(5043),n=s(5131),l=s(917),d=s(9766),c=s(579);const o=["className"],m=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef((e,a)=>{let{className:s}=e,i=(0,r.A)(e,o);return(0,c.jsx)(n.b,(0,t.A)({ref:a,className:(0,d.cn)(m(),s)},i))});u.displayName=n.b.displayName}}]);
//# sourceMappingURL=436.3d7fdc8b.chunk.js.map