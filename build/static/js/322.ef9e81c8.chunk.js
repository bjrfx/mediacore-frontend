"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[322],{5949:(e,s,a)=>{a.d(s,{E:()=>o});var l=a(27051),t=a(53986),i=(a(65043),a(10917)),r=a(99766),n=a(70579);const d=["className","variant"],c=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/20 text-green-500",warning:"border-transparent bg-yellow-500/20 text-yellow-500"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:a}=e,i=(0,t.A)(e,d);return(0,n.jsx)("div",(0,l.A)({className:(0,r.cn)(c({variant:a}),s)},i))}},13416:(e,s,a)=>{a.d(s,{T:()=>c});var l=a(27051),t=a(53986),i=a(65043),r=a(99766),n=a(70579);const d=["className"],c=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,d);return(0,n.jsx)("textarea",(0,l.A)({className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s},i))});c.displayName="Textarea"},19690:(e,s,a)=>{a.d(s,{Xi:()=>h,av:()=>f,j7:()=>x,tU:()=>u});var l=a(27051),t=a(53986),i=a(65043),r=a(47127),n=a(99766),d=a(70579);const c=["className"],o=["className"],m=["className"],u=r.bL,x=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,c);return(0,d.jsx)(r.B8,(0,l.A)({ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a)},i))});x.displayName=r.B8.displayName;const h=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,o);return(0,d.jsx)(r.l9,(0,l.A)({ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a)},i))});h.displayName=r.l9.displayName;const f=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,m);return(0,d.jsx)(r.UC,(0,l.A)({ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a)},i))});f.displayName=r.UC.displayName},27322:(e,s,a)=>{a.r(s),a.d(s,{default:()=>D});var l=a(27051),t=a(65043),i=a(12265),r=a(63248),n=a(47097),d=a(35087),c=a(57170),o=a(2284),m=a(48186),u=a(19829),x=a(64830),h=a(39292),f=a(9855),p=a(84105),g=a(64265),j=a(66305),v=a(18717),N=a(91140),b=a(92264),y=a(13390),w=a(5949),A=a(31555),C=a(19690),k=a(65598),S=a(17484),R=a(99766),E=a(59938),F=a(13416),$=a(70579);const M=e=>{let{children:s,className:a}=e;return(0,$.jsx)("div",{className:(0,R.cn)("w-full overflow-auto",a),children:(0,$.jsx)("table",{className:"w-full caption-bottom text-sm",children:s})})},T=e=>{let{children:s}=e;return(0,$.jsx)("thead",{children:s})},z=e=>{let{children:s}=e;return(0,$.jsx)("tbody",{children:s})},L=e=>{let{children:s,className:a}=e;return(0,$.jsx)("tr",{className:(0,R.cn)("border-b transition-colors hover:bg-muted/50",a),children:s})},U=e=>{let{children:s,className:a}=e;return(0,$.jsx)("th",{className:(0,R.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground",a),children:s})},_=e=>{let{children:s,className:a}=e;return(0,$.jsx)("td",{className:(0,R.cn)("p-4 align-middle",a),children:s})};function D(){const e=(0,r.jE)(),{addToast:s}=(0,v.j_)(),[a,D]=(0,t.useState)(""),[P,B]=(0,t.useState)("all"),[O,q]=(0,t.useState)("table"),[V,X]=(0,t.useState)(null),[Z,I]=(0,t.useState)(!1),[J,Q]=(0,t.useState)(!1),[G,K]=(0,t.useState)(null),[W,Y]=(0,t.useState)({title:"",subtitle:""}),{data:H,isLoading:ee,error:se}=(0,i.I)({queryKey:["admin-media"],queryFn:()=>j.O0.getMedia({limit:500})}),ae=(0,n.n)({mutationFn:e=>{let{id:s,data:a}=e;return j.ic.updateMedia(s,a)},onSuccess:()=>{e.invalidateQueries(["media"]),I(!1),X(null),s({message:"Media updated successfully",type:"success"})},onError:e=>{s({message:e.message||"Failed to update media",type:"error"})}}),le=(0,n.n)({mutationFn:e=>{let{id:s,deleteFile:a}=e;return j.ic.deleteMedia(s,a)},onSuccess:()=>{e.invalidateQueries(["media"]),Q(!1),K(null),s({message:"Media deleted successfully",type:"success"})},onError:e=>{s({message:e.message||"Failed to delete media",type:"error"})}}),te=(null===H||void 0===H?void 0:H.data)||[],ie="all"===P?te:te.filter(e=>e.type===P),re=a?ie.filter(e=>{var s,l;return(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().includes(a.toLowerCase()))||(null===(l=e.subtitle)||void 0===l?void 0:l.toLowerCase().includes(a.toLowerCase()))}):ie,ne=e=>{X(e),Y({title:e.title,subtitle:e.subtitle||""}),I(!0)},de=e=>{K(e),Q(!0)},ce=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];G&&le.mutate({id:G.id,deleteFile:e})};return(0,$.jsxs)("div",{className:"space-y-6",children:[(0,$.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,$.jsxs)("div",{children:[(0,$.jsx)("h2",{className:"text-2xl font-bold",children:"Media Library"}),(0,$.jsx)("p",{className:"text-muted-foreground",children:"Manage your uploaded media files"})]}),(0,$.jsxs)("div",{className:"flex items-center gap-2",children:[(0,$.jsx)(y.$,{variant:"table"===O?"secondary":"ghost",size:"icon",onClick:()=>q("table"),children:(0,$.jsx)(o.A,{className:"h-4 w-4"})}),(0,$.jsx)(y.$,{variant:"grid"===O?"secondary":"ghost",size:"icon",onClick:()=>q("grid"),children:(0,$.jsx)(p.A,{className:"h-4 w-4"})})]})]}),(0,$.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,$.jsxs)("div",{className:"relative flex-1",children:[(0,$.jsx)(h.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,$.jsx)(b.p,{placeholder:"Search media...",value:a,onChange:e=>D(e.target.value),className:"pl-10"})]}),(0,$.jsx)(C.tU,{value:P,onValueChange:B,children:(0,$.jsxs)(C.j7,{children:[(0,$.jsx)(C.Xi,{value:"all",children:"All"}),(0,$.jsx)(C.Xi,{value:"video",children:"Videos"}),(0,$.jsx)(C.Xi,{value:"audio",children:"Audio"})]})})]}),(0,$.jsxs)("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[(0,$.jsxs)("span",{children:[re.length," items shown"]}),(0,$.jsx)("span",{children:"\u2022"}),(0,$.jsxs)("span",{children:[te.filter(e=>"video"===e.type).length," videos total"]}),(0,$.jsx)("span",{children:"\u2022"}),(0,$.jsxs)("span",{children:[te.filter(e=>"audio"===e.type).length," audio total"]})]}),ee?(0,$.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,s)=>(0,$.jsx)(A.E,{className:"h-16 w-full"},s))}):se?(0,$.jsx)("div",{className:"text-center py-12 text-destructive",children:"Failed to load media. Please try again."}):0===re.length?(0,$.jsxs)("div",{className:"text-center py-12",children:[(0,$.jsx)(c.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,$.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No media found"}),(0,$.jsx)("p",{className:"text-muted-foreground",children:a?"Try a different search term":"Upload your first media file"})]}):"table"===O?(0,$.jsx)(N.Zp,{children:(0,$.jsxs)(M,{children:[(0,$.jsx)(T,{children:(0,$.jsxs)(L,{children:[(0,$.jsx)(U,{children:"Media"}),(0,$.jsx)(U,{children:"Type"}),(0,$.jsx)(U,{className:"hidden md:table-cell",children:"Size"}),(0,$.jsx)(U,{className:"hidden md:table-cell",children:"Date"}),(0,$.jsx)(U,{className:"text-right",children:"Actions"})]})}),(0,$.jsx)(z,{children:re.map(e=>(0,$.jsxs)(L,{children:[(0,$.jsx)(_,{children:(0,$.jsxs)("div",{className:"flex items-center gap-3",children:[(0,$.jsx)("div",{className:(0,R.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,R.O3)(e.id))),children:e.thumbnail&&(0,$.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,$.jsxs)("div",{className:"min-w-0",children:[(0,$.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,$.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:e.subtitle||"No description"})]})]})}),(0,$.jsx)(_,{children:(0,$.jsxs)(w.E,{variant:"video"===e.type?"default":"secondary",children:["video"===e.type?(0,$.jsx)(c.A,{className:"h-3 w-3 mr-1"}):(0,$.jsx)(u.A,{className:"h-3 w-3 mr-1"}),e.type]})}),(0,$.jsx)(_,{className:"hidden md:table-cell",children:(0,R.v7)(e.fileSize)}),(0,$.jsx)(_,{className:"hidden md:table-cell",children:(0,R.Yq)(e.createdAt)}),(0,$.jsx)(_,{className:"text-right",children:(0,$.jsxs)(S.rI,{children:[(0,$.jsx)(S.ty,{asChild:!0,children:(0,$.jsx)(y.$,{variant:"ghost",size:"iconSm",children:(0,$.jsx)(m.A,{className:"h-4 w-4"})})}),(0,$.jsxs)(S.SQ,{align:"end",children:[(0,$.jsxs)(S._2,{onClick:()=>window.open(e.fileUrl,"_blank"),children:[(0,$.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"View"]}),(0,$.jsxs)(S._2,{onClick:()=>ne(e),children:[(0,$.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,$.jsx)(S.mB,{}),(0,$.jsxs)(S._2,{onClick:()=>de(e),className:"text-destructive",children:[(0,$.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id))})]})}):(0,$.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:re.map(e=>(0,$.jsxs)(N.Zp,{className:"group overflow-hidden",children:[(0,$.jsxs)("div",{className:(0,R.cn)("aspect-square relative","bg-gradient-to-br ".concat((0,R.O3)(e.id))),children:[e.thumbnail&&(0,$.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}),(0,$.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,$.jsx)(y.$,{size:"icon",variant:"secondary",onClick:()=>window.open(e.fileUrl,"_blank"),children:(0,$.jsx)(x.A,{className:"h-4 w-4"})}),(0,$.jsx)(y.$,{size:"icon",variant:"secondary",onClick:()=>ne(e),children:(0,$.jsx)(g.A,{className:"h-4 w-4"})}),(0,$.jsx)(y.$,{size:"icon",variant:"destructive",onClick:()=>de(e),children:(0,$.jsx)(f.A,{className:"h-4 w-4"})})]}),(0,$.jsx)(w.E,{className:"absolute top-2 left-2",variant:"video"===e.type?"default":"secondary",children:e.type})]}),(0,$.jsxs)(N.Wu,{className:"p-3",children:[(0,$.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,$.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,R.v7)(e.fileSize)})]})]},e.id))}),(0,$.jsx)(k.lG,{open:Z,onOpenChange:I,children:(0,$.jsxs)(k.Cf,{children:[(0,$.jsxs)(k.c7,{children:[(0,$.jsx)(k.L3,{children:"Edit Media"}),(0,$.jsx)(k.rr,{children:"Update the media metadata"})]}),(0,$.jsxs)("div",{className:"space-y-4 py-4",children:[(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(E.J,{children:"Title"}),(0,$.jsx)(b.p,{value:W.title,onChange:e=>Y(s=>(0,l.A)((0,l.A)({},s),{},{title:e.target.value}))})]}),(0,$.jsxs)("div",{className:"space-y-2",children:[(0,$.jsx)(E.J,{children:"Description"}),(0,$.jsx)(F.T,{value:W.subtitle,onChange:e=>Y(s=>(0,l.A)((0,l.A)({},s),{},{subtitle:e.target.value}))})]})]}),(0,$.jsxs)(k.Es,{children:[(0,$.jsx)(y.$,{variant:"ghost",onClick:()=>I(!1),children:"Cancel"}),(0,$.jsx)(y.$,{onClick:()=>{V&&ae.mutate({id:V.id,data:W})},disabled:ae.isPending,children:ae.isPending?"Saving...":"Save"})]})]})}),(0,$.jsx)(k.lG,{open:J,onOpenChange:Q,children:(0,$.jsxs)(k.Cf,{children:[(0,$.jsxs)(k.c7,{children:[(0,$.jsx)(k.L3,{children:"Delete Media"}),(0,$.jsxs)(k.rr,{children:['Are you sure you want to delete "',null===G||void 0===G?void 0:G.title,'"?']})]}),(0,$.jsx)("div",{className:"py-4",children:(0,$.jsx)("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone. You can choose to keep the file on the server or delete it completely."})}),(0,$.jsxs)(k.Es,{className:"gap-2",children:[(0,$.jsx)(y.$,{variant:"ghost",onClick:()=>Q(!1),children:"Cancel"}),(0,$.jsx)(y.$,{variant:"outline",onClick:()=>ce(!1),disabled:le.isPending,children:"Keep File"}),(0,$.jsx)(y.$,{variant:"destructive",onClick:()=>ce(!0),disabled:le.isPending,children:le.isPending?"Deleting...":"Delete All"})]})]})})]})}},31555:(e,s,a)=>{a.d(s,{E:()=>d});var l=a(27051),t=a(53986),i=(a(65043),a(99766)),r=a(70579);const n=["className"];function d(e){let{className:s}=e,a=(0,t.A)(e,n);return(0,r.jsx)("div",(0,l.A)({className:(0,i.cn)("animate-pulse rounded-md bg-muted",s)},a))}},59938:(e,s,a)=>{a.d(s,{J:()=>u});var l=a(27051),t=a(53986),i=a(65043),r=a(65131),n=a(10917),d=a(99766),c=a(70579);const o=["className"],m=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,o);return(0,c.jsx)(r.b,(0,l.A)({ref:s,className:(0,d.cn)(m(),a)},i))});u.displayName=r.b.displayName},91140:(e,s,a)=>{a.d(s,{BT:()=>g,Wu:()=>j,ZB:()=>p,Zp:()=>h,aR:()=>f});var l=a(27051),t=a(53986),i=a(65043),r=a(99766),n=a(70579);const d=["className"],c=["className"],o=["className","children"],m=["className"],u=["className"],x=["className"],h=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,d);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",a)},i))});h.displayName="Card";const f=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,c);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a)},i))});f.displayName="CardHeader";const p=i.forwardRef((e,s)=>{let{className:a,children:i}=e,d=(0,t.A)(e,o);return(0,n.jsx)("h3",(0,l.A)((0,l.A)({ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a)},d),{},{children:i}))});p.displayName="CardTitle";const g=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,m);return(0,n.jsx)("p",(0,l.A)({ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a)},i))});g.displayName="CardDescription";const j=i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,u);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("p-6 pt-0",a)},i))});j.displayName="CardContent";i.forwardRef((e,s)=>{let{className:a}=e,i=(0,t.A)(e,x);return(0,n.jsx)("div",(0,l.A)({ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a)},i))}).displayName="CardFooter"},92264:(e,s,a)=>{a.d(s,{p:()=>c});var l=a(27051),t=a(53986),i=a(65043),r=a(99766),n=a(70579);const d=["className","type"],c=i.forwardRef((e,s)=>{let{className:a,type:i}=e,c=(0,t.A)(e,d);return(0,n.jsx)("input",(0,l.A)({type:i,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200",a),ref:s},c))});c.displayName="Input"}}]);
//# sourceMappingURL=322.ef9e81c8.chunk.js.map