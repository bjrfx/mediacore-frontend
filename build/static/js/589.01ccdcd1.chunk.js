/*! For license information please see 589.01ccdcd1.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmediacore_frontend=self.webpackChunkmediacore_frontend||[]).push([[589],{1555:(e,a,t)=>{t.d(a,{E:()=>d});var s=t(7051),r=t(3986),n=(t(5043),t(9766)),i=t(579);const c=["className"];function d(e){let{className:a}=e,t=(0,r.A)(e,c);return(0,i.jsx)("div",(0,s.A)({className:(0,n.cn)("animate-pulse rounded-md bg-muted",a)},t))}},4505:(e,a,t)=>{t.d(a,{O0:()=>o,ic:()=>m});var s=t(7051),r=t(9722),n=t(3550);const i="https://test.mediacoreapi.masakalirestrobar.ca",c="mc_3f177f8a673446ba8ee152728d877b00";console.log("[API] Base URL:",i);const d=r.A.create({baseURL:i,timeout:3e4,headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{var a;return console.log("[API] ".concat(null===(a=e.method)||void 0===a?void 0:a.toUpperCase()," ").concat(e.baseURL).concat(e.url)),e},e=>(console.error("[API Request Error]",e),Promise.reject(e))),d.interceptors.response.use(e=>(console.log("[API] Response:",e.status),e),e=>{var a,t,s;return console.error("[API Error]",{status:null===(a=e.response)||void 0===a?void 0:a.status,data:null===(t=e.response)||void 0===t?void 0:t.data,message:e.message,url:null===(s=e.config)||void 0===s?void 0:s.url}),Promise.reject(e)});const l=async()=>{const e=await(0,n.p9)();return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},o={healthCheck:async()=>(await d.get("/health")).data,getMedia:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{type:a,limit:t=50,orderBy:s="createdAt",order:r="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:r});a&&n.append("type",a);return(await d.get("/api/feed?".concat(n),{headers:{"x-api-key":c}})).data},getMediaById:async e=>(await d.get("/api/media/".concat(e),{headers:{"x-api-key":c}})).data,getSettings:async()=>(await d.get("/api/settings",{headers:{"x-api-key":c}})).data,getArtists:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{limit:a=50,orderBy:t="createdAt",order:s="desc"}=e,r=new URLSearchParams({limit:String(a),orderBy:t,order:s});return(await d.get("/api/artists?".concat(r),{headers:{"x-api-key":c}})).data},getArtistById:async e=>(await d.get("/api/artists/".concat(e),{headers:{"x-api-key":c}})).data,getArtistAlbums:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{orderBy:t="releaseDate",order:s="desc"}=a,r=new URLSearchParams({orderBy:t,order:s});return(await d.get("/api/artists/".concat(e,"/albums?").concat(r),{headers:{"x-api-key":c}})).data},getArtistMedia:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{type:t,orderBy:s="createdAt",order:r="desc"}=a,n=new URLSearchParams({orderBy:s,order:r});t&&n.append("type",t);return(await d.get("/api/artists/".concat(e,"/media?").concat(n),{headers:{"x-api-key":c}})).data},getAlbums:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{artistId:a,limit:t=50,orderBy:s="releaseDate",order:r="desc"}=e,n=new URLSearchParams({limit:String(t),orderBy:s,order:r});a&&n.append("artistId",a);return(await d.get("/api/albums?".concat(n),{headers:{"x-api-key":c}})).data},getAlbumById:async e=>(await d.get("/api/albums/".concat(e),{headers:{"x-api-key":c}})).data,getAlbumMedia:async e=>(await d.get("/api/albums/".concat(e,"/media"),{headers:{"x-api-key":c}})).data},m={uploadMedia:async function(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"video",r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0;const l=await(0,n.p9)(),o=new FormData;o.append("file",e),o.append("title",a),o.append("subtitle",t),o.append("type",s),i&&o.append("artistId",i),c&&o.append("albumId",c),console.log("[API] Upload:",{fileName:e.name,fileType:e.type,title:a,type:s,artistId:i,albumId:c});return(await d.post("/admin/media",o,{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"multipart/form-data"},onUploadProgress:e=>{if(r&&e.total){const a=Math.round(100*e.loaded/e.total);r(a)}}})).data},updateMedia:async(e,a)=>{const t=await l();return(await d.put("/admin/media/".concat(e),a,{headers:t})).data},deleteMedia:async function(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=await l();return(await d.delete("/admin/media/".concat(e,"?deleteFile=").concat(a),{headers:t})).data},createArtist:async e=>{const a=await l();return(await d.post("/admin/artists",e,{headers:a})).data},updateArtist:async(e,a)=>{const t=await l();return(await d.put("/admin/artists/".concat(e),a,{headers:t})).data},deleteArtist:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await l();return(await d.delete("/admin/artists/".concat(e,"?cascade=").concat(a),{headers:t})).data},createAlbum:async e=>{const a=await l();return(await d.post("/admin/albums",e,{headers:a})).data},updateAlbum:async(e,a)=>{const t=await l();return(await d.put("/admin/albums/".concat(e),a,{headers:t})).data},deleteAlbum:async e=>{const a=await l();return(await d.delete("/admin/albums/".concat(e),{headers:a})).data},addMediaToAlbum:async(e,a,t)=>{const s=await l();return(await d.post("/admin/albums/".concat(e,"/media"),{mediaId:a,trackNumber:t},{headers:s})).data},removeMediaFromAlbum:async(e,a)=>{const t=await l();return(await d.delete("/admin/albums/".concat(e,"/media/").concat(a),{headers:t})).data},reorderAlbumTracks:async(e,a)=>{const t=await l();return(await d.put("/admin/albums/".concat(e,"/media/reorder"),{tracks:a},{headers:t})).data},generateApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read_only",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await l();return(await d.post("/admin/generate-key",(0,s.A)({name:e,accessType:a},t),{headers:r})).data},getApiKeys:async()=>{const e=await l();return(await d.get("/admin/api-keys",{headers:e})).data},deleteApiKey:async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=await l();return(await d.delete("/admin/api-keys/".concat(e,"?hardDelete=").concat(a),{headers:t})).data},getSettings:async()=>{const e=await l();return(await d.get("/api/settings",{headers:e})).data},updateSettings:async e=>{const a=await l();return(await d.put("/admin/settings",e,{headers:a})).data},getDashboard:async()=>{const e=await l();return(await d.get("/admin/analytics/dashboard",{headers:e})).data},getAnalyticsSummary:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;const a=await l();return(await d.get("/admin/analytics/summary?days=".concat(e),{headers:a})).data},getRealTimeStats:async()=>{const e=await l();return(await d.get("/admin/analytics/realtime",{headers:e})).data},getApiKeyStats:async e=>{const a=await l(),t=e?"/admin/analytics/api-keys?keyId=".concat(e):"/admin/analytics/api-keys";return(await d.get(t,{headers:a})).data},getUsers:async()=>{const e=await l();return(await d.get("/admin/users",{headers:e})).data},getUserById:async e=>{const a=await l();return(await d.get("/admin/users/".concat(e),{headers:a})).data},updateUserRole:async(e,a)=>{const t=await l();return(await d.put("/admin/users/".concat(e,"/role"),{role:a},{headers:t})).data},updateUserStatus:async(e,a)=>{const t=await l();return(await d.put("/admin/users/".concat(e,"/status"),{disabled:a},{headers:t})).data},deleteUser:async e=>{const a=await l();return(await d.delete("/admin/users/".concat(e),{headers:a})).data}}},4589:(e,a,t)=>{t.r(a),t.d(a,{default:()=>I});var s=t(5043),r=t(3216),n=t(5475),i=t(6931),c=t(1228),d=t(5613),l=t(5088),o=t(9521),m=t(7170),u=t(4918),h=t(8186),x=t(9829),p=t(4830),g=t(8306),y=t(2119),w=t(4459),j=t(8717),f=t(4505),v=t(3390),b=t(1555),N=t(7484),A=t(9766),k=t(579);function I(){const{albumId:e}=(0,r.g)(),{playTrack:a,setQueue:t}=(0,j.ut)(),{toggleFavorite:I,isFavorite:S}=(0,j.CA)(),{data:B,isLoading:P,isError:U,error:C}=(0,i.I)({queryKey:["album",e],queryFn:()=>f.O0.getAlbumById(e),enabled:!!e}),{data:M,isLoading:F}=(0,i.I)({queryKey:["album",e,"media"],queryFn:()=>f.O0.getAlbumMedia(e),enabled:!!e}),_=null===B||void 0===B?void 0:B.data,E=null===_||void 0===_?void 0:_.artist,R=(0,s.useMemo)(()=>(null===M||void 0===M?void 0:M.data)||[],[null===M||void 0===M?void 0:M.data]),T=(0,s.useMemo)(()=>{let e=0;return R.forEach(a=>{a.duration&&(e+=a.duration)}),e},[R]);return P?(0,k.jsxs)("div",{className:"space-y-8 pb-32",children:[(0,k.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6 py-8",children:[(0,k.jsx)(b.E,{className:"w-48 h-48 md:w-56 md:h-56 rounded-lg"}),(0,k.jsxs)("div",{className:"flex-1 text-center md:text-left space-y-4",children:[(0,k.jsx)(b.E,{className:"h-4 w-16"}),(0,k.jsx)(b.E,{className:"h-12 w-64"}),(0,k.jsx)(b.E,{className:"h-4 w-48"})]})]}),(0,k.jsxs)("div",{className:"flex gap-4",children:[(0,k.jsx)(b.E,{className:"h-12 w-28 rounded-full"}),(0,k.jsx)(b.E,{className:"h-12 w-28 rounded-full"})]}),(0,k.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((e,a)=>(0,k.jsx)(b.E,{className:"h-16 w-full"},a))})]}):U||!_?(0,k.jsxs)("div",{className:"min-h-[60vh] flex flex-col items-center justify-center",children:[U?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.A,{className:"h-16 w-16 text-destructive mb-4"}),(0,k.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Failed to load album"}),(0,k.jsx)("p",{className:"text-muted-foreground mb-4",children:(null===C||void 0===C?void 0:C.message)||"An error occurred"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.A,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,k.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Album not found"}),(0,k.jsx)("p",{className:"text-muted-foreground mb-4",children:"This album doesn't exist or has been removed"})]}),(0,k.jsx)(v.$,{asChild:!0,children:(0,k.jsx)(n.N_,{to:"/",children:"Go Home"})})]}):(0,k.jsxs)("div",{className:"space-y-8 pb-32",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:(0,A.cn)("absolute inset-0 -z-10 opacity-30 blur-3xl","bg-gradient-to-br ".concat((0,A.O3)(_.id)))}),(0,k.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row items-center md:items-end gap-6 py-8",children:[(0,k.jsx)("div",{className:(0,A.cn)("w-48 h-48 md:w-56 md:h-56 rounded-lg shadow-2xl overflow-hidden shrink-0",!_.coverImage&&"bg-gradient-to-br ".concat((0,A.O3)(_.id))),children:_.coverImage?(0,k.jsx)("img",{src:_.coverImage,alt:_.title,className:"w-full h-full object-cover"}):(0,k.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,k.jsx)(o.A,{className:"h-24 w-24 text-white/50"})})}),(0,k.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-primary mb-2",children:_.type?"album"===_.type?"Album":_.type.charAt(0).toUpperCase()+_.type.slice(1):"Album"}),(0,k.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:_.title}),_.description&&(0,k.jsx)("p",{className:"text-muted-foreground max-w-2xl mb-4 line-clamp-2",children:_.description}),(0,k.jsxs)("div",{className:"flex items-center justify-center md:justify-start gap-2 text-sm",children:[E&&(0,k.jsxs)(k.Fragment,{children:[E.image?(0,k.jsx)("img",{src:E.image,alt:E.name,className:"w-6 h-6 rounded-full"}):(0,k.jsx)("div",{className:(0,A.cn)("w-6 h-6 rounded-full flex items-center justify-center","bg-gradient-to-br ".concat((0,A.O3)(E.id))),children:(0,k.jsx)(w.A,{className:"h-3 w-3 text-white"})}),(0,k.jsx)(n.N_,{to:"/artist/".concat(E.id),className:"font-semibold hover:underline",children:E.name}),(0,k.jsx)("span",{className:"text-muted-foreground",children:"\u2022"})]}),_.releaseDate&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:"text-muted-foreground",children:new Date(_.releaseDate).getFullYear()}),(0,k.jsx)("span",{className:"text-muted-foreground",children:"\u2022"})]}),(0,k.jsxs)("span",{className:"text-muted-foreground",children:[R.length," songs",T>0&&", ".concat((0,A.a3)(T))]})]})]})]}),(0,k.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex items-center gap-4 mt-6",children:[(0,k.jsxs)(v.$,{size:"lg",variant:"spotify",className:"rounded-full px-8",onClick:()=>{R.length>0&&(t(R,0),a(R[0],R))},disabled:0===R.length,children:[(0,k.jsx)(p.A,{className:"h-5 w-5 mr-2 ml-1"}),"Play"]}),(0,k.jsxs)(v.$,{size:"lg",variant:"outline",className:"rounded-full",onClick:()=>{if(R.length>0){const e=[...R].sort(()=>Math.random()-.5);t(e,0),a(e[0],e)}},disabled:0===R.length,children:[(0,k.jsx)(y.A,{className:"h-5 w-5 mr-2"}),"Shuffle"]}),(0,k.jsxs)(N.rI,{children:[(0,k.jsx)(N.ty,{asChild:!0,children:(0,k.jsx)(v.$,{variant:"ghost",size:"icon",className:"rounded-full",children:(0,k.jsx)(h.A,{className:"h-5 w-5"})})}),(0,k.jsx)(N.SQ,{children:(0,k.jsxs)(N._2,{onClick:()=>{var e,a;null===(e=(a=navigator).share)||void 0===e||e.call(a,{title:_.title,url:window.location.href})},children:[(0,k.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Share"]})})]})]})]}),(0,k.jsx)("section",{children:F?(0,k.jsx)("div",{className:"space-y-2",children:Array.from({length:5}).map((e,a)=>(0,k.jsx)(b.E,{className:"h-16 w-full"},a))}):0===R.length?(0,k.jsxs)("div",{className:"text-center py-12 bg-card rounded-lg",children:[(0,k.jsx)(x.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,k.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No tracks yet"}),(0,k.jsx)("p",{className:"text-muted-foreground",children:"This album doesn't have any tracks yet"})]}):(0,k.jsxs)("div",{className:"bg-card rounded-lg overflow-hidden",children:[(0,k.jsxs)("div",{className:"grid grid-cols-[auto_1fr_auto_auto] gap-4 px-4 py-2 border-b text-sm text-muted-foreground",children:[(0,k.jsx)("span",{className:"w-8 text-center",children:"#"}),(0,k.jsx)("span",{children:"Title"}),(0,k.jsx)("span",{className:"w-12"}),(0,k.jsx)("span",{className:"w-16 text-right",children:(0,k.jsx)(l.A,{className:"h-4 w-4 inline"})})]}),R.map((e,s)=>{const r=S(e.id),n=e.trackNumber||s+1;return(0,k.jsxs)(c.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.02*s},className:"group grid grid-cols-[auto_1fr_auto_auto] gap-4 px-4 py-2 hover:bg-muted/50 items-center",children:[(0,k.jsxs)("div",{className:"w-8 text-center text-muted-foreground",children:[(0,k.jsx)("span",{className:"group-hover:hidden",children:n}),(0,k.jsx)(v.$,{variant:"ghost",size:"iconSm",className:"hidden group-hover:flex mx-auto",onClick:()=>((e,s)=>{t(R,s),a(e,R)})(e,s),children:(0,k.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,k.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,k.jsx)("div",{className:(0,A.cn)("w-10 h-10 rounded shrink-0","bg-gradient-to-br ".concat((0,A.O3)(e.id))),children:e.thumbnail&&(0,k.jsx)("img",{src:e.thumbnail,alt:"",className:"w-full h-full object-cover rounded"})}),(0,k.jsxs)("div",{className:"min-w-0",children:[(0,k.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,k.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["video"===e.type?(0,k.jsx)(m.A,{className:"h-3 w-3"}):(0,k.jsx)(x.A,{className:"h-3 w-3"}),(0,k.jsx)("span",{children:e.type}),e.subtitle&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{children:"\u2022"}),(0,k.jsx)("span",{className:"truncate",children:e.subtitle})]})]})]})]}),(0,k.jsx)(v.$,{variant:"ghost",size:"iconSm",className:(0,A.cn)("opacity-0 group-hover:opacity-100 transition-opacity",r&&"opacity-100"),onClick:()=>I(e),children:(0,k.jsx)(u.A,{className:(0,A.cn)("h-4 w-4",r&&"fill-primary text-primary")})}),(0,k.jsx)("span",{className:"w-16 text-right text-sm text-muted-foreground",children:e.duration?(0,A.a3)(e.duration):"--:--"})]},e.id)})]})}),E&&(0,k.jsxs)("section",{children:[(0,k.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["More from ",E.name]}),(0,k.jsx)(n.N_,{to:"/artist/".concat(E.id),children:(0,k.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-card rounded-lg hover:bg-card/80 transition-colors",children:[E.image?(0,k.jsx)("img",{src:E.image,alt:E.name,className:"w-16 h-16 rounded-full object-cover"}):(0,k.jsx)("div",{className:(0,A.cn)("w-16 h-16 rounded-full flex items-center justify-center","bg-gradient-to-br ".concat((0,A.O3)(E.id))),children:(0,k.jsx)(w.A,{className:"h-8 w-8 text-white/50"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"font-semibold",children:E.name}),(0,k.jsx)("p",{className:"text-sm text-muted-foreground",children:"View artist profile"})]})]})})]})]})}},8186:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},8306:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},9521:(e,a,t)=>{t.d(a,{A:()=>s});const s=(0,t(1639).A)("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])}}]);
//# sourceMappingURL=589.01ccdcd1.chunk.js.map